const t={start:"start",move:"move",cancel:"cancel",end:"end",destroy:"destroy"};var e,i,n,s,r={ADD:"add",UPDATE:"update",IGNORE:"ignore",THROW:"throw"},a=class{constructor(t={}){let{dedupe:e=r.ADD,getId:i=()=>Symbol()}=t;this.dedupe=e,this.getId=i,this._events=new Map}_getListeners(t){let e=this._events.get(t);if(e){let{idMap:t}=e;if(t.size)return e.emitList=e.emitList||[...t.values()]}return null}on(t,e,i){let{_events:n}=this,s=n.get(t);s||(s={idMap:new Map,emitList:null},n.set(t,s));let{idMap:a,emitList:o}=s;if(i=void 0===i?this.getId(e):i,a.has(i))switch(this.dedupe){case r.THROW:throw Error("Eventti: duplicate listener id!");case r.IGNORE:return i;case r.UPDATE:s.emitList=null;break;default:a.delete(i),s.emitList=null}return a.set(i,e),o?.push(e),i}once(t,e,i){let n=!1;return i=void 0===i?this.getId(e):i,this.on(t,(...s)=>{n||(n=!0,this.off(t,i),e(...s))},i)}off(t,e){if(void 0===t){this._events.clear();return}if(void 0===e){this._events.delete(t);return}let i=this._events.get(t);i&&i.idMap.delete(e)&&(i.emitList=null,i.idMap.size||this._events.delete(t))}emit(t,...e){let i=this._getListeners(t);if(!i)return;let{length:n}=i;if(e.length){if(1===n)i[0](...e);else{let t=0;for(;t<n;t++)i[t](...e)}}else if(1===n)i[0]();else{let t=0;for(;t<n;t++)i[t]()}}listenerCount(t){if(void 0===t){let t=0;return this._events.forEach((e,i)=>{t+=this.listenerCount(i)}),t}return this._events.get(t)?.idMap.size||0}};class o{constructor(){this.drag=null,this.isDestroyed=!1,this._emitter=new a}_createDragData(t){return{x:t.x,y:t.y}}_updateDragData(t){this.drag&&(this.drag.x=t.x,this.drag.y=t.y)}_resetDragData(){this.drag=null}_start(e){this.isDestroyed||this.drag||(this.drag=this._createDragData(e),this._emitter.emit(t.start,e))}_move(e){this.drag&&(this._updateDragData(e),this._emitter.emit(t.move,e))}_end(e){this.drag&&(this._updateDragData(e),this._emitter.emit(t.end,e),this._resetDragData())}_cancel(e){this.drag&&(this._updateDragData(e),this._emitter.emit(t.cancel,e),this._resetDragData())}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}cancel(){this.drag&&this._cancel({type:t.cancel,x:this.drag.x,y:this.drag.y})}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(t.destroy,{type:t.destroy}),this._emitter.off())}}var l=class{constructor(t={}){let{phases:e=[],dedupe:i,getId:n}=t;this._phases=e,this._emitter=new a({getId:n,dedupe:i}),this._queue=[],this.tick=this.tick.bind(this),this._getListeners=this._emitter._getListeners.bind(this._emitter)}get phases(){return this._phases}set phases(t){this._phases=t}get dedupe(){return this._emitter.dedupe}set dedupe(t){this._emitter.dedupe=t}get getId(){return this._emitter.getId}set getId(t){this._emitter.getId=t}tick(...t){this._assertEmptyQueue(),this._fillQueue(),this._processQueue(...t)}on(t,e,i){return this._emitter.on(t,e,i)}once(t,e,i){return this._emitter.once(t,e,i)}off(t,e){return this._emitter.off(t,e)}count(t){return this._emitter.listenerCount(t)}_assertEmptyQueue(){if(this._queue.length)throw Error("Ticker: Can't tick before the previous tick has finished!")}_fillQueue(){let t=this._queue,e=this._phases,i=this._getListeners,n=0,s=e.length,r;for(;n<s;n++)(r=i(e[n]))&&t.push(r);return t}_processQueue(...t){let e=this._queue,i=e.length;if(!i)return;let n=0,s=0,r,a;for(;n<i;n++)for(r=e[n],s=0,a=r.length;s<a;s++)r[s](...t);e.length=0}},h=class extends l{constructor(t={}){let{paused:e=!1,onDemand:i=!1,requestFrame:n=function(t=60){if("function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame)return t=>{let e=requestAnimationFrame(t);return()=>cancelAnimationFrame(e)};{let e=1e3/t,i=typeof performance>"u"?()=>Date.now():()=>performance.now();return t=>{let n=setTimeout(()=>t(i()),e);return()=>clearTimeout(n)}}}(),...s}=t;super(s),this._paused=e,this._onDemand=i,this._requestFrame=n,this._cancelFrame=null,this._empty=!0,e||i||this._request()}get phases(){return this._phases}set phases(t){this._phases=t,t.length?(this._empty=!1,this._request()):this._empty=!0}get paused(){return this._paused}set paused(t){this._paused=t,t?this._cancel():this._request()}get onDemand(){return this._onDemand}set onDemand(t){this._onDemand=t,t||this._request()}get requestFrame(){return this._requestFrame}set requestFrame(t){this._requestFrame!==t&&(this._requestFrame=t,this._cancelFrame&&(this._cancel(),this._request()))}tick(...t){if(this._assertEmptyQueue(),this._cancelFrame=null,this._onDemand||this._request(),!this._empty){if(!this._fillQueue().length){this._empty=!0;return}this._onDemand&&this._request(),this._processQueue(...t)}}on(t,e,i){let n=super.on(t,e,i);return this._empty=!1,this._request(),n}once(t,e,i){let n=super.once(t,e,i);return this._empty=!1,this._request(),n}_request(){this._paused||this._cancelFrame||(this._cancelFrame=this._requestFrame(this.tick))}_cancel(){this._cancelFrame&&(this._cancelFrame(),this._cancelFrame=null)}};const c={preRead:Symbol(),preWrite:Symbol(),read:Symbol(),write:Symbol()};let d=new h({phases:[c.preRead,c.preWrite,c.read,c.write]});function u(t,e){if("pointerId"in t)return t.pointerId===e?t:null;if("changedTouches"in t){let i=0;for(;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t}const p="undefined"!=typeof window&&void 0!==window.document,m=(()=>{let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t})(),f=p&&"ontouchstart"in window,g=p&&!!window.PointerEvent;function _(t={}){let{capture:e=!0,passive:i=!0}=t;return m?{capture:e,passive:i}:{capture:e}}function v(t){return"auto"===t||void 0===t?g?"pointer":f?"touch":"mouse":t}p&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&navigator.userAgent.indexOf("FxiOS");const y={pointer:{start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},touch:{start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},mouse:{start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"}};class x{constructor(t,e={}){let{listenerOptions:i={},sourceEvents:n="auto",startPredicate:s=t=>!("button"in t)||!(t.button>0)}=e;this.element=t,this.drag=null,this.isDestroyed=!1,this._areWindowListenersBound=!1,this._startPredicate=s,this._listenerOptions=_(i),this._sourceEvents=v(n),this._emitter=new a,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),t.addEventListener(y[this._sourceEvents].start,this._onStart,this._listenerOptions)}_getTrackedPointerEventData(t){return this.drag?u(t,this.drag.pointerId):null}_onStart(e){if(this.isDestroyed||this.drag||!this._startPredicate(e))return;let i="pointerId"in e?e.pointerId:"changedTouches"in e?e.changedTouches[0]?e.changedTouches[0].identifier:null:-1;if(null===i)return;let n=u(e,i);if(null===n)return;let s={pointerId:i,pointerType:"pointerType"in e?e.pointerType:"touches"in e?"touch":"mouse",x:n.clientX,y:n.clientY};this.drag=s;let r={...s,type:t.start,srcEvent:e,target:n.target};this._emitter.emit(r.type,r),this.drag&&this._bindWindowListeners()}_onMove(e){if(!this.drag)return;let i=this._getTrackedPointerEventData(e);if(!i)return;this.drag.x=i.clientX,this.drag.y=i.clientY;let n={type:t.move,srcEvent:e,target:i.target,...this.drag};this._emitter.emit(n.type,n)}_onCancel(e){if(!this.drag)return;let i=this._getTrackedPointerEventData(e);if(!i)return;this.drag.x=i.clientX,this.drag.y=i.clientY;let n={type:t.cancel,srcEvent:e,target:i.target,...this.drag};this._emitter.emit(n.type,n),this._resetDrag()}_onEnd(e){if(!this.drag)return;let i=this._getTrackedPointerEventData(e);if(!i)return;this.drag.x=i.clientX,this.drag.y=i.clientY;let n={type:t.end,srcEvent:e,target:i.target,...this.drag};this._emitter.emit(n.type,n),this._resetDrag()}_bindWindowListeners(){if(this._areWindowListenersBound)return;let{move:t,end:e,cancel:i}=y[this._sourceEvents];window.addEventListener(t,this._onMove,this._listenerOptions),window.addEventListener(e,this._onEnd,this._listenerOptions),i&&window.addEventListener(i,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!0}_unbindWindowListeners(){if(this._areWindowListenersBound){let{move:t,end:e,cancel:i}=y[this._sourceEvents];window.removeEventListener(t,this._onMove,this._listenerOptions),window.removeEventListener(e,this._onEnd,this._listenerOptions),i&&window.removeEventListener(i,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!1}}_resetDrag(){this.drag=null,this._unbindWindowListeners()}cancel(){if(!this.drag)return;let e={type:t.cancel,srcEvent:null,target:null,...this.drag};this._emitter.emit(e.type,e),this._resetDrag()}updateSettings(t){if(this.isDestroyed)return;let{listenerOptions:e,sourceEvents:i,startPredicate:n}=t,s=v(i),r=_(e);n&&this._startPredicate!==n&&(this._startPredicate=n),(e&&(this._listenerOptions.capture!==r.capture||this._listenerOptions.passive===r.passive)||i&&this._sourceEvents!==s)&&(this.element.removeEventListener(y[this._sourceEvents].start,this._onStart,this._listenerOptions),this._unbindWindowListeners(),this.cancel(),i&&(this._sourceEvents=s),e&&r&&(this._listenerOptions=r),this.element.addEventListener(y[this._sourceEvents].start,this._onStart,this._listenerOptions))}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(t.destroy,{type:t.destroy}),this._emitter.off(),this.element.removeEventListener(y[this._sourceEvents].start,this._onStart,this._listenerOptions))}}const w=(t,e)=>{if(e.element&&("Enter"===t.key||" "===t.key)&&document.activeElement===e.element){let{x:t,y:i}=e.element.getBoundingClientRect();return{x:t,y:i}}return null},E=(t,e)=>{if(!e.drag)return null;switch(t.key){case"ArrowLeft":return{x:e.drag.x-e.moveDistance.x,y:e.drag.y};case"ArrowRight":return{x:e.drag.x+e.moveDistance.x,y:e.drag.y};case"ArrowUp":return{x:e.drag.x,y:e.drag.y-e.moveDistance.y};case"ArrowDown":return{x:e.drag.x,y:e.drag.y+e.moveDistance.y};default:return null}},D=(t,e)=>{if(e.drag&&"Escape"===t.key){let{x:t,y:i}=e.drag;return{x:t,y:i}}return null},b=(t,e)=>{if(e.drag&&("Enter"===t.key||" "===t.key)){let{x:t,y:i}=e.drag;return{x:t,y:i}}return null};class C{constructor(){this.cache=new Map,this.validation=new Map,this.cache=new Map,this.validation=new Map}set(t,e){this.cache.set(t,e),this.validation.set(t,void 0)}get(t){return this.cache.get(t)}has(t){return this.cache.has(t)}delete(t){this.cache.delete(t),this.validation.delete(t)}isValid(t){return this.validation.has(t)}invalidate(t){void 0===t?this.validation.clear():this.validation.delete(t)}clear(){this.cache.clear(),this.validation.clear()}}class S{constructor(t,e){this.sensor=t,this.isEnded=!1,this.event=e,this.prevEvent=e,this.startEvent=e,this.endEvent=null,this.items=[],this.measureElements=new Map,this.matrixCache=new C,this.clientOffsetCache=new C}}const P=new WeakMap;function M(t,e){if(e)return window.getComputedStyle(t,e);let i=P.get(t)?.deref();return i||(i=window.getComputedStyle(t,null),P.set(t,new WeakRef(i))),i}const O=!!("undefined"!=typeof window&&void 0!==window.document&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")),I={content:"content",padding:"padding",scrollbar:"scrollbar",border:"border",margin:"margin"},q={[I.content]:!1,[I.padding]:!1,[I.scrollbar]:!0,[I.border]:!0,[I.margin]:!0},T=new Set(["auto","scroll"]),k=(()=>{try{return window.navigator.userAgentData.brands.some(({brand:t})=>"Chromium"===t)}catch(t){return!1}})();function L(t){switch(M(t).display){case"none":return null;case"inline":case"contents":return!1;default:return!0}}function R(t){let e=M(t);if(!O){let{filter:t}=e;if(t&&"none"!==t)return!0;let{backdropFilter:i}=e;if(i&&"none"!==i)return!0;let{willChange:n}=e;if(n&&(n.indexOf("filter")>-1||n.indexOf("backdrop-filter")>-1))return!0}let i=L(t);if(!i)return i;let{transform:n}=e;if(n&&"none"!==n)return!0;let{perspective:s}=e;if(s&&"none"!==s)return!0;let{contentVisibility:r}=e;if(r&&"auto"===r)return!0;let{contain:a}=e;if(a&&("strict"===a||"content"===a||a.indexOf("paint")>-1||a.indexOf("layout")>-1))return!0;let{willChange:o}=e;return!(!o||!(o.indexOf("transform")>-1||o.indexOf("perspective")>-1||o.indexOf("contain")>-1))||!!(O&&o&&o.indexOf("filter")>-1)}function A(t){return t instanceof HTMLHtmlElement}function F(t,e={}){if(A(t))return t.ownerDocument.defaultView;let i=e.position||M(t).position,{skipDisplayNone:n,container:s}=e;switch(i){case"static":case"relative":case"sticky":case"-webkit-sticky":{let e=s||t.parentElement;for(;e;){let t=L(e);if(t)return e;if(null===t&&!n)return null;e=e.parentElement}return t.ownerDocument.documentElement}case"absolute":case"fixed":{let e="fixed"===i,a=s||t.parentElement;for(;a;){var r;let t=e?R(a):"static"!==M(r=a).position||R(r);if(!0===t)return a;if(null===t&&!n)return null;a=a.parentElement}return t.ownerDocument.defaultView}default:return null}}function W(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))}function V(t){return t instanceof Window}function Y(t){return t instanceof Document}const X=new Map;let N=null,z=null,B=null;function H(t,e,i){if(i<=0)return 0;if(k){let i=M(t,"::-webkit-scrollbar"),n="x"===e?i.height:i.width,s=parseFloat(n);if(!Number.isNaN(s)&&!Number.isInteger(s))return function(t,e){let i=t.split("."),n=X.get(i[1]);return void 0===n&&(N||(N=document.createElement("style")),N.innerHTML=`
      #mezr-scrollbar-test::-webkit-scrollbar {
        width: ${t} !important;
      }
    `,z&&B||(z=document.createElement("div"),B=document.createElement("div"),z.appendChild(B),z.id="mezr-scrollbar-test",z.style.cssText="\n        all: unset !important;\n        position: fixed !important;\n        top: -200px !important;\n        left: 0px !important;\n        width: 100px !important;\n        height: 100px !important;\n        overflow: scroll !important;\n        pointer-events: none !important;\n        visibility: hidden !important;\n      ",B.style.cssText="\n        all: unset !important;\n        position: absolute !important;\n        inset: 0 !important;\n      "),document.body.appendChild(N),document.body.appendChild(z),n=z.getBoundingClientRect().width-B.getBoundingClientRect().width-e,X.set(i[1],n),document.body.removeChild(z),document.body.removeChild(N)),e+n}(n,s)}return i}function $(t,e=I.border){return V(t)?function(t,e=!1){if(e)return t.innerWidth;let{innerWidth:i,document:n}=t,{documentElement:s}=n,{clientWidth:r}=s;return i-H(s,"y",i-r)}(t,q[e]):Y(t)?function({documentElement:t}){return Math.max(t.scrollWidth,t.clientWidth,t.getBoundingClientRect().width)}(t):function(t,e=I.border){let{width:i}=t.getBoundingClientRect();if(e===I.border)return i;let n=M(t);return e===I.margin?i+=Math.max(0,parseFloat(n.marginLeft)||0)+Math.max(0,parseFloat(n.marginRight)||0):(i-=parseFloat(n.borderLeftWidth)||0,i-=parseFloat(n.borderRightWidth)||0,e===I.scrollbar||(!A(t)&&T.has(n.overflowY)&&(i-=H(t,"y",Math.round(i)-t.clientWidth)),e===I.padding||(i-=parseFloat(n.paddingLeft)||0,i-=parseFloat(n.paddingRight)||0)),i)}(t,e)}function j(t,e=I.border){return V(t)?function(t,e=!1){if(e)return t.innerHeight;let{innerHeight:i,document:n}=t,{documentElement:s}=n,{clientHeight:r}=s;return i-H(s,"x",i-r)}(t,q[e]):Y(t)?function({documentElement:t}){return Math.max(t.scrollHeight,t.clientHeight,t.getBoundingClientRect().height)}(t):function(t,e=I.border){let{height:i}=t.getBoundingClientRect();if(e===I.border)return i;let n=M(t);return e===I.margin?i+=Math.max(0,parseFloat(n.marginTop)||0)+Math.max(0,parseFloat(n.marginBottom)||0):(i-=parseFloat(n.borderTopWidth)||0,i-=parseFloat(n.borderBottomWidth)||0,e===I.scrollbar||(!A(t)&&T.has(n.overflowX)&&(i-=H(t,"x",Math.round(i)-t.clientHeight)),e===I.padding||(i-=parseFloat(n.paddingTop)||0,i-=parseFloat(n.paddingBottom)||0)),i)}(t,e)}function Q(t){return t?.constructor===Object}function K(t,e=I.border){let i={left:0,top:0};if(Y(t))return i;if(V(t))return i.left+=t.scrollX||0,i.top+=t.scrollY||0,i;let n=t.ownerDocument.defaultView;n&&(i.left+=n.scrollX||0,i.top+=n.scrollY||0);let s=t.getBoundingClientRect();if(i.left+=s.left,i.top+=s.top,e===I.border)return i;let r=M(t);return e===I.margin?(i.left-=Math.max(0,parseFloat(r.marginLeft)||0),i.top-=Math.max(0,parseFloat(r.marginTop)||0)):(i.left+=parseFloat(r.borderLeftWidth)||0,i.top+=parseFloat(r.borderTopWidth)||0,e===I.scrollbar||e===I.padding||(i.left+=parseFloat(r.paddingLeft)||0,i.top+=parseFloat(r.paddingTop)||0)),i}function G(t,e){let i=0,n=0;Q(t)?(i=t.width,n=t.height):Array.isArray(t)?(i=$(...t),n=j(...t)):(i=$(t),n=j(t));let s=function(t,e){let i=Q(t)?{left:t.left,top:t.top}:Array.isArray(t)?K(...t):K(t);if(e&&!Y(e)){let t=Q(e)?e:Array.isArray(e)?K(e[0],e[1]):K(e);i.left-=t.left,i.top-=t.top}return i}(t,e);return{width:i,height:n,...s,right:s.left+i,bottom:s.top+n}}function U(t,e={}){let{display:i}=M(t);if("none"===i||"contents"===i)return null;let n=e.position||M(t).position,{skipDisplayNone:s,container:r}=e;switch(n){case"relative":return t;case"fixed":return F(t,{container:r,position:n,skipDisplayNone:s});case"absolute":{let e=F(t,{container:r,position:n,skipDisplayNone:s});return V(e)?t.ownerDocument:e}default:return null}}const J=new WeakMap;function Z(t){let e=J.get(t)?.deref();return e||(e=window.getComputedStyle(t,null),J.set(t,new WeakRef(e))),e}function tt(t,e={x:0,y:0}){if(e.x=0,e.y=0,t instanceof Window)return e;if(t instanceof Document)return e.x=-1*window.scrollX,e.y=-1*window.scrollY,e;let{x:i,y:n}=t.getBoundingClientRect(),s=Z(t);return e.x=i+(parseFloat(s.borderLeftWidth)||0),e.y=n+(parseFloat(s.borderTopWidth)||0),e}function te(t){return"object"==typeof t&&null!==t&&"x"in t&&"y"in t}const ti={x:0,y:0},tn={x:0,y:0},ts=new DOMMatrix,tr=new DOMMatrix;function ta(t=!1){let e=document.createElement("div");return!function(t,e,i=!1){let{style:n}=t;for(let t in e)n.setProperty(t,e[t],i?"important":"")}(e,Object.assign({display:"block",position:"absolute",padding:"0px",margin:"0px",border:"none",transform:"none","transform-origin":"0 0",transition:"none",animation:"none"},t?{inset:"0px",opacity:"0","pointer-events":"none"}:{width:"0px",height:"0px",left:"0px",top:"0px"}),!0),t?e.classList.add("dragdoll-measure"):e.classList.add("dragdoll-container"),e}class to{constructor(t,e){if(!t.isConnected)throw Error("Element is not connected");let{drag:i}=e;if(!i)throw Error("Drag is not defined");let n=Z(t),s=t.getBoundingClientRect(),{sensor:r,matrixCache:a,measureElements:o,clientOffsetCache:l}=i;this.data={},this.element=t,this.dragInnerContainer=null,this.elementMatrix=new DOMMatrix,this.frozenProps=null,this.unfrozenProps=null,this.position={x:0,y:0},this.containerOffset={x:0,y:0},this.moveDiff={x:0,y:0},this.alignDiff={x:0,y:0},this._measureElements=o,this._matrixCache=a,this._clientOffsetCache=l;let h=t.parentElement;if(!h)throw Error("Dragged element does not have a parent element.");this.elementContainer=h;let c=e.settings.container||h;if(this.dragContainer=c,h!==c){let{position:t}=n;if("fixed"!==t&&"absolute"!==t)throw Error(`Dragged element has "${t}" position, but only "fixed" or "absolute" are allowed when using a custom drag container.`)}let d=U(t)||t;this.elementOffsetContainer=d;let u=c===h?d:U(t,{container:c});this.dragOffsetContainer=u;{let{width:t,height:e,x:i,y:n}=s;this.clientRect={width:t,height:e,x:i,y:n}}this.elementMatrix.setMatrixValue(n.transform),this.updateContainerMatrices(),this.updateContainerOffset();let{x:p,y:m}=e.settings.getStartPosition({draggable:e,sensor:r,item:this,style:n});this.position.x=p,this.position.y=m;let f=e.settings.getFrozenProps({draggable:e,sensor:r,item:this,style:n});if(Array.isArray(f)){if(f.length){let t={};for(let e of f)t[e]=n[e];this.frozenProps=t}else this.frozenProps=null}else this.frozenProps=f;if(this.frozenProps){let e={};for(let i in this.frozenProps)this.frozenProps.hasOwnProperty(i)&&(e[i]=t.style[i]);this.unfrozenProps=e}}getContainerMatrix(){return this._matrixCache.get(this.elementContainer)}getDragContainerMatrix(){return this._matrixCache.get(this.dragContainer)}updateContainerMatrices(t=!1){t&&(this._matrixCache.invalidate(this.elementContainer),this._matrixCache.invalidate(this.dragContainer)),[this.elementContainer,this.dragContainer].forEach(t=>{if(!this._matrixCache.isValid(t)){let e=this._matrixCache.get(t)||[new DOMMatrix,new DOMMatrix],[i,n]=e;(function(t,e=new DOMMatrix){let i=t;for(e.setMatrixValue("");i;){let{transform:t,transformOrigin:n}=Z(i);if(t&&"none"!==t&&(ts.setMatrixValue(t),!ts.isIdentity)){e.preMultiplySelf(ts);let{x:t,y:i,z:s}=function(t){let e=t.split(" "),i="",n="",s="";return 1===e.length?i=n=e[0]:2===e.length?[i,n]=e:[i,n,s]=e,{x:parseFloat(i)||0,y:parseFloat(n)||0,z:parseFloat(s)||0}}(n);tr.setMatrixValue("").translateSelf(t,i,s),tr.isIdentity||e.preMultiplySelf(tr)}i=i.parentElement}})(t,i),n.setMatrixValue(i.toString()).invertSelf(),this._matrixCache.set(t,e)}})}updateContainerOffset(t=!1){let{elementOffsetContainer:e,elementContainer:i,dragOffsetContainer:n,dragContainer:s,containerOffset:r,_clientOffsetCache:a,_matrixCache:o}=this;if(t&&(a.invalidate(n),a.invalidate(e)),e!==n){let[t,l]=[[s,n],[i,e]].map(([t,e])=>{let i=a.get(e)||{x:0,y:0};if(!a.isValid(e)){let s=o.get(t);if(e instanceof HTMLElement&&s&&!s[0].isIdentity){var n;if(1!==(n=s[0]).m11||0!==n.m12||0!==n.m13||0!==n.m14||0!==n.m21||1!==n.m22||0!==n.m23||0!==n.m24||0!==n.m31||0!==n.m32||1!==n.m33||0!==n.m34||0!==n.m43||1!==n.m44){let t=this._measureElements.get(e)||ta(!0);t.style.setProperty("transform",s[1].toString(),"important"),t.isConnected||(this._measureElements.set(e,t),e.append(t)),tt(t,i)}else tt(e,i),i.x-=s[0].m41,i.y-=s[0].m42}else tt(e,i)}return a.set(e,i),i});!function(t,e,i={x:0,y:0}){let n=te(t)?t:tt(t,ti),s=te(e)?e:tt(e,tn);i.x=s.x-n.x,i.y=s.y-n.y}(t,l,r)}else r.x=0,r.y=0}applyContainerOffset(){if(this.dragInnerContainer){let{x:t,y:e}=this.containerOffset,i=this.getContainerMatrix()[0],n=this.getDragContainerMatrix()[1];this.dragInnerContainer.style.setProperty("transform",`${n} translate(${t}px, ${e}px) ${i}`,"important")}}updateSize(t){if(t)this.clientRect.width=t.width,this.clientRect.height=t.height;else{let{width:t,height:e}=this.element.getBoundingClientRect();this.clientRect.width=t,this.clientRect.height=e}}}function tl(t,e,i){let n=document.activeElement,s=t.contains(n);i&&i.append(t),e.append(i||t),s&&document.activeElement!==n&&n.focus({preventScroll:!0})}const th=!m||{capture:!0,passive:!0},tc={x:0,y:0},td=new DOMMatrix;function tu(){return{container:null,startPredicate:()=>!0,getElements:()=>null,releaseElements:()=>null,getFrozenProps:()=>null,getStartPosition:()=>({x:0,y:0}),setPosition:({item:t,x:e,y:i})=>{let[n,s]=t.getContainerMatrix();td.setMatrixValue(`${s} translate(${e}px, ${i}px) ${n} ${t.elementMatrix}`),t.element.style.transform=`${td}`},getPositionChange:({event:t,prevEvent:e})=>(tc.x=t.x-e.x,tc.y=t.y-e.y,tc)}}(e=n||(n={}))[e.NONE=0]="NONE",e[e.INIT=1]="INIT",e[e.START_PREPARE=2]="START_PREPARE",e[e.FINISH_APPLY=3]="FINISH_APPLY",(i=s||(s={}))[i.PENDING=0]="PENDING",i[i.RESOLVED=1]="RESOLVED",i[i.REJECTED=2]="REJECTED";class tp{constructor(t,e){this._data=[],this._createObject=t,this._onPut=e}pick(){return this._data.length?this._data.pop():this._createObject()}put(t){-1===this._data.indexOf(t)&&(this._onPut&&this._onPut(t),this._data.push(t))}reset(){this._data.length=0}}function tm(t,e={width:0,height:0,x:0,y:0,left:0,top:0,right:0,bottom:0}){return t&&(e.width=t.width,e.height=t.height,e.x=t.x,e.y=t.y,e.left=t.x,e.top=t.y,e.right=t.x+t.width,e.bottom=t.y+t.height),e}const tf=tm(),tg=tm();function t_(t,e){let i=function(t,e){let i=function(t,e,i={width:0,height:0,x:0,y:0}){let n=Math.max(t.x,e.x),s=Math.min(t.x+t.width,e.x+e.width);if(s<=n)return null;let r=Math.max(t.y,e.y),a=Math.min(t.y+t.height,e.y+e.height);return a<=r?null:(i.x=n,i.y=r,i.width=s-n,i.height=a-r,i)}(t,e);return i?i.width*i.height:0}(t,e);return i?i/(Math.min(t.width,e.width)*Math.min(t.height,e.height))*100:0}function tv(...t){let{width:e,height:i,left:n,top:s}=G(...t);return{width:e,height:i,x:n,y:s}}function ty(t){return t instanceof Window}function tx(t){return ty(t)||t===document.documentElement||t===document.body?window:t}function tw(t){return ty(t)?t.scrollX:t.scrollLeft}function tE(t){return ty(t)&&(t=document.documentElement),t.scrollWidth-t.clientWidth}function tD(t){return ty(t)?t.scrollY:t.scrollTop}function tb(t){return ty(t)&&(t=document.documentElement),t.scrollHeight-t.clientHeight}function tC(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)}const tS={width:0,height:0,x:0,y:0},tP={direction:"none",threshold:0,distance:0,value:0,maxValue:0,duration:0,speed:0,deltaTime:0,isEnding:!1},tM={x:1,y:2},tO={forward:4,reverse:8},tI={none:0,left:tM.x|tO.reverse,right:tM.x|tO.forward},tq={none:0,up:tM.y|tO.reverse,down:tM.y|tO.forward},tT={...tI,...tq};function tk(t){switch(t){case tI.none:case tq.none:return"none";case tI.left:return"left";case tI.right:return"right";case tq.up:return"up";case tq.down:return"down";default:throw Error(`Unknown direction value: ${t}`)}}function tL(t,e,i){let{left:n=0,right:s=0,top:r=0,bottom:a=0}=e;return n=Math.max(0,n),s=Math.max(0,s),r=Math.max(0,r),a=Math.max(0,a),i.width=t.width+n+s,i.height=t.height+r+a,i.x=t.x-n,i.y=t.y-r,i}function tR(t,e){return Math.ceil(t)>=Math.floor(e)}function tA(t,e){return Math.min(e/2,t)}function tF(t,e,i,n){return Math.max(0,i+2*t+n*e-n)/2}class tW{constructor(){this.positionX=0,this.positionY=0,this.directionX=tT.none,this.directionY=tT.none,this.overlapCheckRequestTime=0}}class tV{constructor(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}reset(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}addRequest(t){tM.x&t.direction?(this.requestX&&this.removeRequest(this.requestX),this.requestX=t):(this.requestY&&this.removeRequest(this.requestY),this.requestY=t),t.action=this}removeRequest(t){this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null)}computeScrollValues(){this.element&&(this.scrollLeft=this.requestX?this.requestX.value:tw(this.element),this.scrollTop=this.requestY?this.requestY.value:tD(this.element))}scroll(){this.element&&(this.element.scrollTo?this.element.scrollTo(this.scrollLeft,this.scrollTop):(this.element.scrollLeft=this.scrollLeft,this.element.scrollTop=this.scrollTop))}}class tY{constructor(){this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}reset(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}hasReachedEnd(){return tO.forward&this.direction?tR(this.value,this.maxValue):this.value<=0}computeCurrentScrollValue(){return this.element?this.value!=this.value?tM.x&this.direction?tw(this.element):tD(this.element):Math.max(0,Math.min(this.value,this.maxValue)):0}computeNextScrollValue(){let t=this.speed*(this.deltaTime/1e3);return Math.max(0,Math.min(tO.forward&this.direction?this.value+t:this.value-t,this.maxValue))}computeSpeed(){if(!this.item||!this.element)return 0;let{speed:t}=this.item;return"function"==typeof t?(tP.direction=tk(this.direction),tP.threshold=this.threshold,tP.distance=this.distance,tP.value=this.value,tP.maxValue=this.maxValue,tP.duration=this.duration,tP.speed=this.speed,tP.deltaTime=this.deltaTime,tP.isEnding=this.isEnding,t(this.element,tP)):t}tick(t){return this.isActive||(this.isActive=!0,this.onStart()),this.deltaTime=t,this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(),this.value=this.computeNextScrollValue(),this.duration+=t,this.value}onStart(){if(!this.item||!this.element)return;let{onStart:t}=this.item;"function"==typeof t&&t(this.element,tk(this.direction))}onStop(){if(!this.item||!this.element)return;let{onStop:t}=this.item;"function"==typeof t&&t(this.element,tk(this.direction))}}new class{constructor(t={}){let{overlapCheckInterval:e=150}=t;this.items=[],this.settings={overlapCheckInterval:e},this._actions=[],this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._requests={[tM.x]:new Map,[tM.y]:new Map},this._itemData=new Map,this._requestPool=new tp(()=>new tY,t=>t.reset()),this._actionPool=new tp(()=>new tV,t=>t.reset()),this._frameRead=this._frameRead.bind(this),this._frameWrite=this._frameWrite.bind(this)}_frameRead(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateItems(),this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))}_frameWrite(){this._isDestroyed||this._applyActions()}_startTicking(){this._isTicking||(this._isTicking=!0,d.on(c.read,this._frameRead,this._frameRead),d.on(c.write,this._frameWrite,this._frameWrite))}_stopTicking(){this._isTicking&&(this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,d.off(c.read,this._frameRead),d.off(c.write,this._frameWrite))}_requestItemScroll(t,e,i,n,s,r,a){let o=this._requests[e],l=o.get(t);l?(l.element!==i||l.direction!==n)&&l.reset():(l=this._requestPool.pick(),o.set(t,l)),l.item=t,l.element=i,l.direction=n,l.threshold=s,l.distance=r,l.maxValue=a}_cancelItemScroll(t,e){let i=this._requests[e],n=i.get(t);n&&(n.action&&n.action.removeRequest(n),this._requestPool.put(n),i.delete(t))}_checkItemOverlap(t,e,i){let{inertAreaSize:n,targets:s,clientRect:r}=t;if(!s.length){e&&this._cancelItemScroll(t,tM.x),i&&this._cancelItemScroll(t,tM.y);return}let a=this._itemData.get(t),o=a?.directionX,l=a?.directionY;if(!o&&!l){e&&this._cancelItemScroll(t,tM.x),i&&this._cancelItemScroll(t,tM.y);return}let h=null,c=-1/0,d=0,u=-1/0,p=tT.none,m=0,f=0,g=null,_=-1/0,v=0,y=-1/0,x=tT.none,w=0,E=0,D=0;for(;D<s.length;D++){let t=s[D],a="number"==typeof t.threshold?t.threshold:50,S=!!(e&&o&&"y"!==t.axis),P=!!(i&&l&&"x"!==t.axis),M=t.priority||0;if((!S||M<c)&&(!P||M<_))continue;let O=tx(t.element||t),I=S?tE(O):-1,q=P?tb(O):-1;if(I<=0&&q<=0)continue;let T=tv([O,"padding"],window),k=t_(r,T)||-1/0;if(k===-1/0){var b,C;if(!(t.padding&&tC(r,tL(T,t.padding,tS))))continue;k=-(b=tm(r,tf),C=tm(T,tg),function(t,e){if(!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top))return null;let i=t.left+t.width,n=t.top+t.height,s=e.left+e.width,r=e.top+e.height;return i<=e.left?n<=e.top?W(i,n,e.left,e.top):t.top>=r?W(i,t.top,e.left,r):e.left-i:t.left>=s?n<=e.top?W(t.left,n,s,e.top):t.top>=r?W(t.left,t.top,s,r):t.left-s:n<=e.top?e.top-n:t.top-r}(Q(b)?b:G(b),Q(C)?C:G(C))||0)}if(S&&M>=c&&I>0&&(M>c||k>u)){let t=0,e=tT.none,i=tA(a,T.width),s=tF(i,n,r.width,T.width);o===tT.right?(t=T.x+T.width+s-(r.x+r.width))<=i&&!tR(tw(O),I)&&(e=tT.right):o===tT.left&&(t=r.x-(T.x-s))<=i&&tw(O)>0&&(e=tT.left),e&&(h=O,c=M,d=i,u=k,p=e,m=t,f=I)}if(P&&M>=_&&q>0&&(M>_||k>y)){let t=0,e=tq.none,i=tA(a,T.height),s=tF(i,n,r.height,T.height);l===tT.down?(t=T.y+T.height+s-(r.y+r.height))<=i&&!tR(tD(O),q)&&(e=tT.down):l===tT.up&&(t=r.y-(T.y-s))<=i&&tD(O)>0&&(e=tT.up),e&&(g=O,_=M,v=i,y=k,x=e,w=t,E=q)}}e&&(h&&p?this._requestItemScroll(t,tM.x,h,p,d,m,f):this._cancelItemScroll(t,tM.x)),i&&(g&&x?this._requestItemScroll(t,tM.y,g,x,v,w,E):this._cancelItemScroll(t,tM.y))}_updateScrollRequest(t){let{inertAreaSize:e,smoothStop:i,targets:n,clientRect:s}=t.item,r=null,a=0;for(;a<n.length;a++){let i=n[a],o=tx(i.element||i);if(o!==t.element)continue;let l=!!(tM.x&t.direction);if(l){if("y"===i.axis)continue}else if("x"===i.axis)continue;let h=l?tE(o):tb(o);if(h<=0)break;let c=tv([o,"padding"],window);if((t_(s,c)||-1/0)===-1/0){let t=i.scrollPadding||i.padding;if(!(t&&tC(s,tL(c,t,tS))))break}let d=tA("number"==typeof i.threshold?i.threshold:50,l?c.width:c.height),u=tF(d,e,l?s.width:s.height,l?c.width:c.height),p=0;if((p=t.direction===tT.left?s.x-(c.x-u):t.direction===tT.right?c.x+c.width+u-(s.x+s.width):t.direction===tT.up?s.y-(c.y-u):c.y+c.height+u-(s.y+s.height))>d)break;let m=l?tw(o):tD(o);if(r=tO.forward&t.direction?tR(m,h):m<=0)break;return t.maxValue=h,t.threshold=d,t.distance=p,t.isEnding=!1,!0}return!0===i&&t.speed>0?(null===r&&(r=t.hasReachedEnd()),t.isEnding=!r):t.isEnding=!1,t.isEnding}_updateItems(){for(let t=0;t<this.items.length;t++){let e=this.items[t],i=this._itemData.get(e),{x:n,y:s}=e.position,r=i.positionX,a=i.positionY;(n!==r||s!==a)&&(i.directionX=n>r?tT.right:n<r?tT.left:i.directionX,i.directionY=s>a?tT.down:s<a?tT.up:i.directionY,i.positionX=n,i.positionY=s,0===i.overlapCheckRequestTime&&(i.overlapCheckRequestTime=this._tickTime))}}_updateRequests(){let t=this.items,e=this._requests[tM.x],i=this._requests[tM.y],n=0;for(;n<t.length;n++){let s=t[n],r=this._itemData.get(s),a=r.overlapCheckRequestTime,o=a>0&&this._tickTime-a>this.settings.overlapCheckInterval,l=!0,h=e.get(s);h&&h.isActive&&(l=!this._updateScrollRequest(h))&&(o=!0,this._cancelItemScroll(s,tM.x));let c=!0,d=i.get(s);d&&d.isActive&&(c=!this._updateScrollRequest(d))&&(o=!0,this._cancelItemScroll(s,tM.y)),o&&(r.overlapCheckRequestTime=0,this._checkItemOverlap(s,l,c))}}_requestAction(t,e){let i=e===tM.x,n=null,s=0;for(;s<this._actions.length;s++){if(n=this._actions[s],t.element!==n.element){n=null;continue}if(i?n.requestX:n.requestY){this._cancelItemScroll(t.item,e);return}break}n||(n=this._actionPool.pick()),n.element=t.element,n.addRequest(t),t.tick(this._tickDeltaTime),this._actions.push(n)}_updateActions(){let t=0;for(t=0;t<this.items.length;t++){let e=this.items[t],i=this._requests[tM.x].get(e),n=this._requests[tM.y].get(e);i&&this._requestAction(i,tM.x),n&&this._requestAction(n,tM.y)}for(t=0;t<this._actions.length;t++)this._actions[t].computeScrollValues()}_applyActions(){if(!this._actions.length)return;let t=0;for(t=0;t<this._actions.length;t++)this._actions[t].scroll(),this._actionPool.put(this._actions[t]);this._actions.length=0}addItem(t){if(this._isDestroyed||this._itemData.has(t))return;let{x:e,y:i}=t.position,n=new tW;n.positionX=e,n.positionY=i,n.directionX=tT.none,n.directionY=tT.none,n.overlapCheckRequestTime=this._tickTime,this._itemData.set(t,n),this.items.push(t),this._isTicking||this._startTicking()}removeItem(t){if(this._isDestroyed)return;let e=this.items.indexOf(t);-1!==e&&(this._requests[tM.x].get(t)&&(this._cancelItemScroll(t,tM.x),this._requests[tM.x].delete(t)),this._requests[tM.y].get(t)&&(this._cancelItemScroll(t,tM.y),this._requests[tM.y].delete(t)),this._itemData.delete(t),this.items.splice(e,1),this._isTicking&&!this.items.length&&this._stopTicking())}isDestroyed(){return this._isDestroyed}isItemScrollingX(t){return!!this._requests[tM.x].get(t)?.isActive}isItemScrollingY(t){return!!this._requests[tM.y].get(t)?.isActive}isItemScrolling(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)}updateSettings(t={}){let{overlapCheckInterval:e=this.settings.overlapCheckInterval}=t;this.settings.overlapCheckInterval=e}destroy(){if(this._isDestroyed)return;let t=this.items.slice(0),e=0;for(;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};const tX=new Set(["auto","scroll","overlay"]);function tN(t){let e=Z(t);return!!(tX.has(e.overflowY)||tX.has(e.overflowX))}function tz(t,e,i){let n=i-e,s=Math.abs(n);if(s>=t){let e=s%t;return Math.round((n>0?n-e:n+e)/t)*t}return 0}const tB=document.querySelector(".draggable"),tH=new x(tB),t$=new class extends o{constructor(t,e={}){super();let{moveDistance:i=25,cancelOnBlur:n=!0,cancelOnVisibilityChange:s=!0,startPredicate:r=w,movePredicate:a=E,cancelPredicate:o=D,endPredicate:l=b}=e;this.element=t,this.moveDistance="number"==typeof i?{x:i,y:i}:{...i},this._cancelOnBlur=n,this._cancelOnVisibilityChange=s,this._startPredicate=r,this._movePredicate=a,this._cancelPredicate=o,this._endPredicate=l,this._onKeyDown=this._onKeyDown.bind(this),this._internalCancel=this._internalCancel.bind(this),this._blurCancelHandler=this._blurCancelHandler.bind(this),document.addEventListener("keydown",this._onKeyDown),n&&t?.addEventListener("blur",this._blurCancelHandler),s&&document.addEventListener("visibilitychange",this._internalCancel)}_internalCancel(){this.cancel()}_blurCancelHandler(){queueMicrotask(()=>{document.activeElement!==this.element&&this.cancel()})}_onKeyDown(t){if(!this.drag){let e=this._startPredicate(t,this);e&&(t.preventDefault(),this._start({type:"start",x:e.x,y:e.y,srcEvent:t}));return}let e=this._cancelPredicate(t,this);if(e){t.preventDefault(),this._cancel({type:"cancel",x:e.x,y:e.y,srcEvent:t});return}let i=this._endPredicate(t,this);if(i){t.preventDefault(),this._end({type:"end",x:i.x,y:i.y,srcEvent:t});return}let n=this._movePredicate(t,this);if(n){t.preventDefault(),this._move({type:"move",x:n.x,y:n.y,srcEvent:t});return}}updateSettings(t={}){let{moveDistance:e,cancelOnBlur:i,cancelOnVisibilityChange:n,startPredicate:s,movePredicate:r,cancelPredicate:a,endPredicate:o}=t;void 0!==e&&("number"==typeof e?this.moveDistance.x=this.moveDistance.y=e:(this.moveDistance.x=e.x,this.moveDistance.y=e.y)),void 0!==i&&this._cancelOnBlur!==i&&(this._cancelOnBlur=i,i?this.element?.addEventListener("blur",this._blurCancelHandler):this.element?.removeEventListener("blur",this._blurCancelHandler)),void 0!==n&&this._cancelOnVisibilityChange!==n&&(this._cancelOnVisibilityChange=n,n?document.addEventListener("visibilitychange",this._internalCancel):document.removeEventListener("visibilitychange",this._internalCancel)),s&&(this._startPredicate=s),r&&(this._movePredicate=r),a&&(this._cancelPredicate=a),o&&(this._endPredicate=o)}destroy(){!this.isDestroyed&&(super.destroy(),document.removeEventListener("keydown",this._onKeyDown),this._cancelOnBlur&&this.element?.removeEventListener("blur",this._blurCancelHandler),this._cancelOnVisibilityChange&&document.removeEventListener("visibilitychange",this._internalCancel))}}(tB,{moveDistance:{x:40,y:40}}),tj=new class{constructor(t,e={}){this.sensors=t,this.settings=this._parseSettings(e),this.plugins={},this.drag=null,this.isDestroyed=!1,this._sensorData=new Map,this._emitter=new a,this._startPhase=0,this._startId=Symbol(),this._moveId=Symbol(),this._alignId=Symbol(),this._onMove=this._onMove.bind(this),this._onScroll=this._onScroll.bind(this),this._onEnd=this._onEnd.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareAlign=this._prepareAlign.bind(this),this._applyAlign=this._applyAlign.bind(this),this._computeOffsets=this._computeOffsets.bind(this),this._applyOffsets=this._applyOffsets.bind(this),this.sensors.forEach(t=>{this._sensorData.set(t,{predicateState:0,predicateEvent:null,onMove:e=>this._onMove(e,t),onEnd:e=>this._onEnd(e,t)});let{onMove:e,onEnd:i}=this._sensorData.get(t);t.on("start",e,e),t.on("move",e,e),t.on("cancel",i,i),t.on("end",i,i),t.on("destroy",i,i)})}_parseSettings(t,e=tu()){let{container:i=e.container,startPredicate:n=e.startPredicate,getElements:s=e.getElements,releaseElements:r=e.releaseElements,getFrozenProps:a=e.getFrozenProps,getStartPosition:o=e.getStartPosition,setPosition:l=e.setPosition,getPositionChange:h=e.getPositionChange}=t||{};return{container:i,startPredicate:n,getElements:s,releaseElements:r,getFrozenProps:a,getStartPosition:o,setPosition:l,getPositionChange:h}}_emit(t,...e){this._emitter.emit(t,...e)}_onMove(t,e){let i=this._sensorData.get(e);if(i)switch(i.predicateState){case 0:{i.predicateEvent=t;let n=this.settings.startPredicate({draggable:this,sensor:e,event:t});!0===n?this.resolveStartPredicate(e):!1===n&&this.rejectStartPredicate(e);break}case 1:this.drag&&(this.drag.event=t,d.once(c.read,this._prepareMove,this._moveId),d.once(c.write,this._applyMove,this._moveId))}}_onScroll(){this.align()}_onEnd(t,e){let i=this._sensorData.get(e);i&&(this.drag?1===i.predicateState&&(this.drag.endEvent=t,this._sensorData.forEach(t=>{t.predicateState=0,t.predicateEvent=null}),this.stop()):(i.predicateState=0,i.predicateEvent=null))}_prepareStart(){let t=this.drag;if(!t)return;this._startPhase=2;let e=this.settings.getElements({draggable:this,sensor:t.sensor,startEvent:t.startEvent})||[];t.items=e.map(t=>new to(t,this)),this._emit("preparestart",t.startEvent)}_applyStart(){let t=this.drag;if(t){for(let e of t.items)e.dragContainer!==e.elementContainer&&(e.dragInnerContainer=ta(),e.applyContainerOffset(),tl(e.element,e.dragContainer,e.dragInnerContainer)),e.frozenProps&&Object.assign(e.element.style,e.frozenProps),this.settings.setPosition({phase:"start",draggable:this,sensor:t.sensor,item:e,x:e.position.x,y:e.position.y});window.addEventListener("scroll",this._onScroll,th),this._startPhase=3,this._emit("start",t.startEvent)}}_prepareMove(){let t=this.drag;if(!t)return;let{event:e,prevEvent:i,startEvent:n,sensor:s}=t;if(e!==i){for(let r of t.items){let{x:t,y:a}=this.settings.getPositionChange({draggable:this,sensor:s,item:r,event:e,prevEvent:i,startEvent:n});t&&(r.position.x+=t,r.clientRect.x+=t,r.moveDiff.x+=t),a&&(r.position.y+=a,r.clientRect.y+=a,r.moveDiff.y+=a)}t.prevEvent=e,this._emit("preparemove",e)}}_applyMove(){let t=this.drag;if(t){for(let e of t.items)e.moveDiff.x=0,e.moveDiff.y=0,this.settings.setPosition({phase:"move",draggable:this,sensor:t.sensor,item:e,x:e.position.x,y:e.position.y});t.event&&this._emit("move",t.event)}}_computeOffsets(t=!1){let{drag:e}=this;if(e)for(let i of(t&&e.matrixCache.invalidate(),e.clientOffsetCache.invalidate(),e.items))t&&i.updateContainerMatrices(),i.updateContainerOffset()}_applyOffsets(t=!1){let{drag:e}=this;if(e)for(let i of e.items)i.applyContainerOffset(),t&&this.settings.setPosition({phase:"pre-align",draggable:this,sensor:e.sensor,item:i,x:i.position.x-i.alignDiff.x-i.moveDiff.x,y:i.position.y-i.alignDiff.y-i.moveDiff.y})}_prepareAlign(){let{drag:t}=this;if(t)for(let e of t.items){let{x:t,y:i}=e.element.getBoundingClientRect(),n=e.clientRect.x-e.moveDiff.x-t;e.position.x=e.position.x-e.alignDiff.x+n,e.alignDiff.x=n;let s=e.clientRect.y-e.moveDiff.y-i;e.position.y=e.position.y-e.alignDiff.y+s,e.alignDiff.y=s}}_applyAlign(){let{drag:t}=this;if(t)for(let e of t.items)e.alignDiff.x=0,e.alignDiff.y=0,this.settings.setPosition({phase:"align",draggable:this,sensor:t.sensor,item:e,x:e.position.x,y:e.position.y})}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}resolveStartPredicate(t,e){let i=this._sensorData.get(t);if(!i)return;let n=e||i.predicateEvent;0===i.predicateState&&n&&(this._startPhase=1,i.predicateState=1,i.predicateEvent=null,this.drag=new S(t,n),this._sensorData.forEach((e,i)=>{i!==t&&(e.predicateState=2,e.predicateEvent=null)}),d.once(c.read,this._prepareStart,this._startId),d.once(c.write,this._applyStart,this._startId))}rejectStartPredicate(t){let e=this._sensorData.get(t);e?.predicateState===0&&(e.predicateState=2,e.predicateEvent=null)}stop(){let t=this.drag;if(!t||t.isEnded)return;if(2===this._startPhase){this.off("start",this._startId),this.on("start",()=>this.stop(),this._startId);return}for(let[e,i]of(this._startPhase=0,t.isEnded=!0,d.off(c.read,this._startId),d.off(c.write,this._startId),d.off(c.read,this._moveId),d.off(c.write,this._moveId),d.off(c.preRead,this._alignId),d.off(c.preWrite,this._alignId),d.off(c.read,this._alignId),d.off(c.write,this._alignId),window.removeEventListener("scroll",this._onScroll,th),t.measureElements))i.remove();let e=[];for(let i of t.items){if(e.push(i.element),i.elementContainer!==i.dragContainer&&(tl(i.element,i.elementContainer),i.dragInnerContainer&&i.dragInnerContainer.remove()),i.unfrozenProps)for(let t in i.unfrozenProps)i.element.style[t]=i.unfrozenProps[t]||"";this.settings.setPosition({phase:"end",draggable:this,sensor:t.sensor,item:i,x:i.position.x,y:i.position.y})}e.length&&this.settings.releaseElements({draggable:this,sensor:t.sensor,elements:e}),this._emit("end",t.endEvent),this.drag=null}align({instant:t=!1,updateMatrices:e=!1}={}){this.drag&&(t?(this._computeOffsets(e),this._applyOffsets(e),this._prepareAlign(),this._applyAlign()):(d.once(c.preRead,()=>this._computeOffsets(e),this._alignId),d.once(c.preWrite,()=>this._applyOffsets(e),this._alignId),d.once(c.read,this._prepareAlign,this._alignId),d.once(c.write,this._applyAlign,this._alignId)))}updateSettings(t={}){this.settings=this._parseSettings(t,this.settings)}use(t){return t(this)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.stop(),this._sensorData.forEach(({onMove:t,onEnd:e},i)=>{i.off("start",t),i.off("move",t),i.off("cancel",e),i.off("end",e),i.off("destroy",e)}),this._sensorData.clear(),this._emit("destroy"),this._emitter.off())}}([tH,t$],{getElements:()=>[tB],startPredicate:function(t={}){let e,i;let n=0,s=null,{timeout:r=250,fallback:a=()=>!0}=t,o=t=>t.preventDefault(),l=t=>{if(n){if(e){t.cancelable&&t.preventDefault();return}void 0===e&&(t.cancelable&&t.timeStamp-n>r?(e=!0,t.preventDefault()):e=!1)}};return t=>{if(!(t.sensor instanceof x))return a(t);let{draggable:h,sensor:c,event:d}=t;if("touch"===d.pointerType){if("start"===d.type&&("pointerdown"===d.srcEvent.type||"touchstart"===d.srcEvent.type)){let t=(s=d.target)?function(t){let e=[];return tN(t)&&e.push(t),!function(t,e=[]){let i=t?.parentNode;for(;i&&!(i instanceof Document);)i instanceof Element?(tN(i)&&e.push(i),i=i.parentNode):i instanceof ShadowRoot?i=i.host:i=i.parentNode;e.push(window)}(t,e),e}(s):[];t.forEach(t=>{t.addEventListener("touchmove",l,{passive:!1,capture:!0})});let a=()=>{n&&(h.off("end",a),h.sensors.forEach(t=>{t instanceof x&&t.off("end",a)}),s?.removeEventListener("contextmenu",o),t.forEach(t=>{t.removeEventListener("touchmove",l,{capture:!0})}),n=0,e=void 0,s=null,i=void window.clearTimeout(i))};e=void 0,n=d.srcEvent.timeStamp,s?.addEventListener("contextmenu",o),h.on("end",a),h.sensors.forEach(t=>{t instanceof x&&t.off("end",a)}),r>0&&(i=window.setTimeout(()=>{h.resolveStartPredicate(c),e=!0,i=void 0},r))}return e}return"start"===d.type&&!d.srcEvent.button}}(),getPositionChange:function({item:t,event:e,startEvent:i}){let{__snapX__:n=i.x,__snapY__:s=i.y}=t.data,r=tz(40,n,e.x),a=tz(40,s,e.y);return r&&(t.data.__snapX__=n+r),a&&(t.data.__snapY__=s+a),{x:r,y:a}}});tj.on("start",()=>{tB.classList.add("dragging")}),tj.on("end",()=>{tB.classList.remove("dragging")});
//# sourceMappingURL=index.6a19f05f.js.map
