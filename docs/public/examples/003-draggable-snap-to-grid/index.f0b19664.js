function t(t,i){let n=t.get(i);return n||(n=new e,t.set(i,n)),n}class e{constructor(){this.idMap=new Map,this.fnMap=new Map,this.onceList=new Set,this.emitList=null}add(t,e,i,n,s){if(!s&&this.fnMap.has(t))throw Error("Emitter: tried to add an existing event listener to an event!");if(this.idMap.has(i))switch(n){case"throw":throw Error("Emitter: tried to add an existing event listener id to an event!");case"ignore":return i;default:this.delId(i,"update"===n)}let r=this.fnMap.get(t);return r||(r=new Set,this.fnMap.set(t,r)),r.add(i),this.idMap.set(i,t),e&&this.onceList.add(i),this.emitList&&this.emitList.push(t),i}delId(t,e=!1){let i=this.idMap.get(t);if(!i)return;let n=this.fnMap.get(i);e||this.idMap.delete(t),this.onceList.delete(t),n.delete(t),n.size||this.fnMap.delete(i),this.emitList=null}delFn(t){let e=this.fnMap.get(t);e&&(e.forEach(t=>{this.onceList.delete(t),this.idMap.delete(t)}),this.fnMap.delete(t),this.emitList=null)}}class i{constructor(t={}){let{idDedupeMode:e="replace",allowDuplicateListeners:i=!0}=t;this.idDedupeMode=e,this.allowDuplicateListeners=i,this._events=new Map}_getListeners(t){let e=this._events.get(t);if(!e)return null;let{idMap:i,onceList:n}=e;if(!i.size)return null;let s=e.emitList||[...i.values()];if(n.size){if(n.size===i.size)this._events.delete(t);else for(let t of n)e.delId(t)}else e.emitList=s;return s}on(e,i,n=Symbol()){return t(this._events,e).add(i,!1,n,this.idDedupeMode,this.allowDuplicateListeners)}once(e,i,n=Symbol()){return t(this._events,e).add(i,!0,n,this.idDedupeMode,this.allowDuplicateListeners)}off(t,e){if(void 0===t)return void this._events.clear();if(void 0===e)return void this._events.delete(t);let i=this._events.get(t);i&&("function"==typeof e?i.delFn(e):i.delId(e),i.idMap.size||this._events.delete(t))}emit(t,...e){let i=this._getListeners(t);if(!i)return;let n=0,s=i.length;for(;n<s;n++)i[n](...e)}listenerCount(t){var e;if(void 0===t){let t=0;return this._events.forEach((e,i)=>{t+=this.listenerCount(i)}),t}return(null===(e=this._events.get(t))||void 0===e?void 0:e.idMap.size)||0}}(q=L||(L={}))[q.PAUSED=1]="PAUSED",q[q.ON_DEMAND=2]="ON_DEMAND",q[q.CONTINUOUS=3]="CONTINUOUS";const n=new WeakMap;function s(t,e){if(e)return window.getComputedStyle(t,e);let i=n.get(t)?.deref();return i||(i=window.getComputedStyle(t,null),n.set(t,new WeakRef(i))),i}const r=!!("undefined"!=typeof window&&void 0!==window.document&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")),o={content:"content",padding:"padding",scrollbar:"scrollbar",border:"border",margin:"margin"},a={[o.content]:!1,[o.padding]:!1,[o.scrollbar]:!0,[o.border]:!0,[o.margin]:!0},l=new Set(["auto","scroll"]),h=(()=>{try{return window.navigator.userAgentData.brands.some(({brand:t})=>"Chromium"===t)}catch(t){return!1}})();function d(t){switch(s(t).display){case"none":return null;case"inline":case"contents":return!1;default:return!0}}function c(t){let e=s(t);if(!r){let{filter:t}=e;if(t&&"none"!==t)return!0;let{backdropFilter:i}=e;if(i&&"none"!==i)return!0;let{willChange:n}=e;if(n&&(n.indexOf("filter")>-1||n.indexOf("backdrop-filter")>-1))return!0}let i=d(t);if(!i)return i;let{transform:n}=e;if(n&&"none"!==n)return!0;let{perspective:o}=e;if(o&&"none"!==o)return!0;let{contentVisibility:a}=e;if(a&&"auto"===a)return!0;let{contain:l}=e;if(l&&("strict"===l||"content"===l||l.indexOf("paint")>-1||l.indexOf("layout")>-1))return!0;let{willChange:h}=e;return!(!h||!(h.indexOf("transform")>-1||h.indexOf("perspective")>-1||h.indexOf("contain")>-1))||!!(r&&h&&h.indexOf("filter")>-1)}function u(t){return t instanceof HTMLHtmlElement}function p(t,e={}){if(u(t))return t.ownerDocument.defaultView;let i=e.position||s(t).position,{skipDisplayNone:n,container:r}=e;switch(i){case"static":case"relative":case"sticky":case"-webkit-sticky":{let e=r||t.parentElement;for(;e;){let t=d(e);if(t)return e;if(null===t&&!n)return null;e=e.parentElement}return t.ownerDocument.documentElement}case"absolute":case"fixed":{let e="fixed"===i,a=r||t.parentElement;for(;a;){var o;let t=e?c(a):"static"!==s(o=a).position||c(o);if(!0===t)return a;if(null===t&&!n)return null;a=a.parentElement}return t.ownerDocument.defaultView}default:return null}}function f(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))}function m(t){return t instanceof Window}function _(t){return t instanceof Document}const g=new Map;let v=null,y=null,w=null;function D(t,e,i){if(i<=0)return 0;if(h){let i=s(t,"::-webkit-scrollbar"),n="x"===e?i.height:i.width,r=parseFloat(n);if(!Number.isNaN(r)&&!Number.isInteger(r))return function(t,e){let i=t.split("."),n=g.get(i[1]);return void 0===n&&(v||(v=document.createElement("style")),v.innerHTML=`
      #mezr-scrollbar-test::-webkit-scrollbar {
        width: ${t} !important;
      }
    `,y&&w||(y=document.createElement("div"),w=document.createElement("div"),y.appendChild(w),y.id="mezr-scrollbar-test",y.style.cssText="\n        all: unset !important;\n        position: fixed !important;\n        top: -200px !important;\n        left: 0px !important;\n        width: 100px !important;\n        height: 100px !important;\n        overflow: scroll !important;\n        pointer-events: none !important;\n        visibility: hidden !important;\n      ",w.style.cssText="\n        all: unset !important;\n        position: absolute !important;\n        inset: 0 !important;\n      "),document.body.appendChild(v),document.body.appendChild(y),n=y.getBoundingClientRect().width-w.getBoundingClientRect().width-e,g.set(i[1],n),document.body.removeChild(y),document.body.removeChild(v)),e+n}(n,r)}return i}function E(t,e=o.border){return m(t)?function(t,e=!1){if(e)return t.innerWidth;let{innerWidth:i,document:n}=t,{documentElement:s}=n,{clientWidth:r}=s;return i-D(s,"y",i-r)}(t,a[e]):_(t)?function({documentElement:t}){return Math.max(t.scrollWidth,t.clientWidth,t.getBoundingClientRect().width)}(t):function(t,e=o.border){let{width:i}=t.getBoundingClientRect();if(e===o.border)return i;let n=s(t);return e===o.margin?i+=Math.max(0,parseFloat(n.marginLeft)||0)+Math.max(0,parseFloat(n.marginRight)||0):(i-=parseFloat(n.borderLeftWidth)||0,i-=parseFloat(n.borderRightWidth)||0,e===o.scrollbar||(!u(t)&&l.has(n.overflowY)&&(i-=D(t,"y",Math.round(i)-t.clientWidth)),e===o.padding||(i-=parseFloat(n.paddingLeft)||0,i-=parseFloat(n.paddingRight)||0)),i)}(t,e)}function x(t,e=o.border){return m(t)?function(t,e=!1){if(e)return t.innerHeight;let{innerHeight:i,document:n}=t,{documentElement:s}=n,{clientHeight:r}=s;return i-D(s,"x",i-r)}(t,a[e]):_(t)?function({documentElement:t}){return Math.max(t.scrollHeight,t.clientHeight,t.getBoundingClientRect().height)}(t):function(t,e=o.border){let{height:i}=t.getBoundingClientRect();if(e===o.border)return i;let n=s(t);return e===o.margin?i+=Math.max(0,parseFloat(n.marginTop)||0)+Math.max(0,parseFloat(n.marginBottom)||0):(i-=parseFloat(n.borderTopWidth)||0,i-=parseFloat(n.borderBottomWidth)||0,e===o.scrollbar||(!u(t)&&l.has(n.overflowX)&&(i-=D(t,"x",Math.round(i)-t.clientHeight)),e===o.padding||(i-=parseFloat(n.paddingTop)||0,i-=parseFloat(n.paddingBottom)||0)),i)}(t,e)}function b(t){return t?.constructor===Object}function S(t,e=o.border){let i={left:0,top:0};if(_(t))return i;if(m(t))return i.left+=t.scrollX||0,i.top+=t.scrollY||0,i;let n=t.ownerDocument.defaultView;n&&(i.left+=n.scrollX||0,i.top+=n.scrollY||0);let r=t.getBoundingClientRect();if(i.left+=r.left,i.top+=r.top,e===o.border)return i;let a=s(t);return e===o.margin?(i.left-=Math.max(0,parseFloat(a.marginLeft)||0),i.top-=Math.max(0,parseFloat(a.marginTop)||0)):(i.left+=parseFloat(a.borderLeftWidth)||0,i.top+=parseFloat(a.borderTopWidth)||0,e===o.scrollbar||e===o.padding||(i.left+=parseFloat(a.paddingLeft)||0,i.top+=parseFloat(a.paddingTop)||0)),i}function P(t,e){let i=b(t)?{left:t.left,top:t.top}:Array.isArray(t)?S(...t):S(t);if(e&&!_(e)){let t=b(e)?e:Array.isArray(e)?S(e[0],e[1]):S(e);i.left-=t.left,i.top-=t.top}return i}function M(t,e){let i=0,n=0;b(t)?(i=t.width,n=t.height):Array.isArray(t)?(i=E(...t),n=x(...t)):(i=E(t),n=x(t));let s=P(t,e);return{width:i,height:n,...s,right:s.left+i,bottom:s.top+n}}function k(t){return b(t)?t:M(t)}function T(t,e={}){let{display:i}=s(t);if("none"===i||"contents"===i)return null;let n=e.position||s(t).position,{skipDisplayNone:r,container:o}=e;switch(n){case"relative":return t;case"fixed":return p(t,{container:o,position:n,skipDisplayNone:r});case"absolute":{let e=p(t,{container:o,position:n,skipDisplayNone:r});return m(e)?t.ownerDocument:e}default:return null}}var q,L,C={start:"start",move:"move",cancel:"cancel",end:"end",destroy:"destroy"},I=class{constructor(){this.drag=null,this.isDestroyed=!1,this._emitter=new i}_createDragData(t){return{x:t.x,y:t.y}}_updateDragData(t){this.drag&&(this.drag.x=t.x,this.drag.y=t.y)}_resetDragData(){this.drag=null}_start(t){this.isDestroyed||this.drag||(this.drag=this._createDragData(t),this._emitter.emit(C.start,t))}_move(t){this.drag&&(this._updateDragData(t),this._emitter.emit(C.move,t))}_end(t){this.drag&&(this._updateDragData(t),this._emitter.emit(C.end,t),this._resetDragData())}_cancel(t){this.drag&&(this._updateDragData(t),this._emitter.emit(C.cancel,t),this._resetDragData())}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}cancel(){this.drag&&(this._emitter.emit(C.cancel,{type:C.cancel,x:this.drag.x,y:this.drag.y}),this._resetDragData())}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(C.destroy,{type:C.destroy}),this._emitter.off())}},O=Symbol(),X=Symbol(),Y=new class{constructor(t={}){let{phases:e=[],autoTick:n=L.ON_DEMAND,allowDuplicateListeners:s=!0,idDedupeMode:r="replace",requestFrame:o=function(t=60){if("function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame)return t=>{let e=requestAnimationFrame(t);return()=>cancelAnimationFrame(e)};{let e=1e3/t,i="undefined"==typeof performance?()=>Date.now():()=>performance.now();return t=>{let n=setTimeout(()=>t(i()),e);return()=>clearTimeout(n)}}}()}=t;this.phases=e,this._autoTick=n,this._requestFrame=o,this._cancelFrame=null,this._queue=[],this._emitter=new i({allowDuplicateListeners:s,idDedupeMode:r}),this.tick=this.tick.bind(this)}get requestFrame(){return this._requestFrame}set requestFrame(t){this._requestFrame=t,this._kickstart()}get autoTick(){return this._autoTick}set autoTick(t){this._autoTick=t,this._kickstart()}get allowDuplicateListeners(){return this._emitter.allowDuplicateListeners}set allowDuplicateListeners(t){this._emitter.allowDuplicateListeners=t}get idDedupeMode(){return this._emitter.idDedupeMode}set idDedupeMode(t){this._emitter.idDedupeMode=t}tick(...t){let e,i,n,s,r,o;this._cancelFrame=null;let{_queue:a}=this;if(a.length)throw Error("Ticker: Can't tick before the previous tick has finished!");this._request();let{phases:l,_emitter:h}=this;for(e=0,n=l.length;e<n;e++)(o=h._getListeners(l[e]))&&a.push(o);for(e=0,n=a.length;e<n;e++)for(r=a[e],i=0,s=r.length;i<s;i++)r[i](...t);a.length=0,this._autoTick!==L.ON_DEMAND||h.listenerCount()||this._cancel()}on(t,e,i){let n=this._emitter.on(t,e,i);return this._request(),n}once(t,e,i){let n=this._emitter.once(t,e,i);return this._request(),n}off(t,e){return this._emitter.off(t,e)}listenerCount(t){return this._emitter.listenerCount(t)}_request(){this._requestFrame&&!this._cancelFrame&&this._autoTick>=L.ON_DEMAND&&(this._cancelFrame=this._requestFrame(this.tick))}_cancel(){this._cancelFrame&&(this._cancelFrame(),this._cancelFrame=null)}_kickstart(){this._autoTick===L.ON_DEMAND?this._emitter.listenerCount()&&this._request():this._autoTick===L.CONTINUOUS?this._request():this._cancel()}}({phases:[O,X]});function A(t,e){if("pointerId"in t)return t.pointerId===e?t:null;if("changedTouches"in t){let i=0;for(;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t}var F="u">typeof window&&"u">typeof window.document,R=(()=>{let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return t})(),N=F&&"ontouchstart"in window,W=F&&!!window.PointerEvent;function z(t={}){let{capture:e=!0,passive:i=!0}=t;return R?{capture:e,passive:i}:{capture:e}}function U(t){return"auto"===t||void 0===t?W?"pointer":N?"touch":"mouse":t}F&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&navigator.userAgent.indexOf("FxiOS");var V={pointer:{start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},touch:{start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},mouse:{start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"}},B=class{constructor(t,e={}){let{listenerOptions:n={},sourceEvents:s="auto",startPredicate:r=t=>!("button"in t&&t.button>0)}=e;this.element=t,this.drag=null,this.isDestroyed=!1,this._areWindowListenersBound=!1,this._startPredicate=r,this._listenerOptions=z(n),this._sourceEvents=U(s),this._emitter=new i,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),t.addEventListener(V[this._sourceEvents].start,this._onStart,this._listenerOptions)}_getTrackedPointerEventData(t){return this.drag?A(t,this.drag.pointerId):null}_onStart(t){if(this.isDestroyed||this.drag||!this._startPredicate(t))return;let e="pointerId"in t?t.pointerId:"changedTouches"in t?t.changedTouches[0]?t.changedTouches[0].identifier:null:-1;if(null===e)return;let i=A(t,e);if(null===i)return;let n={pointerId:e,pointerType:"pointerType"in t?t.pointerType:"touches"in t?"touch":"mouse",x:i.clientX,y:i.clientY};this.drag=n;let s={...n,type:C.start,srcEvent:t,target:i.target};this._emitter.emit(s.type,s),this.drag&&this._bindWindowListeners()}_onMove(t){if(!this.drag)return;let e=this._getTrackedPointerEventData(t);if(!e)return;this.drag.x=e.clientX,this.drag.y=e.clientY;let i={type:C.move,srcEvent:t,target:e.target,...this.drag};this._emitter.emit(i.type,i)}_onCancel(t){if(!this.drag)return;let e=this._getTrackedPointerEventData(t);if(!e)return;this.drag.x=e.clientX,this.drag.y=e.clientY;let i={type:C.cancel,srcEvent:t,target:e.target,...this.drag};this._emitter.emit(i.type,i),this._resetDrag()}_onEnd(t){if(!this.drag)return;let e=this._getTrackedPointerEventData(t);if(!e)return;this.drag.x=e.clientX,this.drag.y=e.clientY;let i={type:C.end,srcEvent:t,target:e.target,...this.drag};this._emitter.emit(i.type,i),this._resetDrag()}_bindWindowListeners(){if(this._areWindowListenersBound)return;let{move:t,end:e,cancel:i}=V[this._sourceEvents];window.addEventListener(t,this._onMove,this._listenerOptions),window.addEventListener(e,this._onEnd,this._listenerOptions),i&&window.addEventListener(i,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!0}_unbindWindowListeners(){if(this._areWindowListenersBound){let{move:t,end:e,cancel:i}=V[this._sourceEvents];window.removeEventListener(t,this._onMove,this._listenerOptions),window.removeEventListener(e,this._onEnd,this._listenerOptions),i&&window.removeEventListener(i,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!1}}_resetDrag(){this.drag=null,this._unbindWindowListeners()}cancel(){if(!this.drag)return;let t={type:C.cancel,srcEvent:null,target:null,...this.drag};this._emitter.emit(t.type,t),this._resetDrag()}updateSettings(t){if(this.isDestroyed)return;let{listenerOptions:e,sourceEvents:i,startPredicate:n}=t,s=U(i),r=z(e);n&&this._startPredicate!==n&&(this._startPredicate=n),(e&&(this._listenerOptions.capture!==r.capture||this._listenerOptions.passive===r.passive)||i&&this._sourceEvents!==s)&&(this.element.removeEventListener(V[this._sourceEvents].start,this._onStart,this._listenerOptions),this._unbindWindowListeners(),this.cancel(),i&&(this._sourceEvents=s),e&&r&&(this._listenerOptions=r),this.element.addEventListener(V[this._sourceEvents].start,this._onStart,this._listenerOptions))}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(C.destroy,{type:C.destroy}),this._emitter.off(),this.element.removeEventListener(V[this._sourceEvents].start,this._onStart,this._listenerOptions))}},H=class extends I{constructor(t={}){super();let{moveDistance:e=25,startPredicate:i=t=>{if(("Enter"===t.key||" "===t.key)&&document.activeElement&&document.activeElement!==document.body){let{left:t,top:e}=document.activeElement.getBoundingClientRect();return{x:t,y:e}}return null},movePredicate:n=(t,e,i)=>{if(!e.drag)return null;switch(t.key){case"ArrowLeft":return{x:e.drag.x-i.x,y:e.drag.y};case"ArrowRight":return{x:e.drag.x+i.x,y:e.drag.y};case"ArrowUp":return{x:e.drag.x,y:e.drag.y-i.y};case"ArrowDown":return{x:e.drag.x,y:e.drag.y+i.y};default:return null}},cancelPredicate:s=(t,e)=>e.drag&&"Escape"===t.key?{x:e.drag.x,y:e.drag.y}:null,endPredicate:r=(t,e)=>e.drag&&("Enter"===t.key||" "===t.key)?{x:e.drag.x,y:e.drag.y}:null}=t;this._moveDistance="number"==typeof e?{x:e,y:e}:{...e},this._startPredicate=i,this._movePredicate=n,this._cancelPredicate=s,this._endPredicate=r,this.cancel=this.cancel.bind(this),this._onKeyDown=this._onKeyDown.bind(this),document.addEventListener("keydown",this._onKeyDown),window.addEventListener("blur",this.cancel),window.addEventListener("visibilitychange",this.cancel)}_onKeyDown(t){if(!this.drag){let e=this._startPredicate(t,this,this._moveDistance);e&&(t.preventDefault(),this._start({type:"start",x:e.x,y:e.y,srcEvent:t}));return}let e=this._cancelPredicate(t,this,this._moveDistance);if(e){t.preventDefault(),this._cancel({type:"cancel",x:e.x,y:e.y,srcEvent:t});return}let i=this._endPredicate(t,this,this._moveDistance);if(i){t.preventDefault(),this._end({type:"end",x:i.x,y:i.y,srcEvent:t});return}let n=this._movePredicate(t,this,this._moveDistance);if(n){t.preventDefault(),this._move({type:"move",x:n.x,y:n.y,srcEvent:t});return}}updateSettings(t={}){void 0!==t.moveDistance&&("number"==typeof t.moveDistance?(this._moveDistance.x=t.moveDistance,this._moveDistance.y=t.moveDistance):(this._moveDistance.x=t.moveDistance.x,this._moveDistance.y=t.moveDistance.y)),void 0!==t.startPredicate&&(this._startPredicate=t.startPredicate),void 0!==t.movePredicate&&(this._movePredicate=t.movePredicate),void 0!==t.cancelPredicate&&(this._cancelPredicate=t.cancelPredicate),void 0!==t.endPredicate&&(this._endPredicate=t.endPredicate)}destroy(){this.isDestroyed||(super.destroy(),document.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("blur",this.cancel),window.removeEventListener("visibilitychange",this.cancel))}},j=class{constructor(){this.sensor=null,this.isEnded=!1,this.isStarted=!1,this.startEvent=null,this.nextMoveEvent=null,this.prevMoveEvent=null,this.endEvent=null,this.items=[]}},K=class{constructor(t,e,i,n,s){this.data={},this.element=t,this.elementContainer=e,this.elementOffsetContainer=i,this.dragContainer=n,this.dragOffsetContainer=s,this.initialTransform="",this.frozenProps=null,this.unfrozenProps=null,this.x=0,this.y=0,this.pX=0,this.pY=0,this._updateDiffX=0,this._updateDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0}};function $(t,e,i={left:0,top:0}){if(i.left=0,i.top=0,t===e)return i;let n=P([t,"padding"]),s=P([e,"padding"]);return i.left=s.left-n.left,i.top=s.top-n.top,i}var G=new WeakMap;function J(t){let e=G.get(t)?.deref();return e||(e=window.getComputedStyle(t,null),G.set(t,new WeakRef(e))),e}var Q=!R||{capture:!0,passive:!0},Z={left:0,top:0},tt={x:0,y:0};function te(){return{container:null,startPredicate:()=>!0,getElements:()=>null,releaseElements:()=>null,getFrozenProps:()=>null,getStartPosition:()=>({x:0,y:0}),setPosition:({item:t,x:e,y:i})=>{t.element.style.transform=`translate(${e}px, ${i}px) ${t.initialTransform}`},getPositionChange:({event:t,prevEvent:e})=>(tt.x=t.x-e.x,tt.y=t.y-e.y,tt)}}var ti=class{constructor(t,e={}){this.sensors=t,this.settings=this._parseSettings(e),this.plugins={},this.drag=null,this.isDestroyed=!1,this._sensorData=new Map,this._emitter=new i,this._startId=Symbol(),this._moveId=Symbol(),this._updateId=Symbol(),this._onMove=this._onMove.bind(this),this._onScroll=this._onScroll.bind(this),this._onEnd=this._onEnd.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._preparePositionUpdate=this._preparePositionUpdate.bind(this),this._applyPositionUpdate=this._applyPositionUpdate.bind(this),this.sensors.forEach(t=>{this._sensorData.set(t,{predicateState:0,predicateEvent:null,onMove:e=>this._onMove(e,t),onEnd:e=>this._onEnd(e,t)});let{onMove:e,onEnd:i}=this._sensorData.get(t);t.on("start",e),t.on("move",e),t.on("cancel",i),t.on("end",i),t.on("destroy",i)})}_parseSettings(t,e=te()){let{container:i=e.container,startPredicate:n=e.startPredicate,getElements:s=e.getElements,releaseElements:r=e.releaseElements,getFrozenProps:o=e.getFrozenProps,getStartPosition:a=e.getStartPosition,setPosition:l=e.setPosition,getPositionChange:h=e.getPositionChange}=t||{};return{container:i,startPredicate:n,getElements:s,releaseElements:r,getFrozenProps:o,getStartPosition:a,setPosition:l,getPositionChange:h}}_emit(t,...e){this._emitter.emit(t,...e)}_onMove(t,e){let i=this._sensorData.get(e);if(i)switch(i.predicateState){case 0:{i.predicateEvent=t;let n=this.settings.startPredicate({draggable:this,sensor:e,event:t});!0===n?this.resolveStartPredicate(e):!1===n&&this.rejectStartPredicate(e);break}case 1:this.drag&&(this.drag.nextMoveEvent=t,Y.once(O,this._prepareMove,this._moveId),Y.once(X,this._applyMove,this._moveId))}}_onScroll(){this.updatePosition()}_onEnd(t,e){let i=this._sensorData.get(e);i&&(this.drag?1===i.predicateState&&(this.drag.endEvent=t,this._sensorData.forEach(t=>{t.predicateState=0,t.predicateEvent=null}),this.stop()):(i.predicateState=0,i.predicateEvent=null))}_prepareStart(){let{drag:t}=this;if(!t||!t.startEvent)return;let e=this.settings.getElements({draggable:this,sensor:t.sensor,startEvent:t.startEvent})||[];t.items=e.map(e=>{if(!e.isConnected)throw Error("Element is not connected");let i=e.parentElement,n=T(e);if(!n)throw Error("Offset container could not be computed for the element!");let s=this.settings.container||i,r=s===i?n:T(e,{container:s});if(!r)throw Error("Drag offset container could not be computed for the element!");let o=new K(e,i,n,s,r),a=e.getBoundingClientRect();if(o.x=a.left,o.y=a.top,n!==r){let{left:t,top:e}=$(r,n,Z);o._containerDiffX=t,o._containerDiffY=e}let l=J(e),{transform:h}=l;h&&"none"!==h&&"matrix(1, 0, 0, 1, 0, 0)"!==h&&"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)"!==h&&(o.initialTransform=h);let{x:d,y:c}=this.settings.getStartPosition({draggable:this,sensor:t.sensor,item:o,style:l});o.pX=d,o.pY=c;let u=this.settings.getFrozenProps({draggable:this,sensor:t.sensor,item:o,style:l});if(Array.isArray(u)){if(u.length){let t={};for(let e of u)t[e]=l[e];o.frozenProps=t}else o.frozenProps=null}else o.frozenProps=u;if(o.frozenProps){let t={};for(let i in o.frozenProps)o.frozenProps.hasOwnProperty(i)&&(t[i]=e.style[i]);o.unfrozenProps=t}return o}),this._emit("preparestart",t.startEvent)}_applyStart(){let t=this.drag;if(!t||!t.startEvent)return;let{container:e}=this.settings;for(let i of t.items)e&&i.element.parentElement!==e&&(e.appendChild(i.element),i.pX+=i._containerDiffX,i.pY+=i._containerDiffY),i.frozenProps&&Object.assign(i.element.style,i.frozenProps),this.settings.setPosition({phase:"start",draggable:this,sensor:t.sensor,item:i,x:i.pX,y:i.pY});window.addEventListener("scroll",this._onScroll,Q),t.isStarted=!0,this._emit("start",t.startEvent)}_prepareMove(){let{drag:t}=this;if(!t||!t.startEvent)return;let e=t.nextMoveEvent,i=t.prevMoveEvent||t.startEvent;if(!(!e||e===i)){for(let n of t.items){let{x:s,y:r}=this.settings.getPositionChange({draggable:this,sensor:t.sensor,item:n,startEvent:t.startEvent,prevEvent:i,event:e});s&&(n.pX=n.pX-n._moveDiffX+s,n.x=n.x-n._moveDiffX+s,n._moveDiffX=s),r&&(n.pY=n.pY-n._moveDiffY+r,n.y=n.y-n._moveDiffY+r,n._moveDiffY=r)}t.prevMoveEvent=e,this._emit("preparemove",e)}}_applyMove(){let{drag:t}=this;if(!(!t||!t.nextMoveEvent)){for(let e of t.items)e._moveDiffX=0,e._moveDiffY=0;for(let e of t.items)this.settings.setPosition({phase:"move",draggable:this,sensor:t.sensor,item:e,x:e.pX,y:e.pY});this._emit("move",t.nextMoveEvent)}}_preparePositionUpdate(){let{drag:t}=this;if(t)for(let e of t.items){if(e.elementOffsetContainer!==e.dragOffsetContainer){let{left:t,top:i}=$(e.dragOffsetContainer,e.elementOffsetContainer,Z);e._containerDiffX=t,e._containerDiffY=i}let{left:t,top:i}=e.element.getBoundingClientRect(),n=e.x-e._moveDiffX-t;e.pX=e.pX-e._updateDiffX+n,e._updateDiffX=n;let s=e.y-e._moveDiffY-i;e.pY=e.pY-e._updateDiffY+s,e._updateDiffY=s}}_applyPositionUpdate(){let{drag:t}=this;if(t)for(let e of t.items)e._updateDiffX=0,e._updateDiffY=0,this.settings.setPosition({phase:"move",draggable:this,sensor:t.sensor,item:e,x:e.pX,y:e.pY})}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}resolveStartPredicate(t,e){let i=this._sensorData.get(t);if(!i)return;let n=e||i.predicateEvent;0===i.predicateState&&n&&(i.predicateState=1,i.predicateEvent=null,this.drag=new j,this.drag.sensor=t,this.drag.startEvent=n,this._sensorData.forEach((e,i)=>{i!==t&&(e.predicateState=2,e.predicateEvent=null)}),Y.once(O,this._prepareStart,this._startId),Y.once(X,this._applyStart,this._startId))}rejectStartPredicate(t){let e=this._sensorData.get(t);e?.predicateState===0&&(e.predicateState=2,e.predicateEvent=null)}stop(){let{drag:t}=this;if(!(!t||t.isEnded)){if(t.isEnded=!0,Y.off(O,this._startId),Y.off(X,this._startId),Y.off(O,this._moveId),Y.off(X,this._moveId),Y.off(O,this._updateId),Y.off(X,this._updateId),t.isStarted){window.removeEventListener("scroll",this._onScroll,Q);let e=[];for(let i of t.items){if(e.push(i.element),i.elementContainer&&i.element.parentElement!==i.elementContainer&&(i.pX-=i._containerDiffX,i.pY-=i._containerDiffY,i._containerDiffX=0,i._containerDiffY=0,i.elementContainer.appendChild(i.element)),i.unfrozenProps)for(let t in i.unfrozenProps)i.element.style[t]=i.unfrozenProps[t]||"";this.settings.setPosition({phase:"end",draggable:this,sensor:t.sensor,item:i,x:i.pX,y:i.pY})}e.length&&this.settings.releaseElements({draggable:this,sensor:t.sensor,elements:e})}this._emit("end",t.endEvent),this.drag=null}}updatePosition(t=!1){this.drag&&(t?(this._preparePositionUpdate(),this._applyPositionUpdate()):(Y.once(O,this._preparePositionUpdate,this._updateId),Y.once(X,this._applyPositionUpdate,this._updateId)))}updateSettings(t={}){this.settings=this._parseSettings(t,this.settings)}use(t){return t(this)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.stop(),this._sensorData.forEach(({onMove:t,onEnd:e},i)=>{i.off("start",t),i.off("move",t),i.off("cancel",e),i.off("end",e),i.off("destroy",e)}),this._sensorData.clear(),this._emit("destroy"),this._emitter.off())}},tn=class{constructor(t,e){this._data=[],this._createObject=t,this._onPut=e}pick(){return this._data.length?this._data.pop():this._createObject()}put(t){-1===this._data.indexOf(t)&&(this._onPut&&this._onPut(t),this._data.push(t))}reset(){this._data.length=0}};function ts(t,e){let i;let n=(i=function(t,...e){let i={...k(t),right:0,bottom:0};for(let t of e){let e=k(t),n=Math.max(i.left,e.left),s=Math.min(i.left+i.width,e.left+e.width);if(s<=n)return null;let r=Math.max(i.top,e.top),o=Math.min(i.top+i.height,e.height+e.top);if(o<=r)return null;i.left=n,i.top=r,i.width=s-n,i.height=o-r}return i.right=i.left+i.width,i.bottom=i.top+i.height,i}(t,e))?i.width*i.height:0;return n?n/(Math.min(t.width,e.width)*Math.min(t.height,e.height))*100:0}function tr(t){return t instanceof Window}function to(t){return tr(t)||t===document.documentElement||t===document.body?window:t}function ta(t){return tr(t)?t.pageXOffset:t.scrollLeft}function tl(t){return tr(t)&&(t=document.documentElement),t.scrollWidth-t.clientWidth}function th(t){return tr(t)?t.pageYOffset:t.scrollTop}function td(t){return tr(t)&&(t=document.documentElement),t.scrollHeight-t.clientHeight}function tc(t,e){return!(t.right<=e.left||e.right<=t.left||t.bottom<=e.top||e.bottom<=t.top)}var tu={width:0,height:0,left:0,right:0,top:0,bottom:0},tp={...tu},tf={direction:"none",threshold:0,distance:0,value:0,maxValue:0,duration:0,speed:0,deltaTime:0,isEnding:!1},tm={x:1,y:2},t_={forward:4,reverse:8},tg={none:0,left:tm.x|t_.reverse,right:tm.x|t_.forward},tv={none:0,up:tm.y|t_.reverse,down:tm.y|t_.forward},ty={...tg,...tv};function tw(t){switch(t){case tg.none:case tv.none:return"none";case tg.left:return"left";case tg.right:return"right";case tv.up:return"up";case tv.down:return"down";default:throw Error(`Unknown direction value: ${t}`)}}function tD(t,e,i){let{left:n=0,right:s=0,top:r=0,bottom:o=0}=e;return n=Math.max(0,n),s=Math.max(0,s),r=Math.max(0,r),o=Math.max(0,o),i.width=t.width+n+s,i.height=t.height+r+o,i.left=t.left-n,i.top=t.top-r,i.right=t.right+s,i.bottom=t.bottom+o,i}function tE(t,e){return Math.ceil(t)>=Math.floor(e)}function tx(t,e){return Math.min(e/2,t)}function tb(t,e,i,n){return Math.max(0,i+2*t+n*e-n)/2}var tS=class{constructor(){this.positionX=0,this.positionY=0,this.directionX=ty.none,this.directionY=ty.none,this.overlapCheckRequestTime=0}},tP=class{constructor(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}reset(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}addRequest(t){tm.x&t.direction?(this.requestX&&this.removeRequest(this.requestX),this.requestX=t):(this.requestY&&this.removeRequest(this.requestY),this.requestY=t),t.action=this}removeRequest(t){this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null)}computeScrollValues(){this.element&&(this.scrollLeft=this.requestX?this.requestX.value:ta(this.element),this.scrollTop=this.requestY?this.requestY.value:th(this.element))}scroll(){this.element&&(this.element.scrollTo?this.element.scrollTo(this.scrollLeft,this.scrollTop):(this.element.scrollLeft=this.scrollLeft,this.element.scrollTop=this.scrollTop))}},tM=class{constructor(){this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}reset(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}hasReachedEnd(){return t_.forward&this.direction?tE(this.value,this.maxValue):this.value<=0}computeCurrentScrollValue(){return this.element?this.value!=this.value?tm.x&this.direction?ta(this.element):th(this.element):Math.max(0,Math.min(this.value,this.maxValue)):0}computeNextScrollValue(){let t=this.speed*(this.deltaTime/1e3);return Math.max(0,Math.min(t_.forward&this.direction?this.value+t:this.value-t,this.maxValue))}computeSpeed(){if(!this.item||!this.element)return 0;let{speed:t}=this.item;return"function"==typeof t?(tf.direction=tw(this.direction),tf.threshold=this.threshold,tf.distance=this.distance,tf.value=this.value,tf.maxValue=this.maxValue,tf.duration=this.duration,tf.speed=this.speed,tf.deltaTime=this.deltaTime,tf.isEnding=this.isEnding,t(this.element,tf)):t}tick(t){return this.isActive||(this.isActive=!0,this.onStart()),this.deltaTime=t,this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(),this.value=this.computeNextScrollValue(),this.duration+=t,this.value}onStart(){if(!this.item||!this.element)return;let{onStart:t}=this.item;"function"==typeof t&&t(this.element,tw(this.direction))}onStop(){if(!this.item||!this.element)return;let{onStop:t}=this.item;"function"==typeof t&&t(this.element,tw(this.direction))}};new class{constructor(t={}){let{overlapCheckInterval:e=150}=t;this.items=[],this.settings={overlapCheckInterval:e},this._actions=[],this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._requests={[tm.x]:new Map,[tm.y]:new Map},this._itemData=new Map,this._requestPool=new tn(()=>new tM,t=>t.reset()),this._actionPool=new tn(()=>new tP,t=>t.reset()),this._emitter=new i,this._frameRead=this._frameRead.bind(this),this._frameWrite=this._frameWrite.bind(this)}_frameRead(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateItems(),this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))}_frameWrite(){this._isDestroyed||this._applyActions()}_startTicking(){this._isTicking||(this._isTicking=!0,Y.on(O,this._frameRead),Y.on(X,this._frameWrite))}_stopTicking(){this._isTicking&&(this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,Y.off(O,this._frameRead),Y.off(X,this._frameWrite))}_getItemClientRect(t,e={width:0,height:0,left:0,right:0,top:0,bottom:0}){let{clientRect:i}=t;return e.left=i.left,e.top=i.top,e.width=i.width,e.height=i.height,e.right=i.left+i.width,e.bottom=i.top+i.height,e}_requestItemScroll(t,e,i,n,s,r,o){let a=this._requests[e],l=a.get(t);l?(l.element!==i||l.direction!==n)&&l.reset():(l=this._requestPool.pick(),a.set(t,l)),l.item=t,l.element=i,l.direction=n,l.threshold=s,l.distance=r,l.maxValue=o}_cancelItemScroll(t,e){let i=this._requests[e],n=i.get(t);n&&(n.action&&n.action.removeRequest(n),this._requestPool.put(n),i.delete(t))}_checkItemOverlap(t,e,i){let{inertAreaSize:n,targets:s}=t;if(!s.length){e&&this._cancelItemScroll(t,tm.x),i&&this._cancelItemScroll(t,tm.y);return}let r=this._itemData.get(t),o=r?.directionX,a=r?.directionY;if(!o&&!a){e&&this._cancelItemScroll(t,tm.x),i&&this._cancelItemScroll(t,tm.y);return}let l=this._getItemClientRect(t,tu),h=null,d=-1/0,c=0,u=-1/0,p=ty.none,m=0,_=0,g=null,v=-1/0,y=0,w=-1/0,D=ty.none,E=0,x=0,b=0;for(;b<s.length;b++){let t=s[b],r="number"==typeof t.threshold?t.threshold:50,S=!!(e&&o&&"y"!==t.axis),P=!!(i&&a&&"x"!==t.axis),T=t.priority||0;if((!S||T<d)&&(!P||T<v))continue;let q=to(t.element||t),L=S?tl(q):-1,C=P?td(q):-1;if(L<=0&&C<=0)continue;let I=M([q,"padding"],window),O=ts(l,I)||-1/0;if(O===-1/0){if(!(t.padding&&tc(l,tD(I,t.padding,tp))))continue;O=-(function(t,e){if(!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top))return null;let i=t.left+t.width,n=t.top+t.height,s=e.left+e.width,r=e.top+e.height;return i<=e.left?n<=e.top?f(i,n,e.left,e.top):t.top>=r?f(i,t.top,e.left,r):e.left-i:t.left>=s?n<=e.top?f(t.left,n,s,e.top):t.top>=r?f(t.left,t.top,s,r):t.left-s:n<=e.top?e.top-n:t.top-r}(k(l),k(I))||0)}if(S&&T>=d&&L>0&&(T>d||O>u)){let t=0,e=ty.none,i=tx(r,I.width),s=tb(i,n,l.width,I.width);o===ty.right?(t=I.right+s-l.right)<=i&&!tE(ta(q),L)&&(e=ty.right):o===ty.left&&(t=l.left-(I.left-s))<=i&&ta(q)>0&&(e=ty.left),e&&(h=q,d=T,c=i,u=O,p=e,m=t,_=L)}if(P&&T>=v&&C>0&&(T>v||O>w)){let t=0,e=tv.none,i=tx(r,I.height),s=tb(i,n,l.height,I.height);a===ty.down?(t=I.bottom+s-l.bottom)<=i&&!tE(th(q),C)&&(e=ty.down):a===ty.up&&(t=l.top-(I.top-s))<=i&&th(q)>0&&(e=ty.up),e&&(g=q,v=T,y=i,w=O,D=e,E=t,x=C)}}e&&(h&&p?this._requestItemScroll(t,tm.x,h,p,c,m,_):this._cancelItemScroll(t,tm.x)),i&&(g&&D?this._requestItemScroll(t,tm.y,g,D,y,E,x):this._cancelItemScroll(t,tm.y))}_updateScrollRequest(t){let e=t.item,{inertAreaSize:i,smoothStop:n,targets:s}=e,r=this._getItemClientRect(e,tu),o=null,a=0;for(;a<s.length;a++){let e=s[a],n=to(e.element||e);if(n!==t.element)continue;let l=!!(tm.x&t.direction);if(l){if("y"===e.axis)continue}else if("x"===e.axis)continue;let h=l?tl(n):td(n);if(h<=0)break;let d=M([n,"padding"],window);if((ts(r,d)||-1/0)===-1/0){let t=e.scrollPadding||e.padding;if(!(t&&tc(r,tD(d,t,tp))))break}let c=tx("number"==typeof e.threshold?e.threshold:50,l?d.width:d.height),u=tb(c,i,l?r.width:r.height,l?d.width:d.height),p=0;if((p=t.direction===ty.left?r.left-(d.left-u):t.direction===ty.right?d.right+u-r.right:t.direction===ty.up?r.top-(d.top-u):d.bottom+u-r.bottom)>c)break;let f=l?ta(n):th(n);if(o=t_.forward&t.direction?tE(f,h):f<=0)break;return t.maxValue=h,t.threshold=c,t.distance=p,t.isEnding=!1,!0}return!0===n&&t.speed>0?(null===o&&(o=t.hasReachedEnd()),t.isEnding=!o):t.isEnding=!1,t.isEnding}_updateItems(){for(let t=0;t<this.items.length;t++){let e=this.items[t],i=this._itemData.get(e),{x:n,y:s}=e.position,r=i.positionX,o=i.positionY;n===r&&s===o||(i.directionX=n>r?ty.right:n<r?ty.left:i.directionX,i.directionY=s>o?ty.down:s<o?ty.up:i.directionY,i.positionX=n,i.positionY=s,0===i.overlapCheckRequestTime&&(i.overlapCheckRequestTime=this._tickTime))}}_updateRequests(){let t=this.items,e=this._requests[tm.x],i=this._requests[tm.y],n=0;for(;n<t.length;n++){let s=t[n],r=this._itemData.get(s),o=r.overlapCheckRequestTime,a=o>0&&this._tickTime-o>this.settings.overlapCheckInterval,l=!0,h=e.get(s);h&&h.isActive&&(l=!this._updateScrollRequest(h))&&(a=!0,this._cancelItemScroll(s,tm.x));let d=!0,c=i.get(s);c&&c.isActive&&(d=!this._updateScrollRequest(c))&&(a=!0,this._cancelItemScroll(s,tm.y)),a&&(r.overlapCheckRequestTime=0,this._checkItemOverlap(s,l,d))}}_requestAction(t,e){let i=e===tm.x,n=null,s=0;for(;s<this._actions.length;s++){if(n=this._actions[s],t.element!==n.element){n=null;continue}if(i?n.requestX:n.requestY){this._cancelItemScroll(t.item,e);return}break}n||(n=this._actionPool.pick()),n.element=t.element,n.addRequest(t),t.tick(this._tickDeltaTime),this._actions.push(n)}_updateActions(){let t=0;for(t=0;t<this.items.length;t++){let e=this.items[t],i=this._requests[tm.x].get(e),n=this._requests[tm.y].get(e);i&&this._requestAction(i,tm.x),n&&this._requestAction(n,tm.y)}for(t=0;t<this._actions.length;t++)this._actions[t].computeScrollValues()}_applyActions(){let t;if(!this._actions.length)return;this._emitter.emit("beforescroll");let e=0;for(e=0;e<this._actions.length;e++)this._actions[e].scroll(),this._actionPool.put(this._actions[e]);for(e=0,this._actions.length=0;e<this.items.length;e++)(t=this.items[e]).onPrepareScrollEffect&&t.onPrepareScrollEffect();for(e=0;e<this.items.length;e++)(t=this.items[e]).onApplyScrollEffect&&t.onApplyScrollEffect();this._emitter.emit("afterscroll")}on(t,e){return this._emitter.on(t,e)}off(t,e){this._emitter.off(t,e)}addItem(t){if(this._isDestroyed||this._itemData.has(t))return;let{x:e,y:i}=t.position,n=new tS;n.positionX=e,n.positionY=i,n.directionX=ty.none,n.directionY=ty.none,n.overlapCheckRequestTime=this._tickTime,this._itemData.set(t,n),this.items.push(t),this._isTicking||this._startTicking()}removeItem(t){if(this._isDestroyed)return;let e=this.items.indexOf(t);-1!==e&&(this._requests[tm.x].get(t)&&(this._cancelItemScroll(t,tm.x),this._requests[tm.x].delete(t)),this._requests[tm.y].get(t)&&(this._cancelItemScroll(t,tm.y),this._requests[tm.y].delete(t)),this._itemData.delete(t),this.items.splice(e,1),this._isTicking&&!this.items.length&&this._stopTicking())}isDestroyed(){return this._isDestroyed}isItemScrollingX(t){return!!this._requests[tm.x].get(t)?.isActive}isItemScrollingY(t){return!!this._requests[tm.y].get(t)?.isActive}isItemScrolling(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)}updateSettings(t={}){let{overlapCheckInterval:e=this.settings.overlapCheckInterval}=t;this.settings.overlapCheckInterval=e}destroy(){if(this._isDestroyed)return;let t=this.items.slice(0),e=0;for(;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._emitter.off(),this._isDestroyed=!0}};var tk=new Set(["auto","scroll","overlay"]);function tT(t){let e=J(t);return!!(tk.has(e.overflowY)||tk.has(e.overflowX))}const tq=document.querySelector(".draggable"),tL=new ti([new B(tq),new H({moveDistance:{x:40,y:40}})],{getElements:()=>[tq],startPredicate:function(t={}){let e,i=0,n=null,s,{timeout:r=250,fallback:o=()=>!0}=t,a=t=>t.preventDefault(),l=t=>{if(i){if(e){t.cancelable&&t.preventDefault();return}void 0===e&&(t.cancelable&&t.timeStamp-i>r?(e=!0,t.preventDefault()):e=!1)}};return t=>{if(!(t.sensor instanceof B))return o(t);let{draggable:h,sensor:d,event:c}=t;if("touch"===c.pointerType){if("start"===c.type&&("pointerdown"===c.srcEvent.type||"touchstart"===c.srcEvent.type)){var u;let t;let o=(n=c.target)?(t=[],tT(u=n)&&t.push(u),function(t,e=[]){let i=t?.parentNode;for(;i&&!(i instanceof Document);)i instanceof Element?(tT(i)&&e.push(i),i=i.parentNode):i=i instanceof ShadowRoot?i.host:i.parentNode;e.push(window)}(u,t),t):[];o.forEach(t=>{t.addEventListener("touchmove",l,{passive:!1,capture:!0})});let p=()=>{i&&(h.off("end",p),h.sensors.forEach(t=>{t instanceof B&&t.off("end",p)}),n?.removeEventListener("contextmenu",a),o.forEach(t=>{t.removeEventListener("touchmove",l,{capture:!0})}),i=0,e=void 0,n=null,s=void window.clearTimeout(s))};e=void 0,i=c.srcEvent.timeStamp,n?.addEventListener("contextmenu",a),h.on("end",p),h.sensors.forEach(t=>{t instanceof B&&t.off("end",p)}),r>0&&(s=window.setTimeout(()=>{h.resolveStartPredicate(d),e=!0,s=void 0},r))}return e}return"start"===c.type&&!c.srcEvent.button}}(),getPositionChange:({startEvent:t,event:e,item:i})=>{let{prevX:n=t.x,prevY:s=t.y}=i.data,r=e.x-n,o=Math.abs(r);if(o>=40){let t=o%40;r>0?(r-=t,i.data.prevX=e.x-t):(r+=t,i.data.prevX=e.x+t)}else r=0;let a=e.y-s,l=Math.abs(a);if(l>=40){let t=l%40;a>0?(a-=t,i.data.prevY=e.y-t):(a+=t,i.data.prevY=e.y+t)}else a=0;return{x:r,y:a}}});tL.on("start",()=>{tq.classList.add("dragging")}),tL.on("end",()=>{tq.classList.remove("dragging")});
//# sourceMappingURL=index.f0b19664.js.map
