const t={start:"start",move:"move",cancel:"cancel",end:"end",destroy:"destroy"};var e,i,s,n={ADD:"add",UPDATE:"update",IGNORE:"ignore",THROW:"throw"},r=class{constructor(t={}){let{dedupe:e=n.ADD,getId:i=()=>Symbol()}=t;this.dedupe=e,this.getId=i,this._events=new Map}_getListeners(t){let e=this._events.get(t);if(e){let{idMap:t}=e;if(t.size)return e.emitList=e.emitList||[...t.values()]}return null}on(t,e,i){let{_events:s}=this,r=s.get(t);r||(r={idMap:new Map,emitList:null},s.set(t,r));let{idMap:o,emitList:a}=r;if(i=void 0===i?this.getId(e):i,o.has(i))switch(this.dedupe){case n.THROW:throw Error("Eventti: duplicate listener id!");case n.IGNORE:return i;case n.UPDATE:r.emitList=null;break;default:o.delete(i),r.emitList=null}return o.set(i,e),a?.push(e),i}once(t,e,i){let s=!1;return i=void 0===i?this.getId(e):i,this.on(t,(...n)=>{s||(s=!0,this.off(t,i),e(...n))},i)}off(t,e){if(void 0===t){this._events.clear();return}if(void 0===e){this._events.delete(t);return}let i=this._events.get(t);i&&i.idMap.delete(e)&&(i.emitList=null,i.idMap.size||this._events.delete(t))}emit(t,...e){let i=this._getListeners(t);if(!i)return;let{length:s}=i;if(e.length){if(1===s)i[0](...e);else{let t=0;for(;t<s;t++)i[t](...e)}}else if(1===s)i[0]();else{let t=0;for(;t<s;t++)i[t]()}}listenerCount(t){if(void 0===t){let t=0;return this._events.forEach((e,i)=>{t+=this.listenerCount(i)}),t}return this._events.get(t)?.idMap.size||0}};class o{constructor(){this.drag=null,this.isDestroyed=!1,this._emitter=new r}_createDragData(t){return{x:t.x,y:t.y}}_updateDragData(t){this.drag&&(this.drag.x=t.x,this.drag.y=t.y)}_resetDragData(){this.drag=null}_start(e){this.isDestroyed||this.drag||(this.drag=this._createDragData(e),this._emitter.emit(t.start,e))}_move(e){this.drag&&(this._updateDragData(e),this._emitter.emit(t.move,e))}_end(e){this.drag&&(this._updateDragData(e),this._emitter.emit(t.end,e),this._resetDragData())}_cancel(e){this.drag&&(this._updateDragData(e),this._emitter.emit(t.cancel,e),this._resetDragData())}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}cancel(){this.drag&&this._cancel({type:t.cancel,x:this.drag.x,y:this.drag.y})}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(t.destroy,{type:t.destroy}),this._emitter.off())}}var a=class{constructor(t={}){let{phases:e=[],dedupe:i,getId:s}=t;this._phases=e,this._emitter=new r({getId:s,dedupe:i}),this._queue=[],this.tick=this.tick.bind(this),this._getListeners=this._emitter._getListeners.bind(this._emitter)}get phases(){return this._phases}set phases(t){this._phases=t}get dedupe(){return this._emitter.dedupe}set dedupe(t){this._emitter.dedupe=t}get getId(){return this._emitter.getId}set getId(t){this._emitter.getId=t}tick(...t){this._assertEmptyQueue(),this._fillQueue(),this._processQueue(...t)}on(t,e,i){return this._emitter.on(t,e,i)}once(t,e,i){return this._emitter.once(t,e,i)}off(t,e){return this._emitter.off(t,e)}count(t){return this._emitter.listenerCount(t)}_assertEmptyQueue(){if(this._queue.length)throw Error("Ticker: Can't tick before the previous tick has finished!")}_fillQueue(){let t=this._queue,e=this._phases,i=this._getListeners,s=0,n=e.length,r;for(;s<n;s++)(r=i(e[s]))&&t.push(r);return t}_processQueue(...t){let e=this._queue,i=e.length;if(!i)return;let s=0,n=0,r,o;for(;s<i;s++)for(r=e[s],n=0,o=r.length;n<o;n++)r[n](...t);e.length=0}},h=class extends a{constructor(t={}){let{paused:e=!1,onDemand:i=!1,requestFrame:s=function(t=60){if("function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame)return t=>{let e=requestAnimationFrame(t);return()=>cancelAnimationFrame(e)};{let e=1e3/t,i=typeof performance>"u"?()=>Date.now():()=>performance.now();return t=>{let s=setTimeout(()=>t(i()),e);return()=>clearTimeout(s)}}}(),...n}=t;super(n),this._paused=e,this._onDemand=i,this._requestFrame=s,this._cancelFrame=null,this._empty=!0,e||i||this._request()}get phases(){return this._phases}set phases(t){this._phases=t,t.length?(this._empty=!1,this._request()):this._empty=!0}get paused(){return this._paused}set paused(t){this._paused=t,t?this._cancel():this._request()}get onDemand(){return this._onDemand}set onDemand(t){this._onDemand=t,t||this._request()}get requestFrame(){return this._requestFrame}set requestFrame(t){this._requestFrame!==t&&(this._requestFrame=t,this._cancelFrame&&(this._cancel(),this._request()))}tick(...t){if(this._assertEmptyQueue(),this._cancelFrame=null,this._onDemand||this._request(),!this._empty){if(!this._fillQueue().length){this._empty=!0;return}this._onDemand&&this._request(),this._processQueue(...t)}}on(t,e,i){let s=super.on(t,e,i);return this._empty=!1,this._request(),s}once(t,e,i){let s=super.once(t,e,i);return this._empty=!1,this._request(),s}_request(){this._paused||this._cancelFrame||(this._cancelFrame=this._requestFrame(this.tick))}_cancel(){this._cancelFrame&&(this._cancelFrame(),this._cancelFrame=null)}};let l=Symbol(),c=Symbol(),d=new h({phases:[l,c]});class u extends o{constructor(){super(),this.drag=null,this._direction={x:0,y:0},this._speed=0,this._tick=this._tick.bind(this)}_createDragData(t){return{...super._createDragData(t),time:0,deltaTime:0}}_start(t){this.isDestroyed||this.drag||(super._start(t),d.on(l,this._tick,this._tick))}_end(t){this.drag&&(d.off(l,this._tick),super._end(t))}_cancel(t){this.drag&&(d.off(l,this._tick),super._cancel(t))}_tick(t){if(this.drag){if(t&&this.drag.time){this.drag.deltaTime=t-this.drag.time,this.drag.time=t;let e={type:"tick",time:this.drag.time,deltaTime:this.drag.deltaTime};if(this._emitter.emit("tick",e),!this.drag)return;let i=this._speed*(this.drag.deltaTime/1e3),s=this._direction.x*i,n=this._direction.y*i;(s||n)&&this._move({type:"move",x:this.drag.x+s,y:this.drag.y+n})}else this.drag.time=t,this.drag.deltaTime=0}}}function p(t,e){if("pointerId"in t)return t.pointerId===e?t:null;if("changedTouches"in t){let i=0;for(;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t}const m="undefined"!=typeof window&&void 0!==window.document,f=(()=>{let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t})(),_=m&&"ontouchstart"in window,g=m&&!!window.PointerEvent;function y(t={}){let{capture:e=!0,passive:i=!0}=t;return f?{capture:e,passive:i}:{capture:e}}function v(t){return"auto"===t||void 0===t?g?"pointer":_?"touch":"mouse":t}m&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&navigator.userAgent.indexOf("FxiOS");const w={pointer:{start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},touch:{start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},mouse:{start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"}};class x{constructor(t,e={}){let{listenerOptions:i={},sourceEvents:s="auto",startPredicate:n=t=>!("button"in t)||!(t.button>0)}=e;this.element=t,this.drag=null,this.isDestroyed=!1,this._areWindowListenersBound=!1,this._startPredicate=n,this._listenerOptions=y(i),this._sourceEvents=v(s),this._emitter=new r,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),t.addEventListener(w[this._sourceEvents].start,this._onStart,this._listenerOptions)}_getTrackedPointerEventData(t){return this.drag?p(t,this.drag.pointerId):null}_onStart(e){if(this.isDestroyed||this.drag||!this._startPredicate(e))return;let i="pointerId"in e?e.pointerId:"changedTouches"in e?e.changedTouches[0]?e.changedTouches[0].identifier:null:-1;if(null===i)return;let s=p(e,i);if(null===s)return;let n={pointerId:i,pointerType:"pointerType"in e?e.pointerType:"touches"in e?"touch":"mouse",x:s.clientX,y:s.clientY};this.drag=n;let r={...n,type:t.start,srcEvent:e,target:s.target};this._emitter.emit(r.type,r),this.drag&&this._bindWindowListeners()}_onMove(e){if(!this.drag)return;let i=this._getTrackedPointerEventData(e);if(!i)return;this.drag.x=i.clientX,this.drag.y=i.clientY;let s={type:t.move,srcEvent:e,target:i.target,...this.drag};this._emitter.emit(s.type,s)}_onCancel(e){if(!this.drag)return;let i=this._getTrackedPointerEventData(e);if(!i)return;this.drag.x=i.clientX,this.drag.y=i.clientY;let s={type:t.cancel,srcEvent:e,target:i.target,...this.drag};this._emitter.emit(s.type,s),this._resetDrag()}_onEnd(e){if(!this.drag)return;let i=this._getTrackedPointerEventData(e);if(!i)return;this.drag.x=i.clientX,this.drag.y=i.clientY;let s={type:t.end,srcEvent:e,target:i.target,...this.drag};this._emitter.emit(s.type,s),this._resetDrag()}_bindWindowListeners(){if(this._areWindowListenersBound)return;let{move:t,end:e,cancel:i}=w[this._sourceEvents];window.addEventListener(t,this._onMove,this._listenerOptions),window.addEventListener(e,this._onEnd,this._listenerOptions),i&&window.addEventListener(i,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!0}_unbindWindowListeners(){if(this._areWindowListenersBound){let{move:t,end:e,cancel:i}=w[this._sourceEvents];window.removeEventListener(t,this._onMove,this._listenerOptions),window.removeEventListener(e,this._onEnd,this._listenerOptions),i&&window.removeEventListener(i,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!1}}_resetDrag(){this.drag=null,this._unbindWindowListeners()}cancel(){if(!this.drag)return;let e={type:t.cancel,srcEvent:null,target:null,...this.drag};this._emitter.emit(e.type,e),this._resetDrag()}updateSettings(t){if(this.isDestroyed)return;let{listenerOptions:e,sourceEvents:i,startPredicate:s}=t,n=v(i),r=y(e);s&&this._startPredicate!==s&&(this._startPredicate=s),(e&&(this._listenerOptions.capture!==r.capture||this._listenerOptions.passive===r.passive)||i&&this._sourceEvents!==n)&&(this.element.removeEventListener(w[this._sourceEvents].start,this._onStart,this._listenerOptions),this._unbindWindowListeners(),this.cancel(),i&&(this._sourceEvents=n),e&&r&&(this._listenerOptions=r),this.element.addEventListener(w[this._sourceEvents].start,this._onStart,this._listenerOptions))}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(t.destroy,{type:t.destroy}),this._emitter.off(),this.element.removeEventListener(w[this._sourceEvents].start,this._onStart,this._listenerOptions))}}const E=["start","cancel","end","moveLeft","moveRight","moveUp","moveDown"];function S(t,e){if(!t.size||!e.size)return 1/0;let i=1/0;for(let s of t){let t=e.get(s);void 0!==t&&t<i&&(i=t)}return i}const D=[" ","Enter"],b=["ArrowLeft"],P=["ArrowRight"],T=["ArrowUp"],k=["ArrowDown"],q=["Escape"],C=[" ","Enter"],R=()=>500,L=(t,e)=>{if(e.element&&document.activeElement===e.element){let{left:t,top:i}=e.element.getBoundingClientRect();return{x:t,y:i}}return null};class M{constructor(t,e){this.sensor=t,this.isEnded=!1,this.event=e,this.prevEvent=e,this.startEvent=e,this.endEvent=null,this.items=[]}}const O=new WeakMap;function I(t,e){if(e)return window.getComputedStyle(t,e);let i=O.get(t)?.deref();return i||(i=window.getComputedStyle(t,null),O.set(t,new WeakRef(i))),i}const A=!!("undefined"!=typeof window&&void 0!==window.document&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")),K={content:"content",padding:"padding",scrollbar:"scrollbar",border:"border",margin:"margin"},F={[K.content]:!1,[K.padding]:!1,[K.scrollbar]:!0,[K.border]:!0,[K.margin]:!0},W=new Set(["auto","scroll"]),z=(()=>{try{return window.navigator.userAgentData.brands.some(({brand:t})=>"Chromium"===t)}catch(t){return!1}})();function X(t){switch(I(t).display){case"none":return null;case"inline":case"contents":return!1;default:return!0}}function Y(t){let e=I(t);if(!A){let{filter:t}=e;if(t&&"none"!==t)return!0;let{backdropFilter:i}=e;if(i&&"none"!==i)return!0;let{willChange:s}=e;if(s&&(s.indexOf("filter")>-1||s.indexOf("backdrop-filter")>-1))return!0}let i=X(t);if(!i)return i;let{transform:s}=e;if(s&&"none"!==s)return!0;let{perspective:n}=e;if(n&&"none"!==n)return!0;let{contentVisibility:r}=e;if(r&&"auto"===r)return!0;let{contain:o}=e;if(o&&("strict"===o||"content"===o||o.indexOf("paint")>-1||o.indexOf("layout")>-1))return!0;let{willChange:a}=e;return!(!a||!(a.indexOf("transform")>-1||a.indexOf("perspective")>-1||a.indexOf("contain")>-1))||!!(A&&a&&a.indexOf("filter")>-1)}function V(t){return t instanceof HTMLHtmlElement}function U(t,e={}){if(V(t))return t.ownerDocument.defaultView;let i=e.position||I(t).position,{skipDisplayNone:s,container:n}=e;switch(i){case"static":case"relative":case"sticky":case"-webkit-sticky":{let e=n||t.parentElement;for(;e;){let t=X(e);if(t)return e;if(null===t&&!s)return null;e=e.parentElement}return t.ownerDocument.documentElement}case"absolute":case"fixed":{let e="fixed"===i,o=n||t.parentElement;for(;o;){var r;let t=e?Y(o):"static"!==I(r=o).position||Y(r);if(!0===t)return o;if(null===t&&!s)return null;o=o.parentElement}return t.ownerDocument.defaultView}default:return null}}function B(t,e,i,s){return Math.sqrt(Math.pow(i-t,2)+Math.pow(s-e,2))}function N(t){return t instanceof Window}function H(t){return t instanceof Document}const j=new Map;let Q=null,$=null,G=null;function J(t,e,i){if(i<=0)return 0;if(z){let i=I(t,"::-webkit-scrollbar"),s="x"===e?i.height:i.width,n=parseFloat(s);if(!Number.isNaN(n)&&!Number.isInteger(n))return function(t,e){let i=t.split("."),s=j.get(i[1]);return void 0===s&&(Q||(Q=document.createElement("style")),Q.innerHTML=`
      #mezr-scrollbar-test::-webkit-scrollbar {
        width: ${t} !important;
      }
    `,$&&G||($=document.createElement("div"),G=document.createElement("div"),$.appendChild(G),$.id="mezr-scrollbar-test",$.style.cssText="\n        all: unset !important;\n        position: fixed !important;\n        top: -200px !important;\n        left: 0px !important;\n        width: 100px !important;\n        height: 100px !important;\n        overflow: scroll !important;\n        pointer-events: none !important;\n        visibility: hidden !important;\n      ",G.style.cssText="\n        all: unset !important;\n        position: absolute !important;\n        inset: 0 !important;\n      "),document.body.appendChild(Q),document.body.appendChild($),s=$.getBoundingClientRect().width-G.getBoundingClientRect().width-e,j.set(i[1],s),document.body.removeChild($),document.body.removeChild(Q)),e+s}(s,n)}return i}function Z(t,e=K.border){return N(t)?function(t,e=!1){if(e)return t.innerWidth;let{innerWidth:i,document:s}=t,{documentElement:n}=s,{clientWidth:r}=n;return i-J(n,"y",i-r)}(t,F[e]):H(t)?function({documentElement:t}){return Math.max(t.scrollWidth,t.clientWidth,t.getBoundingClientRect().width)}(t):function(t,e=K.border){let{width:i}=t.getBoundingClientRect();if(e===K.border)return i;let s=I(t);return e===K.margin?i+=Math.max(0,parseFloat(s.marginLeft)||0)+Math.max(0,parseFloat(s.marginRight)||0):(i-=parseFloat(s.borderLeftWidth)||0,i-=parseFloat(s.borderRightWidth)||0,e===K.scrollbar||(!V(t)&&W.has(s.overflowY)&&(i-=J(t,"y",Math.round(i)-t.clientWidth)),e===K.padding||(i-=parseFloat(s.paddingLeft)||0,i-=parseFloat(s.paddingRight)||0)),i)}(t,e)}function tt(t,e=K.border){return N(t)?function(t,e=!1){if(e)return t.innerHeight;let{innerHeight:i,document:s}=t,{documentElement:n}=s,{clientHeight:r}=n;return i-J(n,"x",i-r)}(t,F[e]):H(t)?function({documentElement:t}){return Math.max(t.scrollHeight,t.clientHeight,t.getBoundingClientRect().height)}(t):function(t,e=K.border){let{height:i}=t.getBoundingClientRect();if(e===K.border)return i;let s=I(t);return e===K.margin?i+=Math.max(0,parseFloat(s.marginTop)||0)+Math.max(0,parseFloat(s.marginBottom)||0):(i-=parseFloat(s.borderTopWidth)||0,i-=parseFloat(s.borderBottomWidth)||0,e===K.scrollbar||(!V(t)&&W.has(s.overflowX)&&(i-=J(t,"x",Math.round(i)-t.clientHeight)),e===K.padding||(i-=parseFloat(s.paddingTop)||0,i-=parseFloat(s.paddingBottom)||0)),i)}(t,e)}function te(t){return t?.constructor===Object}function ti(t,e=K.border){let i={left:0,top:0};if(H(t))return i;if(N(t))return i.left+=t.scrollX||0,i.top+=t.scrollY||0,i;let s=t.ownerDocument.defaultView;s&&(i.left+=s.scrollX||0,i.top+=s.scrollY||0);let n=t.getBoundingClientRect();if(i.left+=n.left,i.top+=n.top,e===K.border)return i;let r=I(t);return e===K.margin?(i.left-=Math.max(0,parseFloat(r.marginLeft)||0),i.top-=Math.max(0,parseFloat(r.marginTop)||0)):(i.left+=parseFloat(r.borderLeftWidth)||0,i.top+=parseFloat(r.borderTopWidth)||0,e===K.scrollbar||e===K.padding||(i.left+=parseFloat(r.paddingLeft)||0,i.top+=parseFloat(r.paddingTop)||0)),i}function ts(t,e){let i=te(t)?{left:t.left,top:t.top}:Array.isArray(t)?ti(...t):ti(t);if(e&&!H(e)){let t=te(e)?e:Array.isArray(e)?ti(e[0],e[1]):ti(e);i.left-=t.left,i.top-=t.top}return i}function tn(t,e){let i=0,s=0;te(t)?(i=t.width,s=t.height):Array.isArray(t)?(i=Z(...t),s=tt(...t)):(i=Z(t),s=tt(t));let n=ts(t,e);return{width:i,height:s,...n,right:n.left+i,bottom:n.top+s}}function tr(t,e={}){let{display:i}=I(t);if("none"===i||"contents"===i)return null;let s=e.position||I(t).position,{skipDisplayNone:n,container:r}=e;switch(s){case"relative":return t;case"fixed":return U(t,{container:r,position:s,skipDisplayNone:n});case"absolute":{let e=U(t,{container:r,position:s,skipDisplayNone:n});return N(e)?t.ownerDocument:e}default:return null}}const to=new WeakMap;function ta(t){let e=to.get(t)?.deref();return e||(e=window.getComputedStyle(t,null),to.set(t,new WeakRef(e))),e}function th(t,e,i={left:0,top:0}){if(i.left=0,i.top=0,t===e)return i;let s=ts([t,"padding"]),n=ts([e,"padding"]);return i.left=n.left-s.left,i.top=n.top-s.top,i}const tl={left:0,top:0};class tc{constructor(t,e){if(!t.isConnected)throw Error("Element is not connected");let i=e.drag?.sensor;if(!i)throw Error("Sensor is not defined");let s=ta(t),n=t.getBoundingClientRect();this.data={},this.element=t,this.frozenProps=null,this.unfrozenProps=null,this.position={x:0,y:0},this._updateDiff={x:0,y:0},this._moveDiff={x:0,y:0},this._containerDiff={x:0,y:0};let r=t.parentElement;if(!r)throw Error("Element does not have a parent element.");this.elementContainer=r;let o=tr(t);if(!o)throw Error("Offset container could not be computed for the element!");this.elementOffsetContainer=o;let a=e.settings.container||r;this.dragContainer=a;let h=a===r?o:tr(t,{container:a});if(!h)throw Error("Drag offset container could not be computed for the element!");this.dragOffsetContainer=h;{let{width:t,height:e,x:i,y:s}=n;this.clientRect={width:t,height:e,x:i,y:s}}if(o!==h){let{left:t,top:e}=th(h,o,tl);this._containerDiff.x=t,this._containerDiff.y=e}let{transform:l}=s;l&&"none"!==l&&"matrix(1, 0, 0, 1, 0, 0)"!==l&&"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)"!==l?this.initialTransform=l:this.initialTransform="";let{x:c,y:d}=e.settings.getStartPosition({draggable:e,sensor:i,item:this,style:s});this.position.x=c,this.position.y=d;let u=e.settings.getFrozenProps({draggable:e,sensor:i,item:this,style:s});if(Array.isArray(u)){if(u.length){let t={};for(let e of u)t[e]=s[e];this.frozenProps=t}else this.frozenProps=null}else this.frozenProps=u;if(this.frozenProps){let e={};for(let i in this.frozenProps)this.frozenProps.hasOwnProperty(i)&&(e[i]=t.style[i]);this.unfrozenProps=e}}updateSize(t){if(t)this.clientRect.width=t.width,this.clientRect.height=t.height;else{let t=this.element.getBoundingClientRect();this.clientRect.width=t.width,this.clientRect.height=t.height}}}const td=!f||{capture:!0,passive:!0},tu={left:0,top:0},tp={x:0,y:0};function tm(){return{container:null,startPredicate:()=>!0,getElements:()=>null,releaseElements:()=>null,getFrozenProps:()=>null,getStartPosition:()=>({x:0,y:0}),setPosition:({item:t,x:e,y:i})=>{t.element.style.transform=`translate(${e}px, ${i}px) ${t.initialTransform}`},getPositionChange:({event:t,prevEvent:e})=>(tp.x=t.x-e.x,tp.y=t.y-e.y,tp)}}(e=s||(s={}))[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED";class tf{constructor(t,e){this._data=[],this._createObject=t,this._onPut=e}pick(){return this._data.length?this._data.pop():this._createObject()}put(t){-1===this._data.indexOf(t)&&(this._onPut&&this._onPut(t),this._data.push(t))}reset(){this._data.length=0}}function t_(t,e={width:0,height:0,x:0,y:0,left:0,top:0,right:0,bottom:0}){return t&&(e.width=t.width,e.height=t.height,e.x=t.x,e.y=t.y,e.left=t.x,e.top=t.y,e.right=t.x+t.width,e.bottom=t.y+t.height),e}const tg=t_(),ty=t_();function tv(t,e){let i=function(t,e){let i=function(t,e,i={width:0,height:0,x:0,y:0}){let s=Math.max(t.x,e.x),n=Math.min(t.x+t.width,e.x+e.width);if(n<=s)return null;let r=Math.max(t.y,e.y),o=Math.min(t.y+t.height,e.y+e.height);return o<=r?null:(i.x=s,i.y=r,i.width=n-s,i.height=o-r,i)}(t,e);return i?i.width*i.height:0}(t,e);return i?i/(Math.min(t.width,e.width)*Math.min(t.height,e.height))*100:0}function tw(...t){let{width:e,height:i,left:s,top:n}=tn(...t);return{width:e,height:i,x:s,y:n}}function tx(t){return t instanceof Window}function tE(t){return tx(t)||t===document.documentElement||t===document.body?window:t}function tS(t){return tx(t)?t.pageXOffset:t.scrollLeft}function tD(t){return tx(t)&&(t=document.documentElement),t.scrollWidth-t.clientWidth}function tb(t){return tx(t)?t.pageYOffset:t.scrollTop}function tP(t){return tx(t)&&(t=document.documentElement),t.scrollHeight-t.clientHeight}function tT(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)}const tk={width:0,height:0,x:0,y:0},tq={direction:"none",threshold:0,distance:0,value:0,maxValue:0,duration:0,speed:0,deltaTime:0,isEnding:!1},tC={x:1,y:2},tR={forward:4,reverse:8},tL={none:0,left:tC.x|tR.reverse,right:tC.x|tR.forward},tM={none:0,up:tC.y|tR.reverse,down:tC.y|tR.forward},tO={...tL,...tM};function tI(t){switch(t){case tL.none:case tM.none:return"none";case tL.left:return"left";case tL.right:return"right";case tM.up:return"up";case tM.down:return"down";default:throw Error(`Unknown direction value: ${t}`)}}function tA(t,e,i){let{left:s=0,right:n=0,top:r=0,bottom:o=0}=e;return s=Math.max(0,s),n=Math.max(0,n),r=Math.max(0,r),o=Math.max(0,o),i.width=t.width+s+n,i.height=t.height+r+o,i.x=t.x-s,i.y=t.y-r,i}function tK(t,e){return Math.ceil(t)>=Math.floor(e)}function tF(t,e){return Math.min(e/2,t)}function tW(t,e,i,s){return Math.max(0,i+2*t+s*e-s)/2}class tz{constructor(){this.positionX=0,this.positionY=0,this.directionX=tO.none,this.directionY=tO.none,this.overlapCheckRequestTime=0}}class tX{constructor(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}reset(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}addRequest(t){tC.x&t.direction?(this.requestX&&this.removeRequest(this.requestX),this.requestX=t):(this.requestY&&this.removeRequest(this.requestY),this.requestY=t),t.action=this}removeRequest(t){this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null)}computeScrollValues(){this.element&&(this.scrollLeft=this.requestX?this.requestX.value:tS(this.element),this.scrollTop=this.requestY?this.requestY.value:tb(this.element))}scroll(){this.element&&(this.element.scrollTo?this.element.scrollTo(this.scrollLeft,this.scrollTop):(this.element.scrollLeft=this.scrollLeft,this.element.scrollTop=this.scrollTop))}}class tY{constructor(){this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}reset(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}hasReachedEnd(){return tR.forward&this.direction?tK(this.value,this.maxValue):this.value<=0}computeCurrentScrollValue(){return this.element?this.value!=this.value?tC.x&this.direction?tS(this.element):tb(this.element):Math.max(0,Math.min(this.value,this.maxValue)):0}computeNextScrollValue(){let t=this.speed*(this.deltaTime/1e3);return Math.max(0,Math.min(tR.forward&this.direction?this.value+t:this.value-t,this.maxValue))}computeSpeed(){if(!this.item||!this.element)return 0;let{speed:t}=this.item;return"function"==typeof t?(tq.direction=tI(this.direction),tq.threshold=this.threshold,tq.distance=this.distance,tq.value=this.value,tq.maxValue=this.maxValue,tq.duration=this.duration,tq.speed=this.speed,tq.deltaTime=this.deltaTime,tq.isEnding=this.isEnding,t(this.element,tq)):t}tick(t){return this.isActive||(this.isActive=!0,this.onStart()),this.deltaTime=t,this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(),this.value=this.computeNextScrollValue(),this.duration+=t,this.value}onStart(){if(!this.item||!this.element)return;let{onStart:t}=this.item;"function"==typeof t&&t(this.element,tI(this.direction))}onStop(){if(!this.item||!this.element)return;let{onStop:t}=this.item;"function"==typeof t&&t(this.element,tI(this.direction))}}const tV=new class{constructor(t={}){let{overlapCheckInterval:e=150}=t;this.items=[],this.settings={overlapCheckInterval:e},this._actions=[],this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._requests={[tC.x]:new Map,[tC.y]:new Map},this._itemData=new Map,this._requestPool=new tf(()=>new tY,t=>t.reset()),this._actionPool=new tf(()=>new tX,t=>t.reset()),this._emitter=new r,this._frameRead=this._frameRead.bind(this),this._frameWrite=this._frameWrite.bind(this)}_frameRead(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateItems(),this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))}_frameWrite(){this._isDestroyed||this._applyActions()}_startTicking(){this._isTicking||(this._isTicking=!0,d.on(l,this._frameRead,this._frameRead),d.on(c,this._frameWrite,this._frameWrite))}_stopTicking(){this._isTicking&&(this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,d.off(l,this._frameRead),d.off(c,this._frameWrite))}_requestItemScroll(t,e,i,s,n,r,o){let a=this._requests[e],h=a.get(t);h?(h.element!==i||h.direction!==s)&&h.reset():(h=this._requestPool.pick(),a.set(t,h)),h.item=t,h.element=i,h.direction=s,h.threshold=n,h.distance=r,h.maxValue=o}_cancelItemScroll(t,e){let i=this._requests[e],s=i.get(t);s&&(s.action&&s.action.removeRequest(s),this._requestPool.put(s),i.delete(t))}_checkItemOverlap(t,e,i){let{inertAreaSize:s,targets:n,clientRect:r}=t;if(!n.length){e&&this._cancelItemScroll(t,tC.x),i&&this._cancelItemScroll(t,tC.y);return}let o=this._itemData.get(t),a=o?.directionX,h=o?.directionY;if(!a&&!h){e&&this._cancelItemScroll(t,tC.x),i&&this._cancelItemScroll(t,tC.y);return}let l=null,c=-1/0,d=0,u=-1/0,p=tO.none,m=0,f=0,_=null,g=-1/0,y=0,v=-1/0,w=tO.none,x=0,E=0,S=0;for(;S<n.length;S++){let t=n[S],o="number"==typeof t.threshold?t.threshold:50,P=!!(e&&a&&"y"!==t.axis),T=!!(i&&h&&"x"!==t.axis),k=t.priority||0;if((!P||k<c)&&(!T||k<g))continue;let q=tE(t.element||t),C=P?tD(q):-1,R=T?tP(q):-1;if(C<=0&&R<=0)continue;let L=tw([q,"padding"],window),M=tv(r,L)||-1/0;if(M===-1/0){var D,b;if(!(t.padding&&tT(r,tA(L,t.padding,tk))))continue;M=-(D=t_(r,tg),b=t_(L,ty),function(t,e){if(!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top))return null;let i=t.left+t.width,s=t.top+t.height,n=e.left+e.width,r=e.top+e.height;return i<=e.left?s<=e.top?B(i,s,e.left,e.top):t.top>=r?B(i,t.top,e.left,r):e.left-i:t.left>=n?s<=e.top?B(t.left,s,n,e.top):t.top>=r?B(t.left,t.top,n,r):t.left-n:s<=e.top?e.top-s:t.top-r}(te(D)?D:tn(D),te(b)?b:tn(b))||0)}if(P&&k>=c&&C>0&&(k>c||M>u)){let t=0,e=tO.none,i=tF(o,L.width),n=tW(i,s,r.width,L.width);a===tO.right?(t=L.x+L.width+n-(r.x+r.width))<=i&&!tK(tS(q),C)&&(e=tO.right):a===tO.left&&(t=r.x-(L.x-n))<=i&&tS(q)>0&&(e=tO.left),e&&(l=q,c=k,d=i,u=M,p=e,m=t,f=C)}if(T&&k>=g&&R>0&&(k>g||M>v)){let t=0,e=tM.none,i=tF(o,L.height),n=tW(i,s,r.height,L.height);h===tO.down?(t=L.y+L.height+n-(r.y+r.height))<=i&&!tK(tb(q),R)&&(e=tO.down):h===tO.up&&(t=r.y-(L.y-n))<=i&&tb(q)>0&&(e=tO.up),e&&(_=q,g=k,y=i,v=M,w=e,x=t,E=R)}}e&&(l&&p?this._requestItemScroll(t,tC.x,l,p,d,m,f):this._cancelItemScroll(t,tC.x)),i&&(_&&w?this._requestItemScroll(t,tC.y,_,w,y,x,E):this._cancelItemScroll(t,tC.y))}_updateScrollRequest(t){let{inertAreaSize:e,smoothStop:i,targets:s,clientRect:n}=t.item,r=null,o=0;for(;o<s.length;o++){let i=s[o],a=tE(i.element||i);if(a!==t.element)continue;let h=!!(tC.x&t.direction);if(h){if("y"===i.axis)continue}else if("x"===i.axis)continue;let l=h?tD(a):tP(a);if(l<=0)break;let c=tw([a,"padding"],window);if((tv(n,c)||-1/0)===-1/0){let t=i.scrollPadding||i.padding;if(!(t&&tT(n,tA(c,t,tk))))break}let d=tF("number"==typeof i.threshold?i.threshold:50,h?c.width:c.height),u=tW(d,e,h?n.width:n.height,h?c.width:c.height),p=0;if((p=t.direction===tO.left?n.x-(c.x-u):t.direction===tO.right?c.x+c.width+u-(n.x+n.width):t.direction===tO.up?n.y-(c.y-u):c.y+c.height+u-(n.y+n.height))>d)break;let m=h?tS(a):tb(a);if(r=tR.forward&t.direction?tK(m,l):m<=0)break;return t.maxValue=l,t.threshold=d,t.distance=p,t.isEnding=!1,!0}return!0===i&&t.speed>0?(null===r&&(r=t.hasReachedEnd()),t.isEnding=!r):t.isEnding=!1,t.isEnding}_updateItems(){for(let t=0;t<this.items.length;t++){let e=this.items[t],i=this._itemData.get(e),{x:s,y:n}=e.position,r=i.positionX,o=i.positionY;(s!==r||n!==o)&&(i.directionX=s>r?tO.right:s<r?tO.left:i.directionX,i.directionY=n>o?tO.down:n<o?tO.up:i.directionY,i.positionX=s,i.positionY=n,0===i.overlapCheckRequestTime&&(i.overlapCheckRequestTime=this._tickTime))}}_updateRequests(){let t=this.items,e=this._requests[tC.x],i=this._requests[tC.y],s=0;for(;s<t.length;s++){let n=t[s],r=this._itemData.get(n),o=r.overlapCheckRequestTime,a=o>0&&this._tickTime-o>this.settings.overlapCheckInterval,h=!0,l=e.get(n);l&&l.isActive&&(h=!this._updateScrollRequest(l))&&(a=!0,this._cancelItemScroll(n,tC.x));let c=!0,d=i.get(n);d&&d.isActive&&(c=!this._updateScrollRequest(d))&&(a=!0,this._cancelItemScroll(n,tC.y)),a&&(r.overlapCheckRequestTime=0,this._checkItemOverlap(n,h,c))}}_requestAction(t,e){let i=e===tC.x,s=null,n=0;for(;n<this._actions.length;n++){if(s=this._actions[n],t.element!==s.element){s=null;continue}if(i?s.requestX:s.requestY){this._cancelItemScroll(t.item,e);return}break}s||(s=this._actionPool.pick()),s.element=t.element,s.addRequest(t),t.tick(this._tickDeltaTime),this._actions.push(s)}_updateActions(){let t=0;for(t=0;t<this.items.length;t++){let e=this.items[t],i=this._requests[tC.x].get(e),s=this._requests[tC.y].get(e);i&&this._requestAction(i,tC.x),s&&this._requestAction(s,tC.y)}for(t=0;t<this._actions.length;t++)this._actions[t].computeScrollValues()}_applyActions(){let t;if(!this._actions.length)return;this._emitter.emit("beforescroll");let e=0;for(e=0;e<this._actions.length;e++)this._actions[e].scroll(),this._actionPool.put(this._actions[e]);for(e=0,this._actions.length=0;e<this.items.length;e++)(t=this.items[e]).onPrepareScrollEffect&&t.onPrepareScrollEffect();for(e=0;e<this.items.length;e++)(t=this.items[e]).onApplyScrollEffect&&t.onApplyScrollEffect();this._emitter.emit("afterscroll")}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}addItem(t){if(this._isDestroyed||this._itemData.has(t))return;let{x:e,y:i}=t.position,s=new tz;s.positionX=e,s.positionY=i,s.directionX=tO.none,s.directionY=tO.none,s.overlapCheckRequestTime=this._tickTime,this._itemData.set(t,s),this.items.push(t),this._isTicking||this._startTicking()}removeItem(t){if(this._isDestroyed)return;let e=this.items.indexOf(t);-1!==e&&(this._requests[tC.x].get(t)&&(this._cancelItemScroll(t,tC.x),this._requests[tC.x].delete(t)),this._requests[tC.y].get(t)&&(this._cancelItemScroll(t,tC.y),this._requests[tC.y].delete(t)),this._itemData.delete(t),this.items.splice(e,1),this._isTicking&&!this.items.length&&this._stopTicking())}isDestroyed(){return this._isDestroyed}isItemScrollingX(t){return!!this._requests[tC.x].get(t)?.isActive}isItemScrollingY(t){return!!this._requests[tC.y].get(t)?.isActive}isItemScrolling(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)}updateSettings(t={}){let{overlapCheckInterval:e=this.settings.overlapCheckInterval}=t;this.settings.overlapCheckInterval=e}destroy(){if(this._isDestroyed)return;let t=this.items.slice(0),e=0;for(;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._emitter.off(),this._isDestroyed=!0}},tU={x:0,y:0},tB={width:0,height:0,x:0,y:0};function tN(){return{targets:[],inertAreaSize:.2,speed:function(t=500,e=.5,i=.25){let s=t*(e>0?1/e:1/0),n=t*(i>0?1/i:1/0);return function(e,i){let r=0;if(!i.isEnding){if(i.threshold>0){let e=i.threshold-Math.max(0,i.distance);r=t/i.threshold*e}else r=t}let o=i.speed;return o===r?r:o<r?Math.min(r,o+i.deltaTime/1e3*s):Math.max(r,o-i.deltaTime/1e3*n)}}(),smoothStop:!1,getPosition:t=>{let{drag:e}=t,i=e?.items[0];if(i)return i.position;let s=e&&(e.event||e.startEvent);return tU.x=s?s.x:0,tU.y=s?s.y:0,tU},getClientRect:t=>{let{drag:e}=t,i=e?.items[0];if(i&&i.element)return i.clientRect;let s=e&&(e.event||e.startEvent);return tB.width=s?50:0,tB.height=s?50:0,tB.x=s?s.x-25:0,tB.y=s?s.y-25:0,tB},onStart:null,onStop:null}}class tH{constructor(t,e){this._draggableAutoScroll=t,this._draggable=e,this._position={x:0,y:0},this._clientRect={width:0,height:0,x:0,y:0}}_getSettings(){return this._draggableAutoScroll.settings}get targets(){let{targets:t}=this._getSettings();return"function"==typeof t&&(t=t(this._draggable)),t}get position(){let t=this._position,{getPosition:e}=this._getSettings();return"function"==typeof e?Object.assign(t,e(this._draggable)):(t.x=0,t.y=0),t}get clientRect(){let t=this._clientRect,{getClientRect:e}=this._getSettings();return"function"==typeof e?Object.assign(t,e(this._draggable)):(t.width=0,t.height=0,t.x=0,t.y=0),t}get inertAreaSize(){return this._getSettings().inertAreaSize}get smoothStop(){return this._getSettings().smoothStop}get speed(){return this._getSettings().speed}get onStart(){return this._getSettings().onStart}get onStop(){return this._getSettings().onStop}onPrepareScrollEffect(){let t=this._draggable._updateId;d.off(l,t),d.off(c,t),this._draggable._preparePositionUpdate()}onApplyScrollEffect(){this._draggable._applyPositionUpdate()}}class tj{constructor(t,e={}){this.name="autoscroll",this.version="0.0.3",this.settings=this._parseSettings(e),this._autoScrollProxy=null,t.on("start",()=>{this._autoScrollProxy||(this._autoScrollProxy=new tH(this,t),tV.addItem(this._autoScrollProxy))}),t.on("end",()=>{this._autoScrollProxy&&(tV.removeItem(this._autoScrollProxy),this._autoScrollProxy=null)})}_parseSettings(t,e=tN()){let{targets:i=e.targets,inertAreaSize:s=e.inertAreaSize,speed:n=e.speed,smoothStop:r=e.smoothStop,getPosition:o=e.getPosition,getClientRect:a=e.getClientRect,onStart:h=e.onStart,onStop:l=e.onStop}=t||{};return{targets:i,inertAreaSize:s,speed:n,smoothStop:r,getPosition:o,getClientRect:a,onStart:h,onStop:l}}updateSettings(t={}){this.settings=this._parseSettings(t,this.settings)}}const tQ=new Set(["auto","scroll","overlay"]);function t$(t){let e=ta(t);return!!(tQ.has(e.overflowY)||tQ.has(e.overflowX))}const tG=document.querySelector(".draggable"),tJ=document.querySelector(".drag-container"),tZ=new x(tG),t0=new class extends u{constructor(t,e={}){super();let{startPredicate:i=L,computeSpeed:s=R,cancelOnVisibilityChange:n=!0,cancelOnBlur:r=!0,startKeys:o=D,moveLeftKeys:a=b,moveRightKeys:h=P,moveUpKeys:l=T,moveDownKeys:c=k,cancelKeys:d=q,endKeys:u=C}=e;this.element=t,this._startKeys=new Set(o),this._cancelKeys=new Set(d),this._endKeys=new Set(u),this._moveLeftKeys=new Set(a),this._moveRightKeys=new Set(h),this._moveUpKeys=new Set(l),this._moveDownKeys=new Set(c),this._moveKeys=new Set([...a,...h,...l,...c]),this._moveKeyTimestamps=new Map,this._cancelOnBlur=r,this._cancelOnVisibilityChange=n,this._computeSpeed=s,this._startPredicate=i,this._onKeyDown=this._onKeyDown.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onTick=this._onTick.bind(this),this._internalCancel=this._internalCancel.bind(this),this.on("tick",this._onTick,this._onTick),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("keyup",this._onKeyUp),r&&t?.addEventListener("blur",this._internalCancel),n&&document.addEventListener("visibilitychange",this._internalCancel)}_end(t){this.drag&&(this._moveKeyTimestamps.clear(),this._direction.x=0,this._direction.y=0,super._end(t))}_cancel(t){this.drag&&(this._moveKeyTimestamps.clear(),this._direction.x=0,this._direction.y=0,super._cancel(t))}_internalCancel(){this.cancel()}_updateDirection(){let t=S(this._moveLeftKeys,this._moveKeyTimestamps),e=S(this._moveRightKeys,this._moveKeyTimestamps),i=S(this._moveUpKeys,this._moveKeyTimestamps),s=S(this._moveDownKeys,this._moveKeyTimestamps),n=t===e?0:t<e?-1:1,r=i===s?0:i<s?-1:1;if(!(0===n||0===r)){let t=1/(Math.sqrt(n*n+r*r)||1);n*=t,r*=t}this._direction.x=n,this._direction.y=r}_onTick(){this._speed=this._computeSpeed(this)}_onKeyUp(t){this._moveKeyTimestamps.get(t.key)&&(this._moveKeyTimestamps.delete(t.key),this._updateDirection())}_onKeyDown(t){if(!this.drag){if(this._startKeys.has(t.key)){let e=this._startPredicate(t,this);e&&(t.preventDefault(),this._start({type:"start",x:e.x,y:e.y}))}return}if(this._cancelKeys.has(t.key)){t.preventDefault(),this._internalCancel();return}if(this._endKeys.has(t.key)){t.preventDefault(),this._end({type:"end",x:this.drag.x,y:this.drag.y});return}if(this._moveKeys.has(t.key)){t.preventDefault(),this._moveKeyTimestamps.get(t.key)||(this._moveKeyTimestamps.set(t.key,Date.now()),this._updateDirection());return}}updateSettings(t={}){let e=!1,{cancelOnBlur:i,cancelOnVisibilityChange:s,startPredicate:n,computeSpeed:r}=t;if(void 0!==i&&this._cancelOnBlur!==i&&(this._cancelOnBlur=i,i?this.element?.addEventListener("blur",this._internalCancel):this.element?.removeEventListener("blur",this._internalCancel)),void 0!==s&&this._cancelOnVisibilityChange!==s&&(this._cancelOnVisibilityChange=s,s?document.addEventListener("visibilitychange",this._internalCancel):document.removeEventListener("visibilitychange",this._internalCancel)),void 0!==n&&(this._startPredicate=n),void 0!==r&&(this._computeSpeed=r),E.forEach((i,s)=>{let n=`${i}Keys`,r=t[n];void 0!==r&&(this[`_${n}`]=new Set(r),s>=3&&(e=!0))}),e){let t=[...this._moveLeftKeys,...this._moveRightKeys,...this._moveUpKeys,...this._moveDownKeys];[...this._moveKeys].every((e,i)=>t[i]===e)||(this._moveKeys=new Set(t),this._moveKeyTimestamps.clear(),this._updateDirection())}}destroy(){!this.isDestroyed&&(super.destroy(),this.off("tick",this._onTick),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp),this._cancelOnBlur&&this.element?.removeEventListener("blur",this._internalCancel),this._cancelOnVisibilityChange&&document.removeEventListener("visibilitychange",this._internalCancel))}}(tG),t1=new class{constructor(t,e={}){this.sensors=t,this.settings=this._parseSettings(e),this.plugins={},this.drag=null,this.isDestroyed=!1,this._sensorData=new Map,this._emitter=new r,this._startId=Symbol(),this._moveId=Symbol(),this._updateId=Symbol(),this._onMove=this._onMove.bind(this),this._onScroll=this._onScroll.bind(this),this._onEnd=this._onEnd.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._preparePositionUpdate=this._preparePositionUpdate.bind(this),this._applyPositionUpdate=this._applyPositionUpdate.bind(this),this.sensors.forEach(t=>{this._sensorData.set(t,{predicateState:0,predicateEvent:null,onMove:e=>this._onMove(e,t),onEnd:e=>this._onEnd(e,t)});let{onMove:e,onEnd:i}=this._sensorData.get(t);t.on("start",e,e),t.on("move",e,e),t.on("cancel",i,i),t.on("end",i,i),t.on("destroy",i,i)})}_parseSettings(t,e=tm()){let{container:i=e.container,startPredicate:s=e.startPredicate,getElements:n=e.getElements,releaseElements:r=e.releaseElements,getFrozenProps:o=e.getFrozenProps,getStartPosition:a=e.getStartPosition,setPosition:h=e.setPosition,getPositionChange:l=e.getPositionChange}=t||{};return{container:i,startPredicate:s,getElements:n,releaseElements:r,getFrozenProps:o,getStartPosition:a,setPosition:h,getPositionChange:l}}_emit(t,...e){this._emitter.emit(t,...e)}_onMove(t,e){let i=this._sensorData.get(e);if(i)switch(i.predicateState){case 0:{i.predicateEvent=t;let s=this.settings.startPredicate({draggable:this,sensor:e,event:t});!0===s?this.resolveStartPredicate(e):!1===s&&this.rejectStartPredicate(e);break}case 1:this.drag&&(this.drag.event=t,d.once(l,this._prepareMove,this._moveId),d.once(c,this._applyMove,this._moveId))}}_onScroll(){this.updatePosition()}_onEnd(t,e){let i=this._sensorData.get(e);i&&(this.drag?1===i.predicateState&&(this.drag.endEvent=t,this._sensorData.forEach(t=>{t.predicateState=0,t.predicateEvent=null}),this.stop()):(i.predicateState=0,i.predicateEvent=null))}_prepareStart(){let t=this.drag;if(!t)return;let e=this.settings.getElements({draggable:this,sensor:t.sensor,startEvent:t.startEvent})||[];t.items=e.map(t=>new tc(t,this)),this._emit("preparestart",t.startEvent)}_applyStart(){let t=this.drag;if(!t)return;let{container:e}=this.settings;for(let i of t.items)e&&i.element.parentElement!==e&&(e.appendChild(i.element),i.position.x+=i._containerDiff.x,i.position.y+=i._containerDiff.y),i.frozenProps&&Object.assign(i.element.style,i.frozenProps),this.settings.setPosition({phase:"start",draggable:this,sensor:t.sensor,item:i,x:i.position.x,y:i.position.y});window.addEventListener("scroll",this._onScroll,td),this._emit("start",t.startEvent)}_prepareMove(){let t=this.drag;if(!t)return;let{event:e,prevEvent:i,startEvent:s,sensor:n}=t;if(e!==i){for(let r of t.items){let{x:t,y:o}=this.settings.getPositionChange({draggable:this,sensor:n,item:r,event:e,prevEvent:i,startEvent:s});t&&(r.position.x+=t,r.clientRect.x+=t,r._moveDiff.x+=t),o&&(r.position.y+=o,r.clientRect.y+=o,r._moveDiff.y+=o)}t.prevEvent=e,this._emit("preparemove",e)}}_applyMove(){let t=this.drag;if(t){for(let e of t.items)e._moveDiff.x=0,e._moveDiff.y=0,this.settings.setPosition({phase:"move",draggable:this,sensor:t.sensor,item:e,x:e.position.x,y:e.position.y});t.event&&this._emit("move",t.event)}}_preparePositionUpdate(){let{drag:t}=this;if(t)for(let e of t.items){if(e.elementOffsetContainer!==e.dragOffsetContainer){let{left:t,top:i}=th(e.dragOffsetContainer,e.elementOffsetContainer,tu);e._containerDiff.x=t,e._containerDiff.y=i}let{left:t,top:i,width:s,height:n}=e.element.getBoundingClientRect(),r=e.clientRect.x-e._moveDiff.x-t;e.position.x=e.position.x-e._updateDiff.x+r,e._updateDiff.x=r;let o=e.clientRect.y-e._moveDiff.y-i;e.position.y=e.position.y-e._updateDiff.y+o,e._updateDiff.y=o,e.clientRect.width=s,e.clientRect.height=n}}_applyPositionUpdate(){let{drag:t}=this;if(t)for(let e of t.items)e._updateDiff.x=0,e._updateDiff.y=0,this.settings.setPosition({phase:"move",draggable:this,sensor:t.sensor,item:e,x:e.position.x,y:e.position.y})}on(t,e,i){return this._emitter.on(t,e,i)}off(t,e){this._emitter.off(t,e)}resolveStartPredicate(t,e){let i=this._sensorData.get(t);if(!i)return;let s=e||i.predicateEvent;0===i.predicateState&&s&&(i.predicateState=1,i.predicateEvent=null,this.drag=new M(t,s),this._sensorData.forEach((e,i)=>{i!==t&&(e.predicateState=2,e.predicateEvent=null)}),d.once(l,this._prepareStart,this._startId),d.once(c,this._applyStart,this._startId))}rejectStartPredicate(t){let e=this._sensorData.get(t);e?.predicateState===0&&(e.predicateState=2,e.predicateEvent=null)}stop(){let t=this.drag;if(!t||t.isEnded)return;t.isEnded=!0,d.off(l,this._startId),d.off(c,this._startId),d.off(l,this._moveId),d.off(c,this._moveId),d.off(l,this._updateId),d.off(c,this._updateId),window.removeEventListener("scroll",this._onScroll,td);let e=[];for(let i of t.items){if(e.push(i.element),i.elementContainer&&i.element.parentElement!==i.elementContainer&&(i.position.x-=i._containerDiff.x,i.position.y-=i._containerDiff.y,i._containerDiff.x=0,i._containerDiff.y=0,i.elementContainer.appendChild(i.element)),i.unfrozenProps)for(let t in i.unfrozenProps)i.element.style[t]=i.unfrozenProps[t]||"";this.settings.setPosition({phase:"end",draggable:this,sensor:t.sensor,item:i,x:i.position.x,y:i.position.y})}e.length&&this.settings.releaseElements({draggable:this,sensor:t.sensor,elements:e}),this._emit("end",t.endEvent),this.drag=null}updatePosition(t=!1){this.drag&&(t?(this._preparePositionUpdate(),this._applyPositionUpdate()):(d.once(l,this._preparePositionUpdate,this._updateId),d.once(c,this._applyPositionUpdate,this._updateId)))}updateSettings(t={}){this.settings=this._parseSettings(t,this.settings)}use(t){return t(this)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.stop(),this._sensorData.forEach(({onMove:t,onEnd:e},i)=>{i.off("start",t),i.off("move",t),i.off("cancel",e),i.off("end",e),i.off("destroy",e)}),this._sensorData.clear(),this._emit("destroy"),this._emitter.off())}}([tZ,t0],{container:tJ,getElements:()=>[tG],getFrozenProps:()=>["left","top"],startPredicate:function(t={}){let e,i;let s=0,n=null,{timeout:r=250,fallback:o=()=>!0}=t,a=t=>t.preventDefault(),h=t=>{if(s){if(e){t.cancelable&&t.preventDefault();return}void 0===e&&(t.cancelable&&t.timeStamp-s>r?(e=!0,t.preventDefault()):e=!1)}};return t=>{if(!(t.sensor instanceof x))return o(t);let{draggable:l,sensor:c,event:d}=t;if("touch"===d.pointerType){if("start"===d.type&&("pointerdown"===d.srcEvent.type||"touchstart"===d.srcEvent.type)){let t=(n=d.target)?function(t){let e=[];return t$(t)&&e.push(t),!function(t,e=[]){let i=t?.parentNode;for(;i&&!(i instanceof Document);)i instanceof Element?(t$(i)&&e.push(i),i=i.parentNode):i instanceof ShadowRoot?i=i.host:i=i.parentNode;e.push(window)}(t,e),e}(n):[];t.forEach(t=>{t.addEventListener("touchmove",h,{passive:!1,capture:!0})});let o=()=>{s&&(l.off("end",o),l.sensors.forEach(t=>{t instanceof x&&t.off("end",o)}),n?.removeEventListener("contextmenu",a),t.forEach(t=>{t.removeEventListener("touchmove",h,{capture:!0})}),s=0,e=void 0,n=null,i=void window.clearTimeout(i))};e=void 0,s=d.srcEvent.timeStamp,n?.addEventListener("contextmenu",a),l.on("end",o),l.sensors.forEach(t=>{t instanceof x&&t.off("end",o)}),r>0&&(i=window.setTimeout(()=>{l.resolveStartPredicate(c),e=!0,i=void 0},r))}return e}return"start"===d.type&&!d.srcEvent.button}}()}).use((i={targets:[{element:window,axis:"y",padding:{top:1/0,bottom:1/0}}]},t=>{let e=new tj(t,i);return t.plugins[e.name]=e,t}));t1.on("start",()=>{tG.classList.add("dragging")}),t1.on("end",()=>{tG.classList.remove("dragging")});
//# sourceMappingURL=index.eeedb14f.js.map
