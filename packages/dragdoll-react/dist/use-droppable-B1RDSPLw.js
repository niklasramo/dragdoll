import{t as e}from"./use-dnd-observer-context-BL_LF-TG.js";import{t}from"./use-isomorphic-layout-effect-D2LtpjJM.js";import{n,t as r}from"./use-callback-stable-CtO9rJmq.js";import{useRef as i,useState as a}from"react";import{Droppable as o}from"dragdoll/droppable";function s({id:s,accept:c,data:l,element:u,dndObserver:d}={}){let f=e(),p=d===void 0?f:d,[m,h]=a(null),g=i(null),_=i({id:s,accept:c,data:l});_.current.id=s,_.current.accept=c,_.current.data=l;let v=i(s),y=i(p);y.current=p;let b=i(p),x=r(()=>{let e=g.current;e&&(e.destroy(),g.current=null,h(null))},[]),S=r(e=>{x();let t=y.current,n=new o(e,_.current);g.current=n,v.current=_.current.id,b.current=t,h(n)},[x]),C=r(e=>{if(u!==void 0)return;if(e===null){x();return}let t=g.current;(!t||t.element!==e)&&S(e)},[u,S,x]);return t(()=>{if(u!==void 0)return S(u),x},[u,S,x]),t(()=>{let e=g.current;e&&v.current!==s&&S(e.element)},[s,S]),t(()=>{let e=b.current;if(e===p)return;let t=g.current;t&&(e?.removeDroppables([t]),p?.addDroppables([t])),b.current=p},[p]),t(()=>{let e=g.current;e&&(e.accept=c||(()=>!0))},[c]),t(()=>{let e=g.current;e&&(e.data=l||{})},[l]),t(()=>x,[x]),n(()=>[m,C],[m,C])}export{s as t};
//# sourceMappingURL=use-droppable-B1RDSPLw.js.map