{"version":3,"file":"use-dnd-observer-C2wDVvQa.js","names":[],"sources":["../src/hooks/use-dnd-observer.ts"],"sourcesContent":["import type { CollisionData, DndObserverEventCallbacks, DndObserverOptions } from 'dragdoll';\nimport { DndObserver, DndObserverEventType } from 'dragdoll';\nimport { useState } from 'react';\nimport { useDndObserverCallback } from './use-dnd-observer-callback.js';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect.js';\n\nexport interface UseDndObserverSettings<T extends CollisionData = CollisionData> {\n  collisionDetector?: DndObserverOptions<T>['collisionDetector'];\n  onStart?: DndObserverEventCallbacks<T>['start'];\n  onMove?: DndObserverEventCallbacks<T>['move'];\n  onEnter?: DndObserverEventCallbacks<T>['enter'];\n  onLeave?: DndObserverEventCallbacks<T>['leave'];\n  onCollide?: DndObserverEventCallbacks<T>['collide'];\n  onEnd?: DndObserverEventCallbacks<T>['end'];\n  onAddDraggables?: DndObserverEventCallbacks<T>['addDraggables'];\n  onRemoveDraggables?: DndObserverEventCallbacks<T>['removeDraggables'];\n  onAddDroppables?: DndObserverEventCallbacks<T>['addDroppables'];\n  onRemoveDroppables?: DndObserverEventCallbacks<T>['removeDroppables'];\n  onDestroy?: DndObserverEventCallbacks<T>['destroy'];\n}\n\nexport function useDndObserver<T extends CollisionData = CollisionData>({\n  collisionDetector,\n  onStart,\n  onMove,\n  onEnter,\n  onLeave,\n  onCollide,\n  onEnd,\n  onAddDraggables,\n  onRemoveDraggables,\n  onAddDroppables,\n  onRemoveDroppables,\n  onDestroy,\n}: UseDndObserverSettings<T> = {}) {\n  const [dndObserver, setDndObserver] = useState<DndObserver<T> | null>(null);\n\n  // Recreate the instance when the collision detector changes.\n  useIsomorphicLayoutEffect(() => {\n    const instance = new DndObserver<T>({ collisionDetector });\n    setDndObserver(instance);\n    return () => {\n      instance.destroy();\n      setDndObserver(null);\n    };\n  }, [collisionDetector]);\n\n  // Bind callbacks.\n  useDndObserverCallback(DndObserverEventType.Start, onStart, dndObserver);\n  useDndObserverCallback(DndObserverEventType.Move, onMove, dndObserver);\n  useDndObserverCallback(DndObserverEventType.Enter, onEnter, dndObserver);\n  useDndObserverCallback(DndObserverEventType.Leave, onLeave, dndObserver);\n  useDndObserverCallback(DndObserverEventType.Collide, onCollide, dndObserver);\n  useDndObserverCallback(DndObserverEventType.End, onEnd, dndObserver);\n  useDndObserverCallback(DndObserverEventType.AddDraggables, onAddDraggables, dndObserver);\n  useDndObserverCallback(DndObserverEventType.RemoveDraggables, onRemoveDraggables, dndObserver);\n  useDndObserverCallback(DndObserverEventType.AddDroppables, onAddDroppables, dndObserver);\n  useDndObserverCallback(DndObserverEventType.RemoveDroppables, onRemoveDroppables, dndObserver);\n  useDndObserverCallback(DndObserverEventType.Destroy, onDestroy, dndObserver);\n\n  return dndObserver;\n}\n"],"mappings":"wNAqBA,SAAgB,EAAwD,CACtE,oBACA,UACA,SACA,UACA,UACA,YACA,QACA,kBACA,qBACA,kBACA,qBACA,aAC6B,EAAE,CAAE,CACjC,GAAM,CAAC,EAAa,GAAkB,EAAgC,KAAK,CAyB3E,OAtBA,MAAgC,CAC9B,IAAM,EAAW,IAAI,EAAe,CAAE,oBAAmB,CAAC,CAE1D,OADA,EAAe,EAAS,KACX,CACX,EAAS,SAAS,CAClB,EAAe,KAAK,GAErB,CAAC,EAAkB,CAAC,CAGvB,EAAuB,EAAqB,MAAO,EAAS,EAAY,CACxE,EAAuB,EAAqB,KAAM,EAAQ,EAAY,CACtE,EAAuB,EAAqB,MAAO,EAAS,EAAY,CACxE,EAAuB,EAAqB,MAAO,EAAS,EAAY,CACxE,EAAuB,EAAqB,QAAS,EAAW,EAAY,CAC5E,EAAuB,EAAqB,IAAK,EAAO,EAAY,CACpE,EAAuB,EAAqB,cAAe,EAAiB,EAAY,CACxF,EAAuB,EAAqB,iBAAkB,EAAoB,EAAY,CAC9F,EAAuB,EAAqB,cAAe,EAAiB,EAAY,CACxF,EAAuB,EAAqB,iBAAkB,EAAoB,EAAY,CAC9F,EAAuB,EAAqB,QAAS,EAAW,EAAY,CAErE"}