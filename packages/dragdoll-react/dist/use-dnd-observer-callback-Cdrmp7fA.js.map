{"version":3,"file":"use-dnd-observer-callback-Cdrmp7fA.js","names":[],"sources":["../src/hooks/use-dnd-observer-callback.ts"],"sourcesContent":["import { DndObserver, DndObserverEventCallbacks } from 'dragdoll/dnd-observer';\nimport type { CollisionData } from 'dragdoll/dnd-observer/collision-detector';\nimport { useRef } from 'react';\nimport { useDndObserverContext } from './use-dnd-observer-context.js';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect.js';\n\nexport function useDndObserverCallback<\n  T extends CollisionData = CollisionData,\n  K extends keyof DndObserverEventCallbacks<T> = keyof DndObserverEventCallbacks<T>,\n>(eventType: K, callback?: DndObserverEventCallbacks<T>[K], dndObserver?: DndObserver<T> | null) {\n  const dndObserverFromContext = useDndObserverContext<T>();\n  const effectiveDndObserver = dndObserver === undefined ? dndObserverFromContext : dndObserver;\n  const hasCallback = !!callback;\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  useIsomorphicLayoutEffect(() => {\n    if (!effectiveDndObserver || !hasCallback) return;\n    const listener = ((...args: any[]) => {\n      (callbackRef.current as ((...args: any[]) => void) | undefined)?.(...args);\n    }) as DndObserverEventCallbacks<T>[K];\n    const id = effectiveDndObserver.on(eventType, listener);\n    return () => void effectiveDndObserver.off(eventType, id);\n  }, [eventType, effectiveDndObserver, hasCallback]);\n}\n"],"mappings":"oJAMA,SAAgB,EAGd,EAAc,EAA4C,EAAqC,CAC/F,IAAM,EAAyB,GAA0B,CACnD,EAAuB,IAAgB,IAAA,GAAY,EAAyB,EAC5E,EAAc,CAAC,CAAC,EAChB,EAAc,EAAO,EAAS,CACpC,EAAY,QAAU,EAEtB,MAAgC,CAC9B,GAAI,CAAC,GAAwB,CAAC,EAAa,OAI3C,IAAM,EAAK,EAAqB,GAAG,IAHhB,GAAG,IAAgB,CACnC,EAAY,UAAqD,GAAG,EAAK,GAErB,CACvD,UAAa,KAAK,EAAqB,IAAI,EAAW,EAAG,EACxD,CAAC,EAAW,EAAsB,EAAY,CAAC"}