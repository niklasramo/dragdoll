import{t as e}from"./use-dnd-observer-context-BL_LF-TG.js";import{t}from"./use-isomorphic-layout-effect-D2LtpjJM.js";import{t as n}from"./are-configs-equal-Cv4ZY5_I.js";import{n as r,t as i}from"./use-callback-stable-CtO9rJmq.js";import{useRef as a,useState as o}from"react";import{Draggable as s}from"dragdoll/draggable";function c(c,l){let u=r(()=>c.filter(e=>!!e),[...c]),{id:d,dndObserver:f,...p}=l||{},m=e(),h=f===void 0?m:f,[g,_]=o(null),v=a(null),y=a(u);y.current=u;let b=a(d),x=a(l),S=a(h),C=a(d);C.current=d;let w=a(h);w.current=h;let T=a(p);T.current=p;let E=i(()=>{let e=v.current;e&&(e.destroy(),v.current=null,_(null))},[]),D=i(()=>{E();let e=y.current;if(e.length===0)return;let t=C.current,n=w.current,r=new s(e,{id:t,...T.current||{}});n?.addDraggables([r]),v.current=r,b.current=t,x.current=T.current,S.current=n,_(r)},[E]);return t(()=>{if(!u.length){E();return}let e=v.current;if(!e){D();return}(u.length!==e.sensors.length||u.some(t=>!e.sensors.includes(t)))&&D()},[u,D,E]),t(()=>{v.current&&b.current!==d&&D()},[d,D]),t(()=>{let e=S.current;if(e===h)return;let t=v.current;t&&(e?.removeDraggables([t]),h?.addDraggables([t])),S.current=h},[h]),t(()=>{let e=v.current;e&&(n(x.current,p)||e.updateSettings(e._parseSettings(p)),x.current=p)},[p]),t(()=>E,[E]),g}export{c as t};
//# sourceMappingURL=use-draggable-CMs2hFH6.js.map