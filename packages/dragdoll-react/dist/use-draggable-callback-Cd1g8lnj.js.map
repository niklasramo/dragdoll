{"version":3,"file":"use-draggable-callback-Cd1g8lnj.js","names":[],"sources":["../src/hooks/use-draggable-callback.ts"],"sourcesContent":["import type {\n  Draggable,\n  DraggableEventCallback,\n  DraggableEventCallbacks,\n} from 'dragdoll/draggable';\nimport type { Sensor } from 'dragdoll/sensors';\nimport { useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect.js';\n\nexport function useDraggableCallback<\n  S extends Sensor[] = Sensor[],\n  K extends keyof DraggableEventCallbacks<S> = keyof DraggableEventCallbacks<S>,\n>(draggable: Draggable<S> | null, eventType: K, callback?: DraggableEventCallback<S, K>) {\n  const hasCallback = !!callback;\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  useIsomorphicLayoutEffect(() => {\n    if (!draggable || !hasCallback) return;\n    const listener = ((...args: any[]) => {\n      (callbackRef.current as ((...args: any[]) => void) | undefined)?.(...args);\n    }) as DraggableEventCallback<S, K>;\n    const id = draggable.on(eventType, listener);\n    return () => void draggable.off(eventType, id);\n  }, [draggable, eventType, hasCallback]);\n}\n"],"mappings":"8FASA,SAAgB,EAGd,EAAgC,EAAc,EAAyC,CACvF,IAAM,EAAc,CAAC,CAAC,EAChB,EAAc,EAAO,EAAS,CACpC,EAAY,QAAU,EAEtB,MAAgC,CAC9B,GAAI,CAAC,GAAa,CAAC,EAAa,OAIhC,IAAM,EAAK,EAAU,GAAG,IAHL,GAAG,IAAgB,CACnC,EAAY,UAAqD,GAAG,EAAK,GAEhC,CAC5C,UAAa,KAAK,EAAU,IAAI,EAAW,EAAG,EAC7C,CAAC,EAAW,EAAW,EAAY,CAAC"}