import{getStyle as e}from"./get-style-ZZHAkgcg.js";import{isDocument as t}from"./is-document-BQAkbLgN.js";import{SensorEventType as n}from"./sensor-C-EBcfly.js";import{DraggableEventType as r}from"./draggable-C1QBodX1.js";import{PointerSensor as i}from"./pointer-sensor-CyG2cFYy.js";const a=new Set([`auto`,`scroll`,`overlay`]);function o(t){let n=e(t);return!!(a.has(n.overflowY)||a.has(n.overflowX))}function s(e,n=[]){let r=e?.parentNode;for(n.length=0;r&&!t(r);)r instanceof Element?(o(r)&&n.push(r),r=r.parentNode):r=r instanceof ShadowRoot?r.host:r.parentNode;return n.push(window),n}function c(e){let t=[];return o(e)&&t.push(e),s(e,t),t}function l(e={}){let t,a=0,o=null,s,{touchDelay:l=250,fallback:u=()=>!0}=e,d=e=>e.preventDefault(),f=e=>{if(a){if(t){e.cancelable&&e.preventDefault();return}t===void 0&&(e.cancelable&&e.timeStamp-a>l?(t=!0,e.preventDefault()):t=!1)}};return e=>{if(!(e.sensor instanceof i))return u(e);let{draggable:p,sensor:m,event:h}=e,g=h;if(g.pointerType===`touch`){if(g.type===n.Start&&(g.srcEvent.type===`pointerdown`||g.srcEvent.type===`touchstart`)){o=g.target;let e=o?c(o):[];e.forEach(e=>{e.addEventListener(`touchmove`,f,{passive:!1,capture:!0})});let u=()=>{a&&(p.off(r.End,u),p.sensors.forEach(e=>{e instanceof i&&e.off(n.End,u)}),o?.removeEventListener(`contextmenu`,d),e.forEach(e=>{e.removeEventListener(`touchmove`,f,{capture:!0})}),a=0,t=void 0,o=null,s=void window.clearTimeout(s))};t=void 0,a=g.srcEvent.timeStamp,o?.addEventListener(`contextmenu`,d),p.on(r.End,u),p.sensors.forEach(e=>{e instanceof i&&e.on(n.End,u)}),l>0&&(s=window.setTimeout(()=>{p.resolveStartPredicate(m),t=!0,s=void 0},l))}return t}return g.type===n.Start&&!g.srcEvent.button}}export{l as createTouchDelayPredicate};
//# sourceMappingURL=create-touch-delay-predicate-BApQbIwT.js.map