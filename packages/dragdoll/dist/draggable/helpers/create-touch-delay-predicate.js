import{SensorEventType as e}from"../../sensor-TzqXogk2.js";import"../../ticker-EaCO7G8S.js";import{PointerSensor as t}from"../../pointer-sensor-Dbu_Xu9q.js";import"../../constants-BG0DGMmK.js";import{DraggableEventType as n}from"../../draggable-qBrB_jQL.js";import{getStyle as r}from"../../get-style-e3zfxW9-.js";import{isDocument as i}from"../../is-document-BqbrfopC.js";const a=new Set([`auto`,`scroll`,`overlay`]);function o(e){let t=r(e);return!!(a.has(t.overflowY)||a.has(t.overflowX))}function s(e,t=[]){let n=e?.parentNode;for(t.length=0;n&&!i(n);)n instanceof Element?(o(n)&&t.push(n),n=n.parentNode):n=n instanceof ShadowRoot?n.host:n.parentNode;return t.push(window),t}function c(e){let t=[];return o(e)&&t.push(e),s(e,t),t}function l(r={}){let i,a=0,o=null,s,{touchDelay:l=250,fallback:u=()=>!0}=r,d=e=>e.preventDefault(),f=e=>{if(a){if(i){e.cancelable&&e.preventDefault();return}i===void 0&&(e.cancelable&&e.timeStamp-a>l?(i=!0,e.preventDefault()):i=!1)}};return r=>{if(!(r.sensor instanceof t))return u(r);let{draggable:p,sensor:m,event:h}=r,g=h;if(g.pointerType===`touch`){if(g.type===e.Start&&(g.srcEvent.type===`pointerdown`||g.srcEvent.type===`touchstart`)){o=g.target;let r=o?c(o):[];r.forEach(e=>{e.addEventListener(`touchmove`,f,{passive:!1,capture:!0})});let u=()=>{a&&(p.off(n.End,u),p.sensors.forEach(n=>{n instanceof t&&n.off(e.End,u)}),o?.removeEventListener(`contextmenu`,d),r.forEach(e=>{e.removeEventListener(`touchmove`,f,{capture:!0})}),a=0,i=void 0,o=null,s=void window.clearTimeout(s))};i=void 0,a=g.srcEvent.timeStamp,o?.addEventListener(`contextmenu`,d),p.on(n.End,u),p.sensors.forEach(n=>{n instanceof t&&n.on(e.End,u)}),l>0&&(s=window.setTimeout(()=>{p.resolveStartPredicate(m),i=!0,s=void 0},l))}return i}return g.type===e.Start&&!g.srcEvent.button}}export{l as createTouchDelayPredicate};
//# sourceMappingURL=create-touch-delay-predicate.js.map