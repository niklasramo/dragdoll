import{SensorEventType as e}from"./sensor-TzqXogk2.js";import{BaseSensor as t}from"./base-sensor-cUrlV0_m.js";import{ticker as n,tickerPhases as r}from"./ticker-EaCO7G8S.js";var i=class extends t{constructor(){super(),this.drag=null,this._direction={x:0,y:0},this._speed=0,this._tick=this._tick.bind(this)}_createDragData(e){return{...super._createDragData(e),time:0,deltaTime:0}}_start(e){this.isDestroyed||this.drag||(super._start(e),n.on(r.read,this._tick,this._tick))}_end(e){this.drag&&(n.off(r.read,this._tick),super._end(e))}_cancel(e){this.drag&&(n.off(r.read,this._tick),super._cancel(e))}_tick(t){if(this.drag)if(t&&this.drag.time){this.drag.deltaTime=t-this.drag.time,this.drag.time=t;let n={type:`tick`,time:this.drag.time,deltaTime:this.drag.deltaTime};if(this._emitter.emit(`tick`,n),!this.drag)return;let r=this._speed*(this.drag.deltaTime/1e3),i=this._direction.x*r,a=this._direction.y*r;(i||a)&&this._move({type:e.Move,x:this.drag.x+i,y:this.drag.y+a})}else this.drag.time=t,this.drag.deltaTime=0}};export{i as BaseMotionSensor};
//# sourceMappingURL=base-motion-sensor-BS2TuJo7.js.map