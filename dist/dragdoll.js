var b={start:"start",move:"move",cancel:"cancel",end:"end",destroy:"destroy"};import{Emitter as it}from"eventti";var q=class{constructor(){this.drag=null,this.isDestroyed=!1,this._emitter=new it}_createDragData(e){return{x:e.x,y:e.y}}_updateDragData(e){this.drag&&(this.drag.x=e.x,this.drag.y=e.y)}_resetDragData(){this.drag=null}_start(e){this.isDestroyed||this.drag||(this.drag=this._createDragData(e),this._emitter.emit(b.start,e))}_move(e){this.drag&&(this._updateDragData(e),this._emitter.emit(b.move,e))}_end(e){this.drag&&(this._updateDragData(e),this._emitter.emit(b.end,e),this._resetDragData())}_cancel(e){this.drag&&(this._updateDragData(e),this._emitter.emit(b.cancel,e),this._resetDragData())}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}cancel(){this.drag&&this._cancel({type:b.cancel,x:this.drag.x,y:this.drag.y})}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(b.destroy,{type:b.destroy}),this._emitter.off())}};import{AutoTicker as rt}from"tikki";var v=Symbol(),D=Symbol(),u=new rt({phases:[v,D]});function Lt(i,e,t){v=e,D=t,u=i}var Q=class extends q{constructor(){super(),this.drag=null,this._direction={x:0,y:0},this._speed=0,this._tick=this._tick.bind(this)}_createDragData(e){return{...super._createDragData(e),time:0,deltaTime:0}}_start(e){this.isDestroyed||this.drag||(super._start(e),u.on(v,this._tick,this._tick))}_end(e){this.drag&&(u.off(v,this._tick),super._end(e))}_cancel(e){this.drag&&(u.off(v,this._tick),super._cancel(e))}_tick(e){if(this.drag)if(e&&this.drag.time){this.drag.deltaTime=e-this.drag.time,this.drag.time=e;let t={type:"tick",time:this.drag.time,deltaTime:this.drag.deltaTime};if(this._emitter.emit("tick",t),!this.drag)return;let n=this._speed*(this.drag.deltaTime/1e3),r=this._direction.x*n,o=this._direction.y*n;(r||o)&&this._move({type:"move",x:this.drag.x+r,y:this.drag.y+o})}else this.drag.time=e,this.drag.deltaTime=0}};import{Emitter as ot}from"eventti";function ue(i,e){if("pointerId"in i)return i.pointerId===e?i:null;if("changedTouches"in i){let t=0;for(;t<i.changedTouches.length;t++)if(i.changedTouches[t].identifier===e)return i.changedTouches[t];return null}return i}function Me(i){return"pointerType"in i?i.pointerType:"touches"in i?"touch":"mouse"}function We(i){return"pointerId"in i?i.pointerId:"changedTouches"in i?i.changedTouches[0]?i.changedTouches[0].identifier:null:-1}var pe=typeof window<"u"&&typeof window.document<"u",Z=(()=>{let i=!1;try{let e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return i})(),Ve=pe&&"ontouchstart"in window,qe=pe&&!!window.PointerEvent,Ut=!!(pe&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&navigator.userAgent.indexOf("CriOS")==-1&&navigator.userAgent.indexOf("FxiOS")==-1);function fe(i={}){let{capture:e=!0,passive:t=!0}=i;return Z?{capture:e,passive:t}:{capture:e}}function ge(i){return i==="auto"||i===void 0?qe?"pointer":Ve?"touch":"mouse":i}var st={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},at={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},lt={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},X={pointer:st,touch:at,mouse:lt},N=class{constructor(e,t={}){let{listenerOptions:n={},sourceEvents:r="auto",startPredicate:o=s=>!("button"in s&&s.button>0)}=t;this.element=e,this.drag=null,this.isDestroyed=!1,this._areWindowListenersBound=!1,this._startPredicate=o,this._listenerOptions=fe(n),this._sourceEvents=ge(r),this._emitter=new ot,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),e.addEventListener(X[this._sourceEvents].start,this._onStart,this._listenerOptions)}_getTrackedPointerEventData(e){return this.drag?ue(e,this.drag.pointerId):null}_onStart(e){if(this.isDestroyed||this.drag||!this._startPredicate(e))return;let t=We(e);if(t===null)return;let n=ue(e,t);if(n===null)return;let r={pointerId:t,pointerType:Me(e),x:n.clientX,y:n.clientY};this.drag=r;let o={...r,type:b.start,srcEvent:e,target:n.target};this._emitter.emit(o.type,o),this.drag&&this._bindWindowListeners()}_onMove(e){if(!this.drag)return;let t=this._getTrackedPointerEventData(e);if(!t)return;this.drag.x=t.clientX,this.drag.y=t.clientY;let n={type:b.move,srcEvent:e,target:t.target,...this.drag};this._emitter.emit(n.type,n)}_onCancel(e){if(!this.drag)return;let t=this._getTrackedPointerEventData(e);if(!t)return;this.drag.x=t.clientX,this.drag.y=t.clientY;let n={type:b.cancel,srcEvent:e,target:t.target,...this.drag};this._emitter.emit(n.type,n),this._resetDrag()}_onEnd(e){if(!this.drag)return;let t=this._getTrackedPointerEventData(e);if(!t)return;this.drag.x=t.clientX,this.drag.y=t.clientY;let n={type:b.end,srcEvent:e,target:t.target,...this.drag};this._emitter.emit(n.type,n),this._resetDrag()}_bindWindowListeners(){if(this._areWindowListenersBound)return;let{move:e,end:t,cancel:n}=X[this._sourceEvents];window.addEventListener(e,this._onMove,this._listenerOptions),window.addEventListener(t,this._onEnd,this._listenerOptions),n&&window.addEventListener(n,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!0}_unbindWindowListeners(){if(this._areWindowListenersBound){let{move:e,end:t,cancel:n}=X[this._sourceEvents];window.removeEventListener(e,this._onMove,this._listenerOptions),window.removeEventListener(t,this._onEnd,this._listenerOptions),n&&window.removeEventListener(n,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!1}}_resetDrag(){this.drag=null,this._unbindWindowListeners()}cancel(){if(!this.drag)return;let e={type:b.cancel,srcEvent:null,target:null,...this.drag};this._emitter.emit(e.type,e),this._resetDrag()}updateSettings(e){if(this.isDestroyed)return;let{listenerOptions:t,sourceEvents:n,startPredicate:r}=e,o=ge(n),s=fe(t);r&&this._startPredicate!==r&&(this._startPredicate=r),(t&&(this._listenerOptions.capture!==s.capture||this._listenerOptions.passive===s.passive)||n&&this._sourceEvents!==o)&&(this.element.removeEventListener(X[this._sourceEvents].start,this._onStart,this._listenerOptions),this._unbindWindowListeners(),this.cancel(),n&&(this._sourceEvents=o),t&&s&&(this._listenerOptions=s),this.element.addEventListener(X[this._sourceEvents].start,this._onStart,this._listenerOptions))}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(b.destroy,{type:b.destroy}),this._emitter.off(),this.element.removeEventListener(X[this._sourceEvents].start,this._onStart,this._listenerOptions))}};var M={moveDistance:25,cancelOnBlur:!0,cancelOnVisibilityChange:!0,startPredicate:(i,e)=>{if(e.element&&(i.key==="Enter"||i.key===" ")&&document.activeElement===e.element){let{left:t,top:n}=e.element.getBoundingClientRect();return{x:t,y:n}}return null},movePredicate:(i,e)=>{if(!e.drag)return null;switch(i.key){case"ArrowLeft":return{x:e.drag.x-e.moveDistance.x,y:e.drag.y};case"ArrowRight":return{x:e.drag.x+e.moveDistance.x,y:e.drag.y};case"ArrowUp":return{x:e.drag.x,y:e.drag.y-e.moveDistance.y};case"ArrowDown":return{x:e.drag.x,y:e.drag.y+e.moveDistance.y};default:return null}},cancelPredicate:(i,e)=>e.drag&&i.key==="Escape"?{x:e.drag.x,y:e.drag.y}:null,endPredicate:(i,e)=>e.drag&&(i.key==="Enter"||i.key===" ")?{x:e.drag.x,y:e.drag.y}:null},Xe=class extends q{constructor(e,t={}){super();let{moveDistance:n=M.moveDistance,cancelOnBlur:r=M.cancelOnBlur,cancelOnVisibilityChange:o=M.cancelOnVisibilityChange,startPredicate:s=M.startPredicate,movePredicate:a=M.movePredicate,cancelPredicate:c=M.cancelPredicate,endPredicate:l=M.endPredicate}=t;this.element=e,this.moveDistance=typeof n=="number"?{x:n,y:n}:{...n},this._cancelOnBlur=r,this._cancelOnVisibilityChange=o,this._startPredicate=s,this._movePredicate=a,this._cancelPredicate=c,this._endPredicate=l,this._onKeyDown=this._onKeyDown.bind(this),this._internalCancel=this._internalCancel.bind(this),document.addEventListener("keydown",this._onKeyDown),r&&e?.addEventListener("blur",this._internalCancel),o&&document.addEventListener("visibilitychange",this._internalCancel)}_internalCancel(){this.cancel()}_onKeyDown(e){if(!this.drag){let o=this._startPredicate(e,this);o&&(e.preventDefault(),this._start({type:"start",x:o.x,y:o.y,srcEvent:e}));return}let t=this._cancelPredicate(e,this);if(t){e.preventDefault(),this._cancel({type:"cancel",x:t.x,y:t.y,srcEvent:e});return}let n=this._endPredicate(e,this);if(n){e.preventDefault(),this._end({type:"end",x:n.x,y:n.y,srcEvent:e});return}let r=this._movePredicate(e,this);if(r){e.preventDefault(),this._move({type:"move",x:r.x,y:r.y,srcEvent:e});return}}updateSettings(e={}){let{moveDistance:t,cancelOnBlur:n,cancelOnVisibilityChange:r,startPredicate:o,movePredicate:s,cancelPredicate:a,endPredicate:c}=e;t!==void 0&&(typeof t=="number"?this.moveDistance.x=this.moveDistance.y=t:(this.moveDistance.x=t.x,this.moveDistance.y=t.y)),n!==void 0&&this._cancelOnBlur!==n&&(this._cancelOnBlur=n,n?this.element?.addEventListener("blur",this._internalCancel):this.element?.removeEventListener("blur",this._internalCancel)),r!==void 0&&this._cancelOnVisibilityChange!==r&&(this._cancelOnVisibilityChange=r,r?document.addEventListener("visibilitychange",this._internalCancel):document.removeEventListener("visibilitychange",this._internalCancel)),o&&(this._startPredicate=o),s&&(this._movePredicate=s),a&&(this._cancelPredicate=a),c&&(this._endPredicate=c)}destroy(){this.isDestroyed||(super.destroy(),document.removeEventListener("keydown",this._onKeyDown),this._cancelOnBlur&&this.element?.removeEventListener("blur",this._internalCancel),this._cancelOnVisibilityChange&&document.removeEventListener("visibilitychange",this._internalCancel))}};var ct=["start","cancel","end","moveLeft","moveRight","moveUp","moveDown"];function ee(i,e){if(!i.size||!e.size)return 1/0;let t=1/0;for(let n of i){let r=e.get(n);r!==void 0&&r<t&&(t=r)}return t}var I={startKeys:[" ","Enter"],moveLeftKeys:["ArrowLeft"],moveRightKeys:["ArrowRight"],moveUpKeys:["ArrowUp"],moveDownKeys:["ArrowDown"],cancelKeys:["Escape"],endKeys:[" ","Enter"],cancelOnBlur:!0,cancelOnVisibilityChange:!0,computeSpeed:()=>500,startPredicate:(i,e)=>{if(e.element&&document.activeElement===e.element){let{left:t,top:n}=e.element.getBoundingClientRect();return{x:t,y:n}}return null}},Ne=class extends Q{constructor(e,t={}){super();let{startPredicate:n=I.startPredicate,computeSpeed:r=I.computeSpeed,cancelOnVisibilityChange:o=I.cancelOnVisibilityChange,cancelOnBlur:s=I.cancelOnBlur,startKeys:a=I.startKeys,moveLeftKeys:c=I.moveLeftKeys,moveRightKeys:l=I.moveRightKeys,moveUpKeys:d=I.moveUpKeys,moveDownKeys:m=I.moveDownKeys,cancelKeys:y=I.cancelKeys,endKeys:S=I.endKeys}=t;this.element=e,this._startKeys=new Set(a),this._cancelKeys=new Set(y),this._endKeys=new Set(S),this._moveLeftKeys=new Set(c),this._moveRightKeys=new Set(l),this._moveUpKeys=new Set(d),this._moveDownKeys=new Set(m),this._moveKeys=new Set([...c,...l,...d,...m]),this._moveKeyTimestamps=new Map,this._cancelOnBlur=s,this._cancelOnVisibilityChange=o,this._computeSpeed=r,this._startPredicate=n,this._onKeyDown=this._onKeyDown.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onTick=this._onTick.bind(this),this._internalCancel=this._internalCancel.bind(this),this.on("tick",this._onTick,this._onTick),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("keyup",this._onKeyUp),s&&e?.addEventListener("blur",this._internalCancel),o&&document.addEventListener("visibilitychange",this._internalCancel)}_end(e){this.drag&&(this._moveKeyTimestamps.clear(),this._direction.x=0,this._direction.y=0,super._end(e))}_cancel(e){this.drag&&(this._moveKeyTimestamps.clear(),this._direction.x=0,this._direction.y=0,super._cancel(e))}_internalCancel(){this.cancel()}_updateDirection(){let e=ee(this._moveLeftKeys,this._moveKeyTimestamps),t=ee(this._moveRightKeys,this._moveKeyTimestamps),n=ee(this._moveUpKeys,this._moveKeyTimestamps),r=ee(this._moveDownKeys,this._moveKeyTimestamps),o=e===t?0:e<t?-1:1,s=n===r?0:n<r?-1:1;if(!(o===0||s===0)){let a=1/(Math.sqrt(o*o+s*s)||1);o*=a,s*=a}this._direction.x=o,this._direction.y=s}_onTick(){this._speed=this._computeSpeed(this)}_onKeyUp(e){this._moveKeyTimestamps.get(e.key)&&(this._moveKeyTimestamps.delete(e.key),this._updateDirection())}_onKeyDown(e){if(!this.drag){if(this._startKeys.has(e.key)){let t=this._startPredicate(e,this);t&&(e.preventDefault(),this._start({type:"start",x:t.x,y:t.y}))}return}if(this._cancelKeys.has(e.key)){e.preventDefault(),this._internalCancel();return}if(this._endKeys.has(e.key)){e.preventDefault(),this._end({type:"end",x:this.drag.x,y:this.drag.y});return}if(this._moveKeys.has(e.key)){e.preventDefault(),this._moveKeyTimestamps.get(e.key)||(this._moveKeyTimestamps.set(e.key,Date.now()),this._updateDirection());return}}updateSettings(e={}){let t=!1,{cancelOnBlur:n,cancelOnVisibilityChange:r,startPredicate:o,computeSpeed:s}=e;if(n!==void 0&&this._cancelOnBlur!==n&&(this._cancelOnBlur=n,n?this.element?.addEventListener("blur",this._internalCancel):this.element?.removeEventListener("blur",this._internalCancel)),r!==void 0&&this._cancelOnVisibilityChange!==r&&(this._cancelOnVisibilityChange=r,r?document.addEventListener("visibilitychange",this._internalCancel):document.removeEventListener("visibilitychange",this._internalCancel)),o!==void 0&&(this._startPredicate=o),s!==void 0&&(this._computeSpeed=s),ct.forEach((a,c)=>{let l=`${a}Keys`,d=e[l];d!==void 0&&(this[`_${l}`]=new Set(d),c>=3&&(t=!0))}),t){let a=[...this._moveLeftKeys,...this._moveRightKeys,...this._moveUpKeys,...this._moveDownKeys];[...this._moveKeys].every((l,d)=>a[d]===l)||(this._moveKeys=new Set(a),this._moveKeyTimestamps.clear(),this._updateDirection())}}destroy(){this.isDestroyed||(super.destroy(),this.off("tick",this._onTick),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp),this._cancelOnBlur&&this.element?.removeEventListener("blur",this._internalCancel),this._cancelOnVisibilityChange&&document.removeEventListener("visibilitychange",this._internalCancel))}};import{Emitter as ut}from"eventti";var te=class{constructor(e,t){this.sensor=e,this.isEnded=!1,this.event=t,this.prevEvent=t,this.startEvent=t,this.endEvent=null,this.items=[]}};import{getOffsetContainer as Be}from"mezr";var Ue=new WeakMap;function ne(i){let e=Ue.get(i)?.deref();return e||(e=window.getComputedStyle(i,null),Ue.set(i,new WeakRef(e))),e}import{getOffset as Ye}from"mezr";function ie(i,e,t={left:0,top:0}){if(t.left=0,t.top=0,i===e)return t;let n=Ye([i,"padding"]),r=Ye([e,"padding"]);return t.left=r.left-n.left,t.top=r.top-n.top,t}var dt={left:0,top:0},ht="matrix(1, 0, 0, 1, 0, 0)",mt="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",re=class{constructor(e,t){if(!e.isConnected)throw new Error("Element is not connected");let n=t.drag?.sensor;if(!n)throw new Error("Sensor is not defined");let r=this,o=ne(e),s=e.getBoundingClientRect();this.data={},this.element=e,this.frozenProps=null,this.unfrozenProps=null,this.position={x:0,y:0},this._updateDiff={x:0,y:0},this._moveDiff={x:0,y:0},this._containerDiff={x:0,y:0};let a=e.parentElement;if(!a)throw new Error("Element does not have a parent element.");this.elementContainer=a;let c=Be(e);if(!c)throw new Error("Offset container could not be computed for the element!");this.elementOffsetContainer=c;let l=t.settings.container||a;this.dragContainer=l;let d=l===a?c:Be(e,{container:l});if(!d)throw new Error("Drag offset container could not be computed for the element!");this.dragOffsetContainer=d;{let{left:_,top:p,width:g,height:x}=s;this.clientRect={left:_,top:p,width:g,height:x}}if(c!==d){let{left:_,top:p}=ie(d,c,dt);this._containerDiff.x=_,this._containerDiff.y=p}let{transform:m}=o;m&&m!=="none"&&m!==ht&&m!==mt?this.initialTransform=m:this.initialTransform="";let{x:y,y:S}=t.settings.getStartPosition({draggable:t,sensor:n,item:r,style:o});this.position.x=y,this.position.y=S;let E=t.settings.getFrozenProps({draggable:t,sensor:n,item:r,style:o});if(Array.isArray(E))if(E.length){let _={};for(let p of E)_[p]=o[p];this.frozenProps=_}else this.frozenProps=null;else this.frozenProps=E;if(this.frozenProps){let _={};for(let p in this.frozenProps)this.frozenProps.hasOwnProperty(p)&&(_[p]=e.style[p]);this.unfrozenProps=_}}updateSize(e){if(e)this.clientRect.width=e.width,this.clientRect.height=e.height;else{let t=this.element.getBoundingClientRect();this.clientRect.width=t.width,this.clientRect.height=t.height}}};var ze=Z?{capture:!0,passive:!0}:!0,pt={left:0,top:0},Se={x:0,y:0};function ft(){return{container:null,startPredicate:()=>!0,getElements:()=>null,releaseElements:()=>null,getFrozenProps:()=>null,getStartPosition:()=>({x:0,y:0}),setPosition:({item:i,x:e,y:t})=>{i.element.style.transform=`translate(${e}px, ${t}px) ${i.initialTransform}`},getPositionChange:({event:i,prevEvent:e})=>(Se.x=i.x-e.x,Se.y=i.y-e.y,Se)}}var He=class{constructor(e,t={}){this.sensors=e,this.settings=this._parseSettings(t),this.plugins={},this.drag=null,this.isDestroyed=!1,this._sensorData=new Map,this._emitter=new ut,this._startId=Symbol(),this._moveId=Symbol(),this._updateId=Symbol(),this._onMove=this._onMove.bind(this),this._onScroll=this._onScroll.bind(this),this._onEnd=this._onEnd.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._preparePositionUpdate=this._preparePositionUpdate.bind(this),this._applyPositionUpdate=this._applyPositionUpdate.bind(this),this.sensors.forEach(n=>{this._sensorData.set(n,{predicateState:0,predicateEvent:null,onMove:s=>this._onMove(s,n),onEnd:s=>this._onEnd(s,n)});let{onMove:r,onEnd:o}=this._sensorData.get(n);n.on("start",r,r),n.on("move",r,r),n.on("cancel",o,o),n.on("end",o,o),n.on("destroy",o,o)})}_parseSettings(e,t=ft()){let{container:n=t.container,startPredicate:r=t.startPredicate,getElements:o=t.getElements,releaseElements:s=t.releaseElements,getFrozenProps:a=t.getFrozenProps,getStartPosition:c=t.getStartPosition,setPosition:l=t.setPosition,getPositionChange:d=t.getPositionChange}=e||{};return{container:n,startPredicate:r,getElements:o,releaseElements:s,getFrozenProps:a,getStartPosition:c,setPosition:l,getPositionChange:d}}_emit(e,...t){this._emitter.emit(e,...t)}_onMove(e,t){let n=this._sensorData.get(t);if(n)switch(n.predicateState){case 0:{n.predicateEvent=e;let r=this.settings.startPredicate({draggable:this,sensor:t,event:e});r===!0?this.resolveStartPredicate(t):r===!1&&this.rejectStartPredicate(t);break}case 1:{this.drag&&(this.drag.event=e,u.once(v,this._prepareMove,this._moveId),u.once(D,this._applyMove,this._moveId));break}}}_onScroll(){this.updatePosition()}_onEnd(e,t){let n=this._sensorData.get(t);n&&(this.drag?n.predicateState===1&&(this.drag.endEvent=e,this._sensorData.forEach(r=>{r.predicateState=0,r.predicateEvent=null}),this.stop()):(n.predicateState=0,n.predicateEvent=null))}_prepareStart(){let e=this.drag;if(!e)return;let t=this.settings.getElements({draggable:this,sensor:e.sensor,startEvent:e.startEvent})||[];e.items=t.map(n=>new re(n,this)),this._emit("preparestart",e.startEvent)}_applyStart(){let e=this.drag;if(!e)return;let{container:t}=this.settings;for(let n of e.items)t&&n.element.parentElement!==t&&(t.appendChild(n.element),n.position.x+=n._containerDiff.x,n.position.y+=n._containerDiff.y),n.frozenProps&&Object.assign(n.element.style,n.frozenProps),this.settings.setPosition({phase:"start",draggable:this,sensor:e.sensor,item:n,x:n.position.x,y:n.position.y});window.addEventListener("scroll",this._onScroll,ze),this._emit("start",e.startEvent)}_prepareMove(){let e=this.drag;if(!e)return;let{event:t,prevEvent:n,startEvent:r,sensor:o}=e;if(t!==n){for(let s of e.items){let{x:a,y:c}=this.settings.getPositionChange({draggable:this,sensor:o,item:s,event:t,prevEvent:n,startEvent:r});a&&(s.position.x+=a,s.clientRect.left+=a,s._moveDiff.x+=a),c&&(s.position.y+=c,s.clientRect.top+=c,s._moveDiff.y+=c)}e.prevEvent=t,this._emit("preparemove",t)}}_applyMove(){let e=this.drag;if(e){for(let t of e.items)t._moveDiff.x=0,t._moveDiff.y=0,this.settings.setPosition({phase:"move",draggable:this,sensor:e.sensor,item:t,x:t.position.x,y:t.position.y});e.event&&this._emit("move",e.event)}}_preparePositionUpdate(){let{drag:e}=this;if(e)for(let t of e.items){if(t.elementOffsetContainer!==t.dragOffsetContainer){let{left:l,top:d}=ie(t.dragOffsetContainer,t.elementOffsetContainer,pt);t._containerDiff.x=l,t._containerDiff.y=d}let{left:n,top:r,width:o,height:s}=t.element.getBoundingClientRect(),a=t.clientRect.left-t._moveDiff.x-n;t.position.x=t.position.x-t._updateDiff.x+a,t._updateDiff.x=a;let c=t.clientRect.top-t._moveDiff.y-r;t.position.y=t.position.y-t._updateDiff.y+c,t._updateDiff.y=c,t.clientRect.width=o,t.clientRect.height=s}}_applyPositionUpdate(){let{drag:e}=this;if(e)for(let t of e.items)t._updateDiff.x=0,t._updateDiff.y=0,this.settings.setPosition({phase:"move",draggable:this,sensor:e.sensor,item:t,x:t.position.x,y:t.position.y})}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}resolveStartPredicate(e,t){let n=this._sensorData.get(e);if(!n)return;let r=t||n.predicateEvent;n.predicateState===0&&r&&(n.predicateState=1,n.predicateEvent=null,this.drag=new te(e,r),this._sensorData.forEach((o,s)=>{s!==e&&(o.predicateState=2,o.predicateEvent=null)}),u.once(v,this._prepareStart,this._startId),u.once(D,this._applyStart,this._startId))}rejectStartPredicate(e){let t=this._sensorData.get(e);t?.predicateState===0&&(t.predicateState=2,t.predicateEvent=null)}stop(){let e=this.drag;if(!e||e.isEnded)return;e.isEnded=!0,u.off(v,this._startId),u.off(D,this._startId),u.off(v,this._moveId),u.off(D,this._moveId),u.off(v,this._updateId),u.off(D,this._updateId),window.removeEventListener("scroll",this._onScroll,ze);let t=[];for(let n of e.items){if(t.push(n.element),n.elementContainer&&n.element.parentElement!==n.elementContainer&&(n.position.x-=n._containerDiff.x,n.position.y-=n._containerDiff.y,n._containerDiff.x=0,n._containerDiff.y=0,n.elementContainer.appendChild(n.element)),n.unfrozenProps)for(let r in n.unfrozenProps)n.element.style[r]=n.unfrozenProps[r]||"";this.settings.setPosition({phase:"end",draggable:this,sensor:e.sensor,item:n,x:n.position.x,y:n.position.y})}t.length&&this.settings.releaseElements({draggable:this,sensor:e.sensor,elements:t}),this._emit("end",e.endEvent),this.drag=null}updatePosition(e=!1){this.drag&&(e?(this._preparePositionUpdate(),this._applyPositionUpdate()):(u.once(v,this._preparePositionUpdate,this._updateId),u.once(D,this._applyPositionUpdate,this._updateId)))}updateSettings(e={}){this.settings=this._parseSettings(e,this.settings)}use(e){return e(this)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.stop(),this._sensorData.forEach(({onMove:e,onEnd:t},n)=>{n.off("start",e),n.off("move",e),n.off("cancel",t),n.off("end",t),n.off("destroy",t)}),this._sensorData.clear(),this._emit("destroy"),this._emitter.off())}};import{Emitter as St}from"eventti";import{getDistance as Et,getRect as Fe}from"mezr";var G=class{constructor(e,t){this._data=[],this._createObject=e,this._onPut=t}pick(){return this._data.length?this._data.pop():this._createObject()}put(e){this._data.indexOf(e)===-1&&(this._onPut&&this._onPut(e),this._data.push(e))}reset(){this._data.length=0}};import{getIntersection as gt}from"mezr";function Ge(i,e){let t=gt(i,e);return t?t.width*t.height:0}function Ee(i,e){let t=Ge(i,e);if(!t)return 0;let n=Math.min(i.width,e.width)*Math.min(i.height,e.height);return t/n*100}function w(i){return i instanceof Window}function ve(i){return w(i)||i===document.documentElement||i===document.body?window:i}function U(i){return w(i)?i.pageXOffset:i.scrollLeft}function _e(i){return w(i)&&(i=document.documentElement),i.scrollWidth-i.clientWidth}function Y(i){return w(i)?i.pageYOffset:i.scrollTop}function ye(i){return w(i)&&(i=document.documentElement),i.scrollHeight-i.clientHeight}function be(i,e){return!(i.right<=e.left||e.right<=i.left||i.bottom<=e.top||e.bottom<=i.top)}var Te={width:0,height:0,left:0,right:0,top:0,bottom:0},je={...Te},$e=50,A={direction:"none",threshold:0,distance:0,value:0,maxValue:0,duration:0,speed:0,deltaTime:0,isEnding:!1},h={x:1,y:2},W={forward:4,reverse:8},oe={none:0,left:h.x|W.reverse,right:h.x|W.forward},F={none:0,up:h.y|W.reverse,down:h.y|W.forward},f={...oe,...F};function De(i){switch(i){case oe.none:case F.none:return"none";case oe.left:return"left";case oe.right:return"right";case F.up:return"up";case F.down:return"down";default:throw new Error(`Unknown direction value: ${i}`)}}function Je(i,e,t){let{left:n=0,right:r=0,top:o=0,bottom:s=0}=e;return n=Math.max(0,n),r=Math.max(0,r),o=Math.max(0,o),s=Math.max(0,s),t.width=i.width+n+r,t.height=i.height+o+s,t.left=i.left-n,t.top=i.top-o,t.right=i.right+r,t.bottom=i.bottom+s,t}function se(i,e){return Math.ceil(i)>=Math.floor(e)}function xe(i,e){return Math.min(e/2,i)}function Pe(i,e,t,n){return Math.max(0,t+i*2+n*e-n)/2}var Ie=class{constructor(){this.positionX=0,this.positionY=0,this.directionX=f.none,this.directionY=f.none,this.overlapCheckRequestTime=0}},we=class{constructor(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}reset(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}addRequest(e){h.x&e.direction?(this.requestX&&this.removeRequest(this.requestX),this.requestX=e):(this.requestY&&this.removeRequest(this.requestY),this.requestY=e),e.action=this}removeRequest(e){this.requestX===e?(this.requestX=null,e.action=null):this.requestY===e&&(this.requestY=null,e.action=null)}computeScrollValues(){this.element&&(this.scrollLeft=this.requestX?this.requestX.value:U(this.element),this.scrollTop=this.requestY?this.requestY.value:Y(this.element))}scroll(){this.element&&(this.element.scrollTo?this.element.scrollTo(this.scrollLeft,this.scrollTop):(this.element.scrollLeft=this.scrollLeft,this.element.scrollTop=this.scrollTop))}},Ae=class{constructor(){this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}reset(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}hasReachedEnd(){return W.forward&this.direction?se(this.value,this.maxValue):this.value<=0}computeCurrentScrollValue(){return this.element?this.value!==this.value?h.x&this.direction?U(this.element):Y(this.element):Math.max(0,Math.min(this.value,this.maxValue)):0}computeNextScrollValue(){let e=this.speed*(this.deltaTime/1e3),t=W.forward&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(t,this.maxValue))}computeSpeed(){if(!this.item||!this.element)return 0;let{speed:e}=this.item;return typeof e=="function"?(A.direction=De(this.direction),A.threshold=this.threshold,A.distance=this.distance,A.value=this.value,A.maxValue=this.maxValue,A.duration=this.duration,A.speed=this.speed,A.deltaTime=this.deltaTime,A.isEnding=this.isEnding,e(this.element,A)):e}tick(e){return this.isActive||(this.isActive=!0,this.onStart()),this.deltaTime=e,this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(),this.value=this.computeNextScrollValue(),this.duration+=e,this.value}onStart(){if(!this.item||!this.element)return;let{onStart:e}=this.item;typeof e=="function"&&e(this.element,De(this.direction))}onStop(){if(!this.item||!this.element)return;let{onStop:e}=this.item;typeof e=="function"&&e(this.element,De(this.direction))}};function Qe(i=500,e=.5,t=.25){let n=i*(e>0?1/e:1/0),r=i*(t>0?1/t:1/0);return function(o,s){let a=0;if(!s.isEnding)if(s.threshold>0){let d=s.threshold-Math.max(0,s.distance);a=i/s.threshold*d}else a=i;let c=s.speed;if(c===a)return a;let l=a;return c<a?(l=c+n*(s.deltaTime/1e3),Math.min(a,l)):(l=c-r*(s.deltaTime/1e3),Math.max(a,l))}}var ae=class{constructor(e={}){let{overlapCheckInterval:t=150}=e;this.items=[],this.settings={overlapCheckInterval:t},this._actions=[],this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._requests={[h.x]:new Map,[h.y]:new Map},this._itemData=new Map,this._requestPool=new G(()=>new Ae,n=>n.reset()),this._actionPool=new G(()=>new we,n=>n.reset()),this._emitter=new St,this._frameRead=this._frameRead.bind(this),this._frameWrite=this._frameWrite.bind(this)}_frameRead(e){this._isDestroyed||(e&&this._tickTime?(this._tickDeltaTime=e-this._tickTime,this._tickTime=e,this._updateItems(),this._updateRequests(),this._updateActions()):(this._tickTime=e,this._tickDeltaTime=0))}_frameWrite(){this._isDestroyed||this._applyActions()}_startTicking(){this._isTicking||(this._isTicking=!0,u.on(v,this._frameRead,this._frameRead),u.on(D,this._frameWrite,this._frameWrite))}_stopTicking(){this._isTicking&&(this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,u.off(v,this._frameRead),u.off(D,this._frameWrite))}_getItemClientRect(e,t={width:0,height:0,left:0,right:0,top:0,bottom:0}){let{clientRect:n}=e;return t.left=n.left,t.top=n.top,t.width=n.width,t.height=n.height,t.right=n.left+n.width,t.bottom=n.top+n.height,t}_requestItemScroll(e,t,n,r,o,s,a){let c=this._requests[t],l=c.get(e);l?(l.element!==n||l.direction!==r)&&l.reset():(l=this._requestPool.pick(),c.set(e,l)),l.item=e,l.element=n,l.direction=r,l.threshold=o,l.distance=s,l.maxValue=a}_cancelItemScroll(e,t){let n=this._requests[t],r=n.get(e);r&&(r.action&&r.action.removeRequest(r),this._requestPool.put(r),n.delete(e))}_checkItemOverlap(e,t,n){let{inertAreaSize:r,targets:o}=e;if(!o.length){t&&this._cancelItemScroll(e,h.x),n&&this._cancelItemScroll(e,h.y);return}let s=this._itemData.get(e),a=s?.directionX,c=s?.directionY;if(!a&&!c){t&&this._cancelItemScroll(e,h.x),n&&this._cancelItemScroll(e,h.y);return}let l=this._getItemClientRect(e,Te),d=null,m=-1/0,y=0,S=-1/0,E=f.none,_=0,p=0,g=null,x=-1/0,B=0,z=-1/0,ce=f.none,Le=0,Re=0,de=0;for(;de<o.length;de++){let C=o[de],Ke=typeof C.threshold=="number"?C.threshold:$e,he=!!(t&&a&&C.axis!=="y"),me=!!(n&&c&&C.axis!=="x"),K=C.priority||0;if((!he||K<m)&&(!me||K<x))continue;let O=ve(C.element||C),$=he?_e(O):-1,J=me?ye(O):-1;if($<=0&&J<=0)continue;let P=Fe([O,"padding"],window),V=Ee(l,P)||-1/0;if(V===-1/0)if(C.padding&&be(l,Je(P,C.padding,je)))V=-(Et(l,P)||0);else continue;if(he&&K>=m&&$>0&&(K>m||V>S)){let T=0,k=f.none,L=xe(Ke,P.width),H=Pe(L,r,l.width,P.width);a===f.right?(T=P.right+H-l.right,T<=L&&!se(U(O),$)&&(k=f.right)):a===f.left&&(T=l.left-(P.left-H),T<=L&&U(O)>0&&(k=f.left)),k&&(d=O,m=K,y=L,S=V,E=k,_=T,p=$)}if(me&&K>=x&&J>0&&(K>x||V>z)){let T=0,k=F.none,L=xe(Ke,P.height),H=Pe(L,r,l.height,P.height);c===f.down?(T=P.bottom+H-l.bottom,T<=L&&!se(Y(O),J)&&(k=f.down)):c===f.up&&(T=l.top-(P.top-H),T<=L&&Y(O)>0&&(k=f.up)),k&&(g=O,x=K,B=L,z=V,ce=k,Le=T,Re=J)}}t&&(d&&E?this._requestItemScroll(e,h.x,d,E,y,_,p):this._cancelItemScroll(e,h.x)),n&&(g&&ce?this._requestItemScroll(e,h.y,g,ce,B,Le,Re):this._cancelItemScroll(e,h.y))}_updateScrollRequest(e){let t=e.item,{inertAreaSize:n,smoothStop:r,targets:o}=t,s=this._getItemClientRect(t,Te),a=null,c=0;for(;c<o.length;c++){let l=o[c],d=ve(l.element||l);if(d!==e.element)continue;let m=!!(h.x&e.direction);if(m){if(l.axis==="y")continue}else if(l.axis==="x")continue;let y=m?_e(d):ye(d);if(y<=0)break;let S=Fe([d,"padding"],window);if((Ee(s,S)||-1/0)===-1/0){let z=l.scrollPadding||l.padding;if(!(z&&be(s,Je(S,z,je))))break}let _=typeof l.threshold=="number"?l.threshold:$e,p=xe(_,m?S.width:S.height),g=Pe(p,n,m?s.width:s.height,m?S.width:S.height),x=0;if(e.direction===f.left?x=s.left-(S.left-g):e.direction===f.right?x=S.right+g-s.right:e.direction===f.up?x=s.top-(S.top-g):x=S.bottom+g-s.bottom,x>p)break;let B=m?U(d):Y(d);if(a=W.forward&e.direction?se(B,y):B<=0,a)break;return e.maxValue=y,e.threshold=p,e.distance=x,e.isEnding=!1,!0}return r===!0&&e.speed>0?(a===null&&(a=e.hasReachedEnd()),e.isEnding=!a):e.isEnding=!1,e.isEnding}_updateItems(){for(let e=0;e<this.items.length;e++){let t=this.items[e],n=this._itemData.get(t),{x:r,y:o}=t.position,s=n.positionX,a=n.positionY;r===s&&o===a||(n.directionX=r>s?f.right:r<s?f.left:n.directionX,n.directionY=o>a?f.down:o<a?f.up:n.directionY,n.positionX=r,n.positionY=o,n.overlapCheckRequestTime===0&&(n.overlapCheckRequestTime=this._tickTime))}}_updateRequests(){let e=this.items,t=this._requests[h.x],n=this._requests[h.y],r=0;for(;r<e.length;r++){let o=e[r],s=this._itemData.get(o),a=s.overlapCheckRequestTime,c=a>0&&this._tickTime-a>this.settings.overlapCheckInterval,l=!0,d=t.get(o);d&&d.isActive&&(l=!this._updateScrollRequest(d),l&&(c=!0,this._cancelItemScroll(o,h.x)));let m=!0,y=n.get(o);y&&y.isActive&&(m=!this._updateScrollRequest(y),m&&(c=!0,this._cancelItemScroll(o,h.y))),c&&(s.overlapCheckRequestTime=0,this._checkItemOverlap(o,l,m))}}_requestAction(e,t){let n=t===h.x,r=null,o=0;for(;o<this._actions.length;o++){if(r=this._actions[o],e.element!==r.element){r=null;continue}if(n?r.requestX:r.requestY){this._cancelItemScroll(e.item,t);return}break}r||(r=this._actionPool.pick()),r.element=e.element,r.addRequest(e),e.tick(this._tickDeltaTime),this._actions.push(r)}_updateActions(){let e=0;for(e=0;e<this.items.length;e++){let t=this.items[e],n=this._requests[h.x].get(t),r=this._requests[h.y].get(t);n&&this._requestAction(n,h.x),r&&this._requestAction(r,h.y)}for(e=0;e<this._actions.length;e++)this._actions[e].computeScrollValues()}_applyActions(){if(!this._actions.length)return;this._emitter.emit("beforescroll");let e=0;for(e=0;e<this._actions.length;e++)this._actions[e].scroll(),this._actionPool.put(this._actions[e]);this._actions.length=0;let t;for(e=0;e<this.items.length;e++)t=this.items[e],t.onPrepareScrollEffect&&t.onPrepareScrollEffect();for(e=0;e<this.items.length;e++)t=this.items[e],t.onApplyScrollEffect&&t.onApplyScrollEffect();this._emitter.emit("afterscroll")}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}addItem(e){if(this._isDestroyed||this._itemData.has(e))return;let{x:t,y:n}=e.position,r=new Ie;r.positionX=t,r.positionY=n,r.directionX=f.none,r.directionY=f.none,r.overlapCheckRequestTime=this._tickTime,this._itemData.set(e,r),this.items.push(e),this._isTicking||this._startTicking()}removeItem(e){if(this._isDestroyed)return;let t=this.items.indexOf(e);t!==-1&&(this._requests[h.x].get(e)&&(this._cancelItemScroll(e,h.x),this._requests[h.x].delete(e)),this._requests[h.y].get(e)&&(this._cancelItemScroll(e,h.y),this._requests[h.y].delete(e)),this._itemData.delete(e),this.items.splice(t,1),this._isTicking&&!this.items.length&&this._stopTicking())}isDestroyed(){return this._isDestroyed}isItemScrollingX(e){return!!this._requests[h.x].get(e)?.isActive}isItemScrollingY(e){return!!this._requests[h.y].get(e)?.isActive}isItemScrolling(e){return this.isItemScrollingX(e)||this.isItemScrollingY(e)}updateSettings(e={}){let{overlapCheckInterval:t=this.settings.overlapCheckInterval}=e;this.settings.overlapCheckInterval=t}destroy(){if(this._isDestroyed)return;let e=this.items.slice(0),t=0;for(;t<e.length;t++)this.removeItem(e[t]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._emitter.off(),this._isDestroyed=!0}};var Ce=new ae;var j={x:0,y:0},R={left:0,top:0,width:0,height:0};function vt(){return{targets:[],inertAreaSize:.2,speed:Qe(),smoothStop:!1,getPosition:i=>{let{drag:e}=i,t=e?.items[0];if(t)j.x=t.position.x,j.y=t.position.y;else{let n=e&&(e.event||e.startEvent);j.x=n?n.x:0,j.y=n?n.y:0}return j},getClientRect:i=>{let{drag:e}=i,t=e?.items[0];if(t&&t.element){let{left:n,top:r,width:o,height:s}=t.clientRect;R.left=n,R.top=r,R.width=o,R.height=s}else{let n=e&&(e.event||e.startEvent);R.left=n?n.x-25:0,R.top=n?n.y-25:0,R.width=n?50:0,R.height=n?50:0}return R},onStart:null,onStop:null}}var Oe=class{constructor(e,t){this._draggableAutoScroll=e,this._draggable=t,this._position={x:0,y:0},this._clientRect={left:0,top:0,width:0,height:0}}_getSettings(){return this._draggableAutoScroll.settings}get targets(){let{targets:e}=this._getSettings();return typeof e=="function"&&(e=e(this._draggable)),e}get position(){let{getPosition:e}=this._getSettings();if(typeof e=="function"){let t=e(this._draggable);this._position.x=t.x,this._position.y=t.y}else this._position.x=0,this._position.y=0;return this._position}get clientRect(){let{getClientRect:e}=this._getSettings();if(typeof e=="function"){let{left:t,top:n,width:r,height:o}=e(this._draggable);this._clientRect.left=t,this._clientRect.top=n,this._clientRect.width=r,this._clientRect.height=o}else this._clientRect.left=0,this._clientRect.top=0,this._clientRect.width=0,this._clientRect.height=0;return this._clientRect}get inertAreaSize(){return this._getSettings().inertAreaSize}get smoothStop(){return this._getSettings().smoothStop}get speed(){return this._getSettings().speed}get onStart(){return this._getSettings().onStart}get onStop(){return this._getSettings().onStop}onPrepareScrollEffect(){let e=this._draggable._updateId;u.off(v,e),u.off(D,e),this._draggable._preparePositionUpdate()}onApplyScrollEffect(){this._draggable._applyPositionUpdate()}},ke=class{constructor(e,t={}){this.name="autoscroll",this.version="0.0.2",this.settings=this._parseSettings(t),this._autoScrollProxy=null,e.on("start",()=>{this._autoScrollProxy||(this._autoScrollProxy=new Oe(this,e),Ce.addItem(this._autoScrollProxy))}),e.on("end",()=>{this._autoScrollProxy&&(Ce.removeItem(this._autoScrollProxy),this._autoScrollProxy=null)})}_parseSettings(e,t=vt()){let{targets:n=t.targets,inertAreaSize:r=t.inertAreaSize,speed:o=t.speed,smoothStop:s=t.smoothStop,getPosition:a=t.getPosition,getClientRect:c=t.getClientRect,onStart:l=t.onStart,onStop:d=t.onStop}=e||{};return{targets:n,inertAreaSize:r,speed:o,smoothStop:s,getPosition:a,getClientRect:c,onStart:l,onStop:d}}updateSettings(e={}){this.settings=this._parseSettings(e,this.settings)}};function Si(i){return e=>{let t=new ke(e,i),n=e;return n.plugins[t.name]=t,n}}var Ze=new Set(["auto","scroll","overlay"]);function le(i){let e=ne(i);return!!(Ze.has(e.overflowY)||Ze.has(e.overflowX))}function et(i){return i instanceof Document}function tt(i,e=[]){let t=i?.parentNode;for(;t&&!et(t);)t instanceof Element?(le(t)&&e.push(t),t=t.parentNode):t instanceof ShadowRoot?t=t.host:t=t.parentNode;return e.push(window),e}function _t(i){let e=[];return le(i)&&e.push(i),tt(i,e),e}function Ai(i={}){let e,t=0,n=null,r,{timeout:o=250,fallback:s=()=>!0}=i,a=d=>d.preventDefault(),c=d=>{if(t){if(e){d.cancelable&&d.preventDefault();return}e===void 0&&(d.cancelable&&d.timeStamp-t>o?(e=!0,d.preventDefault()):e=!1)}};return d=>{if(!(d.sensor instanceof N))return s(d);let{draggable:m,sensor:y,event:S}=d,E=S;if(E.pointerType==="touch"){if(E.type==="start"&&(E.srcEvent.type==="pointerdown"||E.srcEvent.type==="touchstart")){n=E.target;let _=n?_t(n):[];_.forEach(g=>{g.addEventListener("touchmove",c,{passive:!1,capture:!0})});let p=()=>{t&&(m.off("end",p),m.sensors.forEach(g=>{g instanceof N&&g.off("end",p)}),n?.removeEventListener("contextmenu",a),_.forEach(g=>{g.removeEventListener("touchmove",c,{capture:!0})}),t=0,e=void 0,n=null,r=void window.clearTimeout(r))};e=void 0,t=E.srcEvent.timeStamp,n?.addEventListener("contextmenu",a),m.on("end",p),m.sensors.forEach(g=>{g instanceof N&&g.off("end",p)}),o>0&&(r=window.setTimeout(()=>{m.resolveStartPredicate(y),e=!0,r=void 0},o))}return e}return E.type==="start"&&!E.srcEvent.button}}function yt(i,e){return Math.round(i/e)*e}function nt(i,e,t){let n=t-e,r=Math.abs(n);if(r>=i){let o=r%i;return yt(n>0?n-o:n+o,i)}return 0}function Oi(i,e){return function({item:n,event:r,startEvent:o}){let{__snapX__:s=o.x,__snapY__:a=o.y}=n.data,c=nt(i,s,r.x),l=nt(e,a,r.y);return c&&(n.data.__snapX__=s+c),l&&(n.data.__snapY__=a+l),{x:c,y:l}}}export{h as AUTO_SCROLL_AXIS,W as AUTO_SCROLL_AXIS_DIRECTION,f as AUTO_SCROLL_DIRECTION,ae as AutoScroll,Q as BaseMotionSensor,q as BaseSensor,He as Draggable,ke as DraggableAutoScroll,Ne as KeyboardMotionSensor,Xe as KeyboardSensor,N as PointerSensor,b as SensorEventType,Ce as autoScroll,Si as autoScrollPlugin,Qe as autoScrollSmoothSpeed,Ai as createPointerSensorStartPredicate,Oi as createSnapModifier,I as keyboardMotionSensorDefaults,M as keyboardSensorDefaults,Lt as setTicker,u as ticker,v as tickerReadPhase,D as tickerWritePhase};
