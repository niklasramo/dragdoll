"use strict";var Ke=Object.defineProperty;var Yt=Object.getOwnPropertyDescriptor;var Ht=Object.getOwnPropertyNames;var Nt=Object.prototype.hasOwnProperty;var Ft=(i,e)=>{for(var t in e)Ke(i,t,{get:e[t],enumerable:!0})},Gt=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Ht(e))!Nt.call(i,r)&&r!==t&&Ke(i,r,{get:()=>e[r],enumerable:!(n=Yt(e,r))||n.enumerable});return i};var Ut=i=>Gt(Ke({},"__esModule",{value:!0}),i);var En={};Ft(En,{AUTO_SCROLL_AXIS:()=>u,AUTO_SCROLL_AXIS_DIRECTION:()=>j,AUTO_SCROLL_DIRECTION:()=>E,AutoScroll:()=>pe,BaseMotionSensor:()=>re,BaseSensor:()=>Y,CollisionDetector:()=>me,CollisionDetectorDefaultOptions:()=>Re,DndContext:()=>lt,DndContextEventType:()=>v,Draggable:()=>Ne,DraggableApplyPositionPhase:()=>X,DraggableAutoScroll:()=>Ie,DraggableDefaultSettings:()=>It,DraggableEventType:()=>_,DraggableModifierPhase:()=>De,Droppable:()=>at,DroppableEventType:()=>Q,KeyboardMotionSensor:()=>Be,KeyboardSensor:()=>qe,PointerSensor:()=>z,Sensor:()=>We,SensorEventType:()=>h,autoScroll:()=>Me,autoScrollPlugin:()=>yn,autoScrollSmoothSpeed:()=>rt,createContainmentModifier:()=>hn,createSnapModifier:()=>cn,createTouchDelayPredicate:()=>an,keyboardMotionSensorDefaults:()=>M,keyboardSensorDefaults:()=>B,setTicker:()=>$t,ticker:()=>y,tickerPhases:()=>f});module.exports=Ut(En);var h={Start:"start",Move:"move",Cancel:"cancel",End:"end",Destroy:"destroy"},We=class{};var ht=require("eventti");var Y=class{constructor(){this.drag=null,this.isDestroyed=!1,this._emitter=new ht.Emitter}_createDragData(e){return{x:e.x,y:e.y}}_updateDragData(e){this.drag&&(this.drag.x=e.x,this.drag.y=e.y)}_resetDragData(){this.drag=null}_start(e){this.isDestroyed||this.drag||(this.drag=this._createDragData(e),this._emitter.emit(h.Start,e))}_move(e){this.drag&&(this._updateDragData(e),this._emitter.emit(h.Move,e))}_end(e){this.drag&&(this._updateDragData(e),this._emitter.emit(h.End,e),this._resetDragData())}_cancel(e){this.drag&&(this._updateDragData(e),this._emitter.emit(h.Cancel,e),this._resetDragData())}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}cancel(){this.drag&&this._cancel({type:h.Cancel,x:this.drag.x,y:this.drag.y})}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(h.Destroy,{type:h.Destroy}),this._emitter.off())}};var mt=require("tikki"),f={read:Symbol(),write:Symbol()},y=new mt.AutoTicker({phases:[f.read,f.write]});function $t(i,e){y=i,Object.assign(f,e)}var re=class extends Y{constructor(){super(),this.drag=null,this._direction={x:0,y:0},this._speed=0,this._tick=this._tick.bind(this)}_createDragData(e){return{...super._createDragData(e),time:0,deltaTime:0}}_start(e){this.isDestroyed||this.drag||(super._start(e),y.on(f.read,this._tick,this._tick))}_end(e){this.drag&&(y.off(f.read,this._tick),super._end(e))}_cancel(e){this.drag&&(y.off(f.read,this._tick),super._cancel(e))}_tick(e){if(this.drag)if(e&&this.drag.time){this.drag.deltaTime=e-this.drag.time,this.drag.time=e;let t={type:"tick",time:this.drag.time,deltaTime:this.drag.deltaTime};if(this._emitter.emit("tick",t),!this.drag)return;let n=this._speed*(this.drag.deltaTime/1e3),r=this._direction.x*n,o=this._direction.y*n;(r||o)&&this._move({type:h.Move,x:this.drag.x+r,y:this.drag.y+o})}else this.drag.time=e,this.drag.deltaTime=0}};var _t=require("eventti");function Ve(i,e){if("pointerId"in i)return i.pointerId===e?i:null;if("changedTouches"in i){let t=0;for(;t<i.changedTouches.length;t++)if(i.changedTouches[t].identifier===e)return i.changedTouches[t];return null}return i}function gt(i){return"pointerType"in i?i.pointerType:"touches"in i?"touch":"mouse"}function ft(i){return"pointerId"in i?i.pointerId:"changedTouches"in i?i.changedTouches[0]?i.changedTouches[0].identifier:null:-1}function ze(i={}){let{capture:e=!0,passive:t=!0}=i;return{capture:e,passive:t}}var R=typeof window<"u"&&typeof window.document<"u",ut=R&&"ontouchstart"in window,yt=R&&!!window.PointerEvent,kn=!!(R&&navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&navigator.userAgent.indexOf("CriOS")==-1&&navigator.userAgent.indexOf("FxiOS")==-1);function Xe(i){return i==="auto"||i===void 0?yt?"pointer":ut?"touch":"mouse":i}var Zt={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},Jt={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},Qt={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},G={pointer:Zt,touch:Jt,mouse:Qt},z=class{constructor(e,t={}){let{listenerOptions:n={},sourceEvents:r="auto",startPredicate:o=s=>!("button"in s&&s.button>0)}=t;this.element=e,this.drag=null,this.isDestroyed=!1,this._areWindowListenersBound=!1,this._startPredicate=o,this._listenerOptions=ze(n),this._sourceEvents=Xe(r),this._emitter=new _t.Emitter,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),e.addEventListener(G[this._sourceEvents].start,this._onStart,this._listenerOptions)}_getTrackedPointerEventData(e){return this.drag?Ve(e,this.drag.pointerId):null}_onStart(e){if(this.isDestroyed||this.drag||!this._startPredicate(e))return;let t=ft(e);if(t===null)return;let n=Ve(e,t);if(n===null)return;let r={pointerId:t,pointerType:gt(e),x:n.clientX,y:n.clientY};this.drag=r;let o={...r,type:h.Start,srcEvent:e,target:n.target};this._emitter.emit(o.type,o),this.drag&&this._bindWindowListeners()}_onMove(e){if(!this.drag)return;let t=this._getTrackedPointerEventData(e);if(!t)return;this.drag.x=t.clientX,this.drag.y=t.clientY;let n={type:h.Move,srcEvent:e,target:t.target,...this.drag};this._emitter.emit(n.type,n)}_onCancel(e){if(!this.drag)return;let t=this._getTrackedPointerEventData(e);if(!t)return;this.drag.x=t.clientX,this.drag.y=t.clientY;let n={type:h.Cancel,srcEvent:e,target:t.target,...this.drag};this._emitter.emit(n.type,n),this._resetDrag()}_onEnd(e){if(!this.drag)return;let t=this._getTrackedPointerEventData(e);if(!t)return;this.drag.x=t.clientX,this.drag.y=t.clientY;let n={type:h.End,srcEvent:e,target:t.target,...this.drag};this._emitter.emit(n.type,n),this._resetDrag()}_bindWindowListeners(){if(this._areWindowListenersBound)return;let{move:e,end:t,cancel:n}=G[this._sourceEvents];window.addEventListener(e,this._onMove,this._listenerOptions),window.addEventListener(t,this._onEnd,this._listenerOptions),n&&window.addEventListener(n,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!0}_unbindWindowListeners(){if(this._areWindowListenersBound){let{move:e,end:t,cancel:n}=G[this._sourceEvents];window.removeEventListener(e,this._onMove,this._listenerOptions),window.removeEventListener(t,this._onEnd,this._listenerOptions),n&&window.removeEventListener(n,this._onCancel,this._listenerOptions),this._areWindowListenersBound=!1}}_resetDrag(){this.drag=null,this._unbindWindowListeners()}cancel(){if(!this.drag)return;let e={type:h.Cancel,srcEvent:null,target:null,...this.drag};this._emitter.emit(e.type,e),this._resetDrag()}updateSettings(e){if(this.isDestroyed)return;let{listenerOptions:t,sourceEvents:n,startPredicate:r}=e,o=Xe(n),s=ze(t);r&&this._startPredicate!==r&&(this._startPredicate=r),(t&&(this._listenerOptions.capture!==s.capture||this._listenerOptions.passive===s.passive)||n&&this._sourceEvents!==o)&&(this.element.removeEventListener(G[this._sourceEvents].start,this._onStart,this._listenerOptions),this._unbindWindowListeners(),this.cancel(),n&&(this._sourceEvents=o),t&&s&&(this._listenerOptions=s),this.element.addEventListener(G[this._sourceEvents].start,this._onStart,this._listenerOptions))}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.cancel(),this._emitter.emit(h.Destroy,{type:h.Destroy}),this._emitter.off(),this.element.removeEventListener(G[this._sourceEvents].start,this._onStart,this._listenerOptions))}};var B={moveDistance:25,cancelOnBlur:!0,cancelOnVisibilityChange:!0,startPredicate:(i,e)=>{if(e.element&&(i.key==="Enter"||i.key===" ")&&document.activeElement===e.element){let{x:t,y:n}=e.element.getBoundingClientRect();return{x:t,y:n}}return null},movePredicate:(i,e)=>{if(!e.drag)return null;switch(i.key){case"ArrowLeft":return{x:e.drag.x-e.moveDistance.x,y:e.drag.y};case"ArrowRight":return{x:e.drag.x+e.moveDistance.x,y:e.drag.y};case"ArrowUp":return{x:e.drag.x,y:e.drag.y-e.moveDistance.y};case"ArrowDown":return{x:e.drag.x,y:e.drag.y+e.moveDistance.y};default:return null}},cancelPredicate:(i,e)=>{if(e.drag&&i.key==="Escape"){let{x:t,y:n}=e.drag;return{x:t,y:n}}return null},endPredicate:(i,e)=>{if(e.drag&&(i.key==="Enter"||i.key===" ")){let{x:t,y:n}=e.drag;return{x:t,y:n}}return null}},qe=class extends Y{constructor(e,t={}){super();let{moveDistance:n=B.moveDistance,cancelOnBlur:r=B.cancelOnBlur,cancelOnVisibilityChange:o=B.cancelOnVisibilityChange,startPredicate:s=B.startPredicate,movePredicate:a=B.movePredicate,cancelPredicate:l=B.cancelPredicate,endPredicate:c=B.endPredicate}=t;this.element=e,this.moveDistance=typeof n=="number"?{x:n,y:n}:{...n},this._cancelOnBlur=r,this._cancelOnVisibilityChange=o,this._startPredicate=s,this._movePredicate=a,this._cancelPredicate=l,this._endPredicate=c,this._onKeyDown=this._onKeyDown.bind(this),this._internalCancel=this._internalCancel.bind(this),this._blurCancelHandler=this._blurCancelHandler.bind(this),document.addEventListener("keydown",this._onKeyDown),r&&e?.addEventListener("blur",this._blurCancelHandler),o&&document.addEventListener("visibilitychange",this._internalCancel)}_internalCancel(){this.cancel()}_blurCancelHandler(){queueMicrotask(()=>{document.activeElement!==this.element&&this.cancel()})}_onKeyDown(e){if(!this.drag){let o=this._startPredicate(e,this);o&&(e.preventDefault(),this._start({type:h.Start,x:o.x,y:o.y,srcEvent:e}));return}let t=this._cancelPredicate(e,this);if(t){e.preventDefault(),this._cancel({type:h.Cancel,x:t.x,y:t.y,srcEvent:e});return}let n=this._endPredicate(e,this);if(n){e.preventDefault(),this._end({type:h.End,x:n.x,y:n.y,srcEvent:e});return}let r=this._movePredicate(e,this);if(r){e.preventDefault(),this._move({type:h.Move,x:r.x,y:r.y,srcEvent:e});return}}updateSettings(e={}){let{moveDistance:t,cancelOnBlur:n,cancelOnVisibilityChange:r,startPredicate:o,movePredicate:s,cancelPredicate:a,endPredicate:l}=e;t!==void 0&&(typeof t=="number"?this.moveDistance.x=this.moveDistance.y=t:(this.moveDistance.x=t.x,this.moveDistance.y=t.y)),n!==void 0&&this._cancelOnBlur!==n&&(this._cancelOnBlur=n,n?this.element?.addEventListener("blur",this._blurCancelHandler):this.element?.removeEventListener("blur",this._blurCancelHandler)),r!==void 0&&this._cancelOnVisibilityChange!==r&&(this._cancelOnVisibilityChange=r,r?document.addEventListener("visibilitychange",this._internalCancel):document.removeEventListener("visibilitychange",this._internalCancel)),o&&(this._startPredicate=o),s&&(this._movePredicate=s),a&&(this._cancelPredicate=a),l&&(this._endPredicate=l)}destroy(){this.isDestroyed||(super.destroy(),document.removeEventListener("keydown",this._onKeyDown),this._cancelOnBlur&&this.element?.removeEventListener("blur",this._blurCancelHandler),this._cancelOnVisibilityChange&&document.removeEventListener("visibilitychange",this._internalCancel))}};var en=["start","cancel","end","moveLeft","moveRight","moveUp","moveDown"];function ue(i,e){if(!i.size||!e.size)return 1/0;let t=1/0;for(let n of i){let r=e.get(n);r!==void 0&&r<t&&(t=r)}return t}var M={startKeys:[" ","Enter"],moveLeftKeys:["ArrowLeft"],moveRightKeys:["ArrowRight"],moveUpKeys:["ArrowUp"],moveDownKeys:["ArrowDown"],cancelKeys:["Escape"],endKeys:[" ","Enter"],cancelOnBlur:!0,cancelOnVisibilityChange:!0,computeSpeed:()=>500,startPredicate:(i,e)=>{if(e.element&&document.activeElement===e.element){let{left:t,top:n}=e.element.getBoundingClientRect();return{x:t,y:n}}return null}},Be=class extends re{constructor(e,t={}){super();let{startPredicate:n=M.startPredicate,computeSpeed:r=M.computeSpeed,cancelOnVisibilityChange:o=M.cancelOnVisibilityChange,cancelOnBlur:s=M.cancelOnBlur,startKeys:a=M.startKeys,moveLeftKeys:l=M.moveLeftKeys,moveRightKeys:c=M.moveRightKeys,moveUpKeys:d=M.moveUpKeys,moveDownKeys:p=M.moveDownKeys,cancelKeys:g=M.cancelKeys,endKeys:m=M.endKeys}=t;this.element=e,this._startKeys=new Set(a),this._cancelKeys=new Set(g),this._endKeys=new Set(m),this._moveLeftKeys=new Set(l),this._moveRightKeys=new Set(c),this._moveUpKeys=new Set(d),this._moveDownKeys=new Set(p),this._moveKeys=new Set([...l,...c,...d,...p]),this._moveKeyTimestamps=new Map,this._cancelOnBlur=s,this._cancelOnVisibilityChange=o,this._computeSpeed=r,this._startPredicate=n,this._onKeyDown=this._onKeyDown.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onTick=this._onTick.bind(this),this._internalCancel=this._internalCancel.bind(this),this._blurCancelHandler=this._blurCancelHandler.bind(this),this.on("tick",this._onTick,this._onTick),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("keyup",this._onKeyUp),s&&e?.addEventListener("blur",this._blurCancelHandler),o&&document.addEventListener("visibilitychange",this._internalCancel)}_end(e){this.drag&&(this._moveKeyTimestamps.clear(),this._direction.x=0,this._direction.y=0,super._end(e))}_cancel(e){this.drag&&(this._moveKeyTimestamps.clear(),this._direction.x=0,this._direction.y=0,super._cancel(e))}_internalCancel(){this.cancel()}_blurCancelHandler(){queueMicrotask(()=>{document.activeElement!==this.element&&this.cancel()})}_updateDirection(){let e=ue(this._moveLeftKeys,this._moveKeyTimestamps),t=ue(this._moveRightKeys,this._moveKeyTimestamps),n=ue(this._moveUpKeys,this._moveKeyTimestamps),r=ue(this._moveDownKeys,this._moveKeyTimestamps),o=e===t?0:e<t?-1:1,s=n===r?0:n<r?-1:1;if(!(o===0||s===0)){let a=1/(Math.sqrt(o*o+s*s)||1);o*=a,s*=a}this._direction.x=o,this._direction.y=s}_onTick(){this._speed=this._computeSpeed(this)}_onKeyUp(e){this._moveKeyTimestamps.get(e.key)&&(this._moveKeyTimestamps.delete(e.key),this._updateDirection())}_onKeyDown(e){if(!this.drag){if(this._startKeys.has(e.key)){let t=this._startPredicate(e,this);t&&(e.preventDefault(),this._start({type:h.Start,x:t.x,y:t.y}))}return}if(this._cancelKeys.has(e.key)){e.preventDefault(),this._internalCancel();return}if(this._endKeys.has(e.key)){e.preventDefault(),this._end({type:h.End,x:this.drag.x,y:this.drag.y});return}if(this._moveKeys.has(e.key)){e.preventDefault(),this._moveKeyTimestamps.get(e.key)||(this._moveKeyTimestamps.set(e.key,Date.now()),this._updateDirection());return}}updateSettings(e={}){let t=!1,{cancelOnBlur:n,cancelOnVisibilityChange:r,startPredicate:o,computeSpeed:s}=e;if(n!==void 0&&this._cancelOnBlur!==n&&(this._cancelOnBlur=n,n?this.element?.addEventListener("blur",this._blurCancelHandler):this.element?.removeEventListener("blur",this._blurCancelHandler)),r!==void 0&&this._cancelOnVisibilityChange!==r&&(this._cancelOnVisibilityChange=r,r?document.addEventListener("visibilitychange",this._internalCancel):document.removeEventListener("visibilitychange",this._internalCancel)),o!==void 0&&(this._startPredicate=o),s!==void 0&&(this._computeSpeed=s),en.forEach((a,l)=>{let c=`${a}Keys`,d=e[c];d!==void 0&&(this[`_${c}`]=new Set(d),l>=3&&(t=!0))}),t){let a=[...this._moveLeftKeys,...this._moveRightKeys,...this._moveUpKeys,...this._moveDownKeys];[...this._moveKeys].every((c,d)=>a[d]===c)||(this._moveKeys=new Set(a),this._moveKeyTimestamps.clear(),this._updateDirection())}}destroy(){this.isDestroyed||(super.destroy(),this.off("tick",this._onTick),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp),this._cancelOnBlur&&this.element?.removeEventListener("blur",this._blurCancelHandler),this._cancelOnVisibilityChange&&document.removeEventListener("visibilitychange",this._internalCancel))}};var Mt=require("eventti");var oe=class{constructor(){this._cache=new Map,this._validation=new Map}set(e,t){this._cache.set(e,t),this._validation.set(e,void 0)}get(e){return this._cache.get(e)}has(e){return this._cache.has(e)}delete(e){this._cache.delete(e),this._validation.delete(e)}isValid(e){return this._validation.has(e)}invalidate(e){e===void 0?this._validation.clear():this._validation.delete(e)}clear(){this._cache.clear(),this._validation.clear()}};var ye=class{constructor(e,t){this.sensor=e,this.startEvent=t,this.prevMoveEvent=t,this.moveEvent=t,this.endEvent=null,this.items=[],this.isEnded=!1,this._matrixCache=new oe,this._clientOffsetCache=new oe}};var Ye=require("mezr");var St=new WeakMap;function C(i){let e=St.get(i)?.deref();return e||(e=window.getComputedStyle(i,null),St.set(i,new WeakRef(e))),e}function H(i,e={x:0,y:0}){if(e.x=0,e.y=0,i instanceof Window)return e;if(i instanceof Document)return e.x=window.scrollX*-1,e.y=window.scrollY*-1,e;let{x:t,y:n}=i.getBoundingClientRect(),r=C(i);return e.x=t+(parseFloat(r.borderLeftWidth)||0),e.y=n+(parseFloat(r.borderTopWidth)||0),e}function je(i){return typeof i=="object"&&i!==null&&"x"in i&&"y"in i}var tn={x:0,y:0},nn={x:0,y:0};function Et(i,e,t={x:0,y:0}){let n=je(i)?i:H(i,tn),r=je(e)?e:H(e,nn);return t.x=r.x-n.x,t.y=r.y-n.y,t}function vt(i){let e=C(i),t=parseFloat(e.height)||0;return e.boxSizing==="border-box"||(t+=parseFloat(e.borderTopWidth)||0,t+=parseFloat(e.borderBottomWidth)||0,t+=parseFloat(e.paddingTop)||0,t+=parseFloat(e.paddingBottom)||0,i instanceof HTMLElement&&(t+=i.offsetHeight-i.clientHeight)),t}function bt(i){let e=C(i),t=parseFloat(e.width)||0;return e.boxSizing==="border-box"||(t+=parseFloat(e.borderLeftWidth)||0,t+=parseFloat(e.borderRightWidth)||0,t+=parseFloat(e.paddingLeft)||0,t+=parseFloat(e.paddingRight)||0,i instanceof HTMLElement&&(t+=i.offsetWidth-i.clientWidth)),t}function _e(i,e=!1){let{translate:t,rotate:n,scale:r,transform:o}=C(i),s="";if(t&&t!=="none"){let[a="0px",l="0px",c]=t.split(" ");a.includes("%")&&(a=`${parseFloat(a)/100*bt(i)}px`),l.includes("%")&&(l=`${parseFloat(l)/100*vt(i)}px`),c?s+=`translate3d(${a},${l},${c})`:s+=`translate(${a},${l})`}if(n&&n!=="none"){let a=n.split(" ");a.length>1?s+=`rotate3d(${a.join(",")})`:s+=`rotate(${a.join(",")})`}if(r&&r!=="none"){let a=r.split(" ");a.length===3?s+=`scale3d(${a.join(",")})`:s+=`scale(${a.join(",")})`}return!e&&o&&o!=="none"&&(s+=o),s}function Se(i){let e=i.split(" "),t="",n="",r="";return e.length===1?t=n=e[0]:e.length===2?[t,n]=e:[t,n,r]=e,{x:parseFloat(t)||0,y:parseFloat(n)||0,z:parseFloat(r)||0}}var rn="scale(1, 1)";function U(i){return i.setMatrixValue(rn)}var N=R?new DOMMatrix:null;function Dt(i,e=new DOMMatrix){let t=i;for(U(e);t;){let n=_e(t);if(n&&(N.setMatrixValue(n),!N.isIdentity)){let{transformOrigin:r}=C(t),{x:o,y:s,z:a}=Se(r);a===0?N.setMatrixValue(`translate(${o}px,${s}px) ${N} translate(${o*-1}px,${s*-1}px)`):N.setMatrixValue(`translate3d(${o}px,${s}px,${a}px) ${N} translate3d(${o*-1}px,${s*-1}px,${a*-1}px)`),e.preMultiplySelf(N)}t=t.parentElement}return e}function xt(i,e,t=!1){let{style:n}=i;for(let r in e)n.setProperty(r,e[r],t?"important":"")}function Ct(){let i=document.createElement("div");return i.classList.add("dragdoll-measure"),xt(i,{display:"block",position:"absolute",inset:"0px",padding:"0px",margin:"0px",border:"none",opacity:"0",transform:"none","transform-origin":"0 0",transition:"none",animation:"none","pointer-events":"none"},!0),i}function se(i){return i.m11!==1||i.m12!==0||i.m13!==0||i.m14!==0||i.m21!==0||i.m22!==1||i.m23!==0||i.m24!==0||i.m31!==0||i.m32!==0||i.m33!==1||i.m34!==0||i.m43!==0||i.m44!==1}var Ee=R?Ct():null,ve=class{constructor(e,t){if(!e.isConnected)throw new Error("Element is not connected");let{drag:n}=t;if(!n)throw new Error("Drag is not defined");let r=C(e),o=e.getBoundingClientRect(),s=_e(e,!0);this.data={},this.element=e,this.elementTransformOrigin=Se(r.transformOrigin),this.elementTransformMatrix=new DOMMatrix().setMatrixValue(s+r.transform),this.elementOffsetMatrix=new DOMMatrix(s).invertSelf(),this.frozenStyles=null,this.unfrozenStyles=null,this.position={x:0,y:0},this.containerOffset={x:0,y:0},this.alignmentOffset={x:0,y:0},this._moveDiff={x:0,y:0},this._alignDiff={x:0,y:0},this._matrixCache=n._matrixCache,this._clientOffsetCache=n._clientOffsetCache;let a=e.parentElement;if(!a)throw new Error("Dragged element does not have a parent element.");this.elementContainer=a;let l=t.settings.container||a;if(this.dragContainer=l,a!==l){let{position:g}=r;if(g!=="fixed"&&g!=="absolute")throw new Error(`Dragged element has "${g}" position, but only "fixed" or "absolute" are allowed when using a custom drag container.`)}let c=(0,Ye.getOffsetContainer)(e)||e;this.elementOffsetContainer=c;let d=l===a?c:(0,Ye.getOffsetContainer)(e,{container:l});this.dragOffsetContainer=d;{let{width:g,height:m,x:S,y:D}=o;this.clientRect={width:g,height:m,x:S,y:D}}this._updateContainerMatrices(),this._updateContainerOffset();let p=t.settings.frozenStyles({draggable:t,drag:n,item:this,style:r});if(Array.isArray(p))if(p.length){let g={};for(let m of p)g[m]=r[m];this.frozenStyles=g}else this.frozenStyles=null;else this.frozenStyles=p;if(this.frozenStyles){let g={};for(let m in this.frozenStyles)this.frozenStyles.hasOwnProperty(m)&&(g[m]=e.style[m]);this.unfrozenStyles=g}}_updateContainerMatrices(){[this.elementContainer,this.dragContainer].forEach(e=>{if(!this._matrixCache.isValid(e)){let t=this._matrixCache.get(e)||[new DOMMatrix,new DOMMatrix],[n,r]=t;Dt(e,n),r.setMatrixValue(n.toString()).invertSelf(),this._matrixCache.set(e,t)}})}_updateContainerOffset(){let{elementOffsetContainer:e,elementContainer:t,dragOffsetContainer:n,dragContainer:r,containerOffset:o,_clientOffsetCache:s,_matrixCache:a}=this;if(e!==n){let[l,c]=[[r,n],[t,e]].map(([d,p])=>{let g=s.get(p)||{x:0,y:0};if(!s.isValid(p)){let m=a.get(d);p instanceof HTMLElement&&m&&!m[0].isIdentity?se(m[0])?(Ee.style.setProperty("transform",m[1].toString(),"important"),p.append(Ee),H(Ee,g),Ee.remove()):(H(p,g),g.x-=m[0].m41,g.y-=m[0].m42):H(p,g)}return s.set(p,g),g});Et(l,c,o)}else o.x=0,o.y=0}getContainerMatrix(){return this._matrixCache.get(this.elementContainer)}getDragContainerMatrix(){return this._matrixCache.get(this.dragContainer)}updateSize(e){if(e)this.clientRect.width=e.width,this.clientRect.height=e.height;else{let{width:t,height:n}=this.element.getBoundingClientRect();this.clientRect.width=t,this.clientRect.height=n}}};function He(i,e,t){let n=document.activeElement,r=i.contains(n);t&&t.append(i),e.append(t||i),r&&document.activeElement!==n&&n.focus({preventScroll:!0})}function ae(i,e=0){let t=Math.pow(10,e);return Math.round((i+Number.EPSILON)*t)/t}function Tt(i,e){return i.isIdentity&&e.isIdentity?!0:i.is2D&&e.is2D?i.a===e.a&&i.b===e.b&&i.c===e.c&&i.d===e.d&&i.e===e.e&&i.f===e.f:i.m11===e.m11&&i.m12===e.m12&&i.m13===e.m13&&i.m14===e.m14&&i.m21===e.m21&&i.m22===e.m22&&i.m23===e.m23&&i.m24===e.m24&&i.m31===e.m31&&i.m32===e.m32&&i.m33===e.m33&&i.m34===e.m34&&i.m41===e.m41&&i.m42===e.m42&&i.m43===e.m43&&i.m44===e.m44}var Pt={capture:!0,passive:!0},on={x:0,y:0},w=R?new DOMMatrix:null,be=R?new DOMMatrix:null;var De={Start:"start",Move:"move",End:"end"},X={Start:"start",StartAlign:"start-align",Move:"move",Align:"align",End:"end",EndAlign:"end-align"},_={PrepareStart:"preparestart",Start:"start",PrepareMove:"preparemove",Move:"move",End:"end",Destroy:"destroy"},It={container:null,startPredicate:()=>!0,elements:()=>null,frozenStyles:()=>null,applyPosition:({item:i,phase:e})=>{let t=e===X.End||e===X.EndAlign,[n,r]=i.getContainerMatrix(),[o,s]=i.getDragContainerMatrix(),{position:a,alignmentOffset:l,containerOffset:c,elementTransformMatrix:d,elementTransformOrigin:p,elementOffsetMatrix:g}=i,{x:m,y:S,z:D}=p,x=!d.isIdentity&&(m!==0||S!==0||D!==0),b=a.x+l.x+c.x,T=a.y+l.y+c.y;U(w),x&&(D===0?w.translateSelf(-m,-S):w.translateSelf(-m,-S,-D)),t?r.isIdentity||w.multiplySelf(r):s.isIdentity||w.multiplySelf(s),U(be).translateSelf(b,T),w.multiplySelf(be),n.isIdentity||w.multiplySelf(n),x&&(U(be).translateSelf(m,S,D),w.multiplySelf(be)),d.isIdentity||w.multiplySelf(d),g.isIdentity||w.preMultiplySelf(g),i.element.style.transform=`${w}`},computeClientRect:({drag:i})=>i.items[0].clientRect||null,positionModifiers:[],group:null},Ne=class{constructor(e,t={}){let{id:n=Symbol(),...r}=t;this.id=n,this.sensors=e,this.settings=this._parseSettings(r),this.plugins={},this.drag=null,this.isDestroyed=!1,this._sensorData=new Map,this._emitter=new Mt.Emitter,this._startPhase=0,this._startId=Symbol(),this._moveId=Symbol(),this._alignId=Symbol(),this._onMove=this._onMove.bind(this),this._onScroll=this._onScroll.bind(this),this._onEnd=this._onEnd.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareAlign=this._prepareAlign.bind(this),this._applyAlign=this._applyAlign.bind(this),this.sensors.forEach(o=>{this._sensorData.set(o,{predicateState:0,predicateEvent:null,onMove:l=>this._onMove(l,o),onEnd:l=>this._onEnd(l,o)});let{onMove:s,onEnd:a}=this._sensorData.get(o);o.on(h.Start,s,s),o.on(h.Move,s,s),o.on(h.Cancel,a,a),o.on(h.End,a,a),o.on(h.Destroy,a,a)})}_parseSettings(e,t=It){let{container:n=t.container,startPredicate:r=t.startPredicate,elements:o=t.elements,frozenStyles:s=t.frozenStyles,positionModifiers:a=t.positionModifiers,applyPosition:l=t.applyPosition,computeClientRect:c=t.computeClientRect,group:d=t.group,onPrepareStart:p=t.onPrepareStart,onStart:g=t.onStart,onPrepareMove:m=t.onPrepareMove,onMove:S=t.onMove,onEnd:D=t.onEnd,onDestroy:x=t.onDestroy}=e||{};return{container:n,startPredicate:r,elements:o,frozenStyles:s,positionModifiers:a,applyPosition:l,computeClientRect:c,group:d,onPrepareStart:p,onStart:g,onPrepareMove:m,onMove:S,onEnd:D,onDestroy:x}}_emit(e,...t){this._emitter.emit(e,...t)}_onMove(e,t){let n=this._sensorData.get(t);if(n)switch(n.predicateState){case 0:{n.predicateEvent=e;let r=this.settings.startPredicate({draggable:this,sensor:t,event:e});r===!0?this.resolveStartPredicate(t):r===!1&&this.rejectStartPredicate(t);break}case 1:{this.drag&&(this.drag.moveEvent=e,y.once(f.read,this._prepareMove,this._moveId),y.once(f.write,this._applyMove,this._moveId));break}}}_onScroll(){this.align()}_onEnd(e,t){let n=this._sensorData.get(t);n&&(this.drag?n.predicateState===1&&(this.drag.endEvent=e,this._sensorData.forEach(r=>{r.predicateState=0,r.predicateEvent=null}),this.stop()):(n.predicateState=0,n.predicateEvent=null))}_prepareStart(){let e=this.drag;if(!e)return;this._startPhase=2;let t=this.settings.elements({draggable:this,drag:e})||[];e.items=t.map(n=>new ve(n,this)),this._applyModifiers(De.Start,0,0),this._emit(_.PrepareStart,e.startEvent),this.settings.onPrepareStart?.(e,this),this._startPhase=3}_applyStart(){let e=this.drag;if(e){this._startPhase=4;for(let t of e.items)t.dragContainer!==t.elementContainer&&He(t.element,t.dragContainer),t.frozenStyles&&Object.assign(t.element.style,t.frozenStyles),this.settings.applyPosition({phase:X.Start,draggable:this,drag:e,item:t});for(let t of e.items){let n=t.getContainerMatrix()[0],r=t.getDragContainerMatrix()[0];if(Tt(n,r)||!se(n)&&!se(r))continue;let o=t.element.getBoundingClientRect(),{alignmentOffset:s}=t;s.x+=ae(t.clientRect.x-o.x,3),s.y+=ae(t.clientRect.y-o.y,3)}for(let t of e.items){let{alignmentOffset:n}=t;(n.x!==0||n.y!==0)&&this.settings.applyPosition({phase:X.StartAlign,draggable:this,drag:e,item:t})}window.addEventListener("scroll",this._onScroll,Pt),this._emit(_.Start,e.startEvent),this.settings.onStart?.(e,this),this._startPhase=5}}_prepareMove(){let e=this.drag;if(!e)return;let{moveEvent:t,prevMoveEvent:n}=e;t!==n&&(this._applyModifiers(De.Move,t.x-n.x,t.y-n.y),this._emit(_.PrepareMove,t),!e.isEnded&&(this.settings.onPrepareMove?.(e,this),!e.isEnded&&(e.prevMoveEvent=t)))}_applyMove(){let e=this.drag;if(e){for(let t of e.items)t._moveDiff.x=0,t._moveDiff.y=0,this.settings.applyPosition({phase:X.Move,draggable:this,drag:e,item:t});this._emit(_.Move,e.moveEvent),!e.isEnded&&this.settings.onMove?.(e,this)}}_prepareAlign(){let{drag:e}=this;if(e)for(let t of e.items){let{x:n,y:r}=t.element.getBoundingClientRect(),o=t.clientRect.x-t._moveDiff.x-n;t.alignmentOffset.x=t.alignmentOffset.x-t._alignDiff.x+o,t._alignDiff.x=o;let s=t.clientRect.y-t._moveDiff.y-r;t.alignmentOffset.y=t.alignmentOffset.y-t._alignDiff.y+s,t._alignDiff.y=s}}_applyAlign(){let{drag:e}=this;if(e)for(let t of e.items)t._alignDiff.x=0,t._alignDiff.y=0,this.settings.applyPosition({phase:X.Align,draggable:this,drag:e,item:t})}_applyModifiers(e,t,n){let{drag:r}=this;if(!r)return;let{positionModifiers:o}=this.settings;for(let s of r.items){let a=on;a.x=t,a.y=n;for(let l of o)a=l(a,{draggable:this,drag:r,item:s,phase:e});s.position.x+=a.x,s.position.y+=a.y,s.clientRect.x+=a.x,s.clientRect.y+=a.y,e==="move"&&(s._moveDiff.x+=a.x,s._moveDiff.y+=a.y)}}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}resolveStartPredicate(e,t){let n=this._sensorData.get(e);if(!n)return;let r=t||n.predicateEvent;n.predicateState===0&&r&&(this._startPhase=1,n.predicateState=1,n.predicateEvent=null,this.drag=new ye(e,r),this._sensorData.forEach((o,s)=>{s!==e&&(o.predicateState=2,o.predicateEvent=null)}),y.once(f.read,this._prepareStart,this._startId),y.once(f.write,this._applyStart,this._startId))}rejectStartPredicate(e){let t=this._sensorData.get(e);t?.predicateState===0&&(t.predicateState=2,t.predicateEvent=null)}stop(){let e=this.drag;if(!e||e.isEnded)return;let t=this._startPhase;if(t===2||t===4)throw new Error("Cannot stop drag start process at this point");if(this._startPhase=0,e.isEnded=!0,y.off(f.read,this._startId),y.off(f.write,this._startId),y.off(f.read,this._moveId),y.off(f.write,this._moveId),y.off(f.read,this._alignId),y.off(f.write,this._alignId),window.removeEventListener("scroll",this._onScroll,Pt),t>1&&this._applyModifiers(De.End,0,0),t===5){for(let n of e.items){if(n.elementContainer!==n.dragContainer&&(He(n.element,n.elementContainer),n.alignmentOffset.x=0,n.alignmentOffset.y=0,n.containerOffset.x=0,n.containerOffset.y=0),n.unfrozenStyles)for(let r in n.unfrozenStyles)n.element.style[r]=n.unfrozenStyles[r]||"";this.settings.applyPosition({phase:X.End,draggable:this,drag:e,item:n})}for(let n of e.items)if(n.elementContainer!==n.dragContainer){let r=n.element.getBoundingClientRect();n.alignmentOffset.x=ae(n.clientRect.x-r.x,3),n.alignmentOffset.y=ae(n.clientRect.y-r.y,3)}for(let n of e.items)n.elementContainer!==n.dragContainer&&(n.alignmentOffset.x!==0||n.alignmentOffset.y!==0)&&this.settings.applyPosition({phase:X.EndAlign,draggable:this,drag:e,item:n})}else if(t===3)for(let n of e.items)n.clientRect.x-=n.position.x,n.clientRect.y-=n.position.y,n.position.x=0,n.position.y=0,n.elementContainer!==n.dragContainer&&(n.alignmentOffset.x=0,n.alignmentOffset.y=0,n.containerOffset.x=0,n.containerOffset.y=0);this._emit(_.End,e.endEvent),this.settings.onEnd?.(e,this),this.drag=null}align(e=!1){this.drag&&(e?(this._prepareAlign(),this._applyAlign()):(y.once(f.read,this._prepareAlign,this._alignId),y.once(f.write,this._applyAlign,this._alignId)))}getClientRect(){let{drag:e,settings:t}=this;return e&&t.computeClientRect?.({draggable:this,drag:e})||null}updateSettings(e={}){this.settings=this._parseSettings(e,this.settings)}use(e){return e(this)}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.stop(),this._sensorData.forEach(({onMove:e,onEnd:t},n)=>{n.off(h.Start,e),n.off(h.Move,e),n.off(h.Cancel,t),n.off(h.End,t),n.off(h.Destroy,t)}),this._sensorData.clear(),this._emit(_.Destroy),this.settings.onDestroy?.(this),this._emitter.off())}};var wt=new Set(["auto","scroll","overlay"]);function xe(i){let e=C(i);return!!(wt.has(e.overflowY)||wt.has(e.overflowX))}function Rt(i){return i instanceof Document}function Ot(i,e=[]){let t=i?.parentNode;for(e.length=0;t&&!Rt(t);)t instanceof Element?(xe(t)&&e.push(t),t=t.parentNode):t instanceof ShadowRoot?t=t.host:t=t.parentNode;return e.push(window),e}function sn(i){let e=[];return xe(i)&&e.push(i),Ot(i,e),e}function an(i={}){let e,t=0,n=null,r,{touchDelay:o=250,fallback:s=()=>!0}=i,a=d=>d.preventDefault(),l=d=>{if(t){if(e){d.cancelable&&d.preventDefault();return}e===void 0&&(d.cancelable&&d.timeStamp-t>o?(e=!0,d.preventDefault()):e=!1)}};return d=>{if(!(d.sensor instanceof z))return s(d);let{draggable:p,sensor:g,event:m}=d,S=m;if(S.pointerType==="touch"){if(S.type===h.Start&&(S.srcEvent.type==="pointerdown"||S.srcEvent.type==="touchstart")){n=S.target;let D=n?sn(n):[];D.forEach(b=>{b.addEventListener("touchmove",l,{passive:!1,capture:!0})});let x=()=>{t&&(p.off(_.End,x),p.sensors.forEach(b=>{b instanceof z&&b.off(h.End,x)}),n?.removeEventListener("contextmenu",a),D.forEach(b=>{b.removeEventListener("touchmove",l,{capture:!0})}),t=0,e=void 0,n=null,r=void window.clearTimeout(r))};e=void 0,t=S.srcEvent.timeStamp,n?.addEventListener("contextmenu",a),p.on(_.End,x),p.sensors.forEach(b=>{b instanceof z&&b.on(h.End,x)}),o>0&&(r=window.setTimeout(()=>{p.resolveStartPredicate(g),e=!0,r=void 0},o))}return e}return S.type===h.Start&&!S.srcEvent.button}}function ln(i,e){return Math.round(i/e)*e}function At(i,e,t){let n=t-e,r=Math.abs(n);if(r>=i){let o=r%i;return ln(n>0?n-o:n+o,i)}return 0}function cn(i,e){return function(n,{item:r}){let o=r.data.__snap__||(r.data.__snap__={snapX:0,snapY:0,sensorX:0,sensorY:0});o.sensorX+=n.x,o.sensorY+=n.y;let s=At(i,o.snapX,o.sensorX),a=At(e,o.snapY,o.sensorY);return o.snapX+=s,o.snapY+=a,n.x=s,n.y=a,n}}function O(i,e={width:0,height:0,x:0,y:0,left:0,top:0,right:0,bottom:0}){return i&&(e.width=i.width,e.height=i.height,e.x=i.x,e.y=i.y,e.left=i.x,e.top=i.y,e.right=i.x+i.width,e.bottom=i.y+i.height),e}var dn=O(),pn=O(),$={change:0,drift:0};function kt(i,e,t,n,r,o,s){let a=o,l=r;if(o>0){if(a=Math.min(Math.max(n-e,0),o),s)if(r<0){let c=Math.min(-r,o);l=r+c,a=Math.max(0,a-c)}else l=r+(o-a)}else if(o<0&&(a=Math.max(Math.min(t-i,0),o),s))if(r>0){let c=Math.max(-r,o);l=r+c,a=Math.min(0,a-c)}else l=r+(o-a);$.change=a,$.drift=l}function hn(i,e=({drag:t})=>t.sensor instanceof z){return function(n,r){let o=O(i(r),dn),s=O(r.item.clientRect,pn),a=r.item.data,l=a.__containment__||{drift:{x:0,y:0},trackDrift:!1};a.__containment__||(l.trackDrift=typeof e=="function"?e(r):e,a.__containment__=l);let{drift:c,trackDrift:d}=l;return n.x&&(kt(s.left,s.right,o.left,o.right,c.x,n.x,d),c.x=$.drift,n.x=$.change),n.y&&(kt(s.top,s.bottom,o.top,o.bottom,c.y,n.y,d),c.y=$.drift,n.y=$.change),n}}var le=class{constructor(e,{batchSize:t=100,minBatchCount:n=0,maxBatchCount:r=Number.MAX_SAFE_INTEGER,initialBatchCount:o=0,shrinkThreshold:s=2,onRelease:a}={}){this._batchSize=Math.floor(Math.max(t,1)),this._minSize=Math.floor(Math.max(n,0))*this._batchSize,this._maxSize=Math.floor(Math.min(Math.max(r*this._batchSize,this._batchSize),Number.MAX_SAFE_INTEGER)),this._shrinkThreshold=Math.floor(Math.max(s,1)*this._batchSize),this._data=new Array(Math.floor(Math.max(Math.max(o,n)*this._batchSize,0))),this._index=0,this._getItem=e,this._onRelease=a}get(...e){if(this._index>0)return this._getItem(this._data[--this._index],...e);if(this._index===0){let t=this._data.length,n=Math.min(this._batchSize,this._maxSize-t);n>0&&(this._data.length=t+n)}return this._getItem(void 0,...e)}release(e){if(this._index<this._maxSize&&(this._onRelease&&this._onRelease(e),this._data[this._index++]=e,this._index>=this._shrinkThreshold)){let t=this._data.length-this._batchSize;t>=this._minSize&&(this._data.length=t,this._index-=this._batchSize)}}destroy(){this._data.length=0,this._index=0}};var Lt=require("mezr");var mn=O(),gn=O();function Kt(i,e){return(0,Lt.getDistance)(O(i,mn),O(e,gn))}function Ce(i,e,t={width:0,height:0,x:0,y:0}){let n=Math.max(i.x,e.x),r=Math.min(i.x+i.width,e.x+e.width);if(r<=n)return null;let o=Math.max(i.y,e.y),s=Math.min(i.y+i.height,e.y+e.height);return s<=o?null:(t.x=n,t.y=o,t.width=r-n,t.height=s-o,t)}var fn={width:0,height:0,x:0,y:0};function ce(i,e,t){if(t||(t=Ce(i,e,fn)),!t)return 0;let n=t.width*t.height;if(!n)return 0;let r=Math.min(i.width,e.width)*Math.min(i.height,e.height);return n/r*100}var Wt=require("mezr");function Fe(...i){let{width:e,height:t,left:n,top:r}=(0,Wt.getRect)(...i);return{width:e,height:t,x:n,y:r}}function A(i){return i instanceof Window}function Ge(i){return A(i)||i===document.documentElement||i===document.body?window:i}function Z(i){return A(i)?i.scrollX:i.scrollLeft}function Ue(i){return A(i)&&(i=document.documentElement),i.scrollWidth-i.clientWidth}function J(i){return A(i)?i.scrollY:i.scrollTop}function $e(i){return A(i)&&(i=document.documentElement),i.scrollHeight-i.clientHeight}function Ze(i,e){return!(i.x+i.width<=e.x||e.x+e.width<=i.x||i.y+i.height<=e.y||e.y+e.height<=i.y)}var Vt={width:0,height:0,x:0,y:0},zt=50,k={direction:"none",threshold:0,distance:0,value:0,maxValue:0,duration:0,speed:0,deltaTime:0,isEnding:!1},u={x:1,y:2},j={forward:4,reverse:8},Te={none:0,left:u.x|j.reverse,right:u.x|j.forward},de={none:0,up:u.y|j.reverse,down:u.y|j.forward},E={...Te,...de};function Je(i){switch(i){case Te.none:case de.none:return"none";case Te.left:return"left";case Te.right:return"right";case de.up:return"up";case de.down:return"down";default:throw new Error(`Unknown direction value: ${i}`)}}function Xt(i,e,t){let{left:n=0,right:r=0,top:o=0,bottom:s=0}=e;return n=Math.max(0,n),r=Math.max(0,r),o=Math.max(0,o),s=Math.max(0,s),t.width=i.width+n+r,t.height=i.height+o+s,t.x=i.x-n,t.y=i.y-o,t}function Pe(i,e){return Math.ceil(i)>=Math.floor(e)}function Qe(i,e){return Math.min(e/2,i)}function et(i,e,t,n){return Math.max(0,t+i*2+n*e-n)/2}var tt=class{constructor(){this.positionX=0,this.positionY=0,this.directionX=E.none,this.directionY=E.none,this.overlapCheckRequestTime=0}},nt=class{constructor(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}reset(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}addRequest(e){u.x&e.direction?(this.requestX&&this.removeRequest(this.requestX),this.requestX=e):(this.requestY&&this.removeRequest(this.requestY),this.requestY=e),e.action=this}removeRequest(e){this.requestX===e?(this.requestX=null,e.action=null):this.requestY===e&&(this.requestY=null,e.action=null)}computeScrollValues(){this.element&&(this.scrollLeft=this.requestX?this.requestX.value:Z(this.element),this.scrollTop=this.requestY?this.requestY.value:J(this.element))}scroll(){this.element&&(this.element.scrollTo?this.element.scrollTo(this.scrollLeft,this.scrollTop):(this.element.scrollLeft=this.scrollLeft,this.element.scrollTop=this.scrollTop))}},it=class{constructor(){this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}reset(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=0,this.value=NaN,this.maxValue=0,this.threshold=0,this.distance=0,this.deltaTime=0,this.speed=0,this.duration=0,this.action=null}hasReachedEnd(){return j.forward&this.direction?Pe(this.value,this.maxValue):this.value<=0}computeCurrentScrollValue(){return this.element?this.value!==this.value?u.x&this.direction?Z(this.element):J(this.element):Math.max(0,Math.min(this.value,this.maxValue)):0}computeNextScrollValue(){let e=this.speed*(this.deltaTime/1e3),t=j.forward&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(t,this.maxValue))}computeSpeed(){if(!this.item||!this.element)return 0;let{speed:e}=this.item;return typeof e=="function"?(k.direction=Je(this.direction),k.threshold=this.threshold,k.distance=this.distance,k.value=this.value,k.maxValue=this.maxValue,k.duration=this.duration,k.speed=this.speed,k.deltaTime=this.deltaTime,k.isEnding=this.isEnding,e(this.element,k)):e}tick(e){return this.isActive||(this.isActive=!0,this.onStart()),this.deltaTime=e,this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(),this.value=this.computeNextScrollValue(),this.duration+=e,this.value}onStart(){if(!this.item||!this.element)return;let{onStart:e}=this.item;typeof e=="function"&&e(this.element,Je(this.direction))}onStop(){if(!this.item||!this.element)return;let{onStop:e}=this.item;typeof e=="function"&&e(this.element,Je(this.direction))}};function rt(i=500,e=.5,t=.25){let n=i*(e>0?1/e:1/0),r=i*(t>0?1/t:1/0);return function(o,s){let a=0;if(!s.isEnding)if(s.threshold>0){let d=s.threshold-Math.max(0,s.distance);a=i/s.threshold*d}else a=i;let l=s.speed;if(l===a)return a;let c=a;return l<a?(c=l+n*(s.deltaTime/1e3),Math.min(a,c)):(c=l-r*(s.deltaTime/1e3),Math.max(a,c))}}var pe=class{constructor(e={}){let{overlapCheckInterval:t=150}=e;this.items=[],this.settings={overlapCheckInterval:t},this._actions=[],this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._requests={[u.x]:new Map,[u.y]:new Map},this._itemData=new Map,this._requestPool=new le(n=>n||new it,{initialBatchCount:1,minBatchCount:1,onRelease:n=>n.reset()}),this._actionPool=new le(n=>n||new nt,{batchSize:10,initialBatchCount:1,minBatchCount:1,onRelease:n=>n.reset()}),this._frameRead=this._frameRead.bind(this),this._frameWrite=this._frameWrite.bind(this)}_frameRead(e){this._isDestroyed||(e&&this._tickTime?(this._tickDeltaTime=e-this._tickTime,this._tickTime=e,this._updateItems(),this._updateRequests(),this._updateActions()):(this._tickTime=e,this._tickDeltaTime=0))}_frameWrite(){this._isDestroyed||this._applyActions()}_startTicking(){this._isTicking||(this._isTicking=!0,y.on(f.read,this._frameRead,this._frameRead),y.on(f.write,this._frameWrite,this._frameWrite))}_stopTicking(){this._isTicking&&(this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,y.off(f.read,this._frameRead),y.off(f.write,this._frameWrite))}_requestItemScroll(e,t,n,r,o,s,a){let l=this._requests[t],c=l.get(e);c?(c.element!==n||c.direction!==r)&&c.reset():(c=this._requestPool.get(),l.set(e,c)),c.item=e,c.element=n,c.direction=r,c.threshold=o,c.distance=s,c.maxValue=a}_cancelItemScroll(e,t){let n=this._requests[t],r=n.get(e);r&&(r.action&&r.action.removeRequest(r),this._requestPool.release(r),n.delete(e))}_checkItemOverlap(e,t,n){let{inertAreaSize:r,targets:o,clientRect:s}=e;if(!o.length){t&&this._cancelItemScroll(e,u.x),n&&this._cancelItemScroll(e,u.y);return}let a=this._itemData.get(e),l=a?.directionX,c=a?.directionY;if(!l&&!c){t&&this._cancelItemScroll(e,u.x),n&&this._cancelItemScroll(e,u.y);return}let d=null,p=-1/0,g=0,m=-1/0,S=E.none,D=0,x=0,b=null,T=-1/0,te=0,ne=-1/0,Oe=E.none,ct=0,dt=0,Ae=0;for(;Ae<o.length;Ae++){let L=o[Ae],pt=typeof L.threshold=="number"?L.threshold:zt,ke=!!(t&&l&&L.axis!=="y"),Le=!!(n&&c&&L.axis!=="x"),q=L.priority||0;if((!ke||q<p)&&(!Le||q<T))continue;let K=Ge(L.element||L),ge=ke?Ue(K):-1,fe=Le?$e(K):-1;if(ge<=0&&fe<=0)continue;let P=Fe([K,"padding"],window),F=ce(s,P)||-1/0;if(F===-1/0)if(L.padding&&Ze(s,Xt(P,L.padding,Vt)))F=-(Kt(s,P)||0);else continue;if(ke&&q>=p&&ge>0&&(q>p||F>m)){let I=0,W=E.none,V=Qe(pt,P.width),ie=et(V,r,s.width,P.width);l===E.right?(I=P.x+P.width+ie-(s.x+s.width),I<=V&&!Pe(Z(K),ge)&&(W=E.right)):l===E.left&&(I=s.x-(P.x-ie),I<=V&&Z(K)>0&&(W=E.left)),W&&(d=K,p=q,g=V,m=F,S=W,D=I,x=ge)}if(Le&&q>=T&&fe>0&&(q>T||F>ne)){let I=0,W=de.none,V=Qe(pt,P.height),ie=et(V,r,s.height,P.height);c===E.down?(I=P.y+P.height+ie-(s.y+s.height),I<=V&&!Pe(J(K),fe)&&(W=E.down)):c===E.up&&(I=s.y-(P.y-ie),I<=V&&J(K)>0&&(W=E.up)),W&&(b=K,T=q,te=V,ne=F,Oe=W,ct=I,dt=fe)}}t&&(d&&S?this._requestItemScroll(e,u.x,d,S,g,D,x):this._cancelItemScroll(e,u.x)),n&&(b&&Oe?this._requestItemScroll(e,u.y,b,Oe,te,ct,dt):this._cancelItemScroll(e,u.y))}_updateScrollRequest(e){let t=e.item,{inertAreaSize:n,smoothStop:r,targets:o,clientRect:s}=t,a=null,l=0;for(;l<o.length;l++){let c=o[l],d=Ge(c.element||c);if(d!==e.element)continue;let p=!!(u.x&e.direction);if(p){if(c.axis==="y")continue}else if(c.axis==="x")continue;let g=p?Ue(d):$e(d);if(g<=0)break;let m=Fe([d,"padding"],window);if((ce(s,m)||-1/0)===-1/0){let ne=c.scrollPadding||c.padding;if(!(ne&&Ze(s,Xt(m,ne,Vt))))break}let D=typeof c.threshold=="number"?c.threshold:zt,x=Qe(D,p?m.width:m.height),b=et(x,n,p?s.width:s.height,p?m.width:m.height),T=0;if(e.direction===E.left?T=s.x-(m.x-b):e.direction===E.right?T=m.x+m.width+b-(s.x+s.width):e.direction===E.up?T=s.y-(m.y-b):T=m.y+m.height+b-(s.y+s.height),T>x)break;let te=p?Z(d):J(d);if(a=j.forward&e.direction?Pe(te,g):te<=0,a)break;return e.maxValue=g,e.threshold=x,e.distance=T,e.isEnding=!1,!0}return r===!0&&e.speed>0?(a===null&&(a=e.hasReachedEnd()),e.isEnding=!a):e.isEnding=!1,e.isEnding}_updateItems(){for(let e=0;e<this.items.length;e++){let t=this.items[e],n=this._itemData.get(t),{x:r,y:o}=t.position,s=n.positionX,a=n.positionY;r===s&&o===a||(n.directionX=r>s?E.right:r<s?E.left:n.directionX,n.directionY=o>a?E.down:o<a?E.up:n.directionY,n.positionX=r,n.positionY=o,n.overlapCheckRequestTime===0&&(n.overlapCheckRequestTime=this._tickTime))}}_updateRequests(){let e=this.items,t=this._requests[u.x],n=this._requests[u.y],r=0;for(;r<e.length;r++){let o=e[r],s=this._itemData.get(o),a=s.overlapCheckRequestTime,l=a>0&&this._tickTime-a>this.settings.overlapCheckInterval,c=!0,d=t.get(o);d&&d.isActive&&(c=!this._updateScrollRequest(d),c&&(l=!0,this._cancelItemScroll(o,u.x)));let p=!0,g=n.get(o);g&&g.isActive&&(p=!this._updateScrollRequest(g),p&&(l=!0,this._cancelItemScroll(o,u.y))),l&&(s.overlapCheckRequestTime=0,this._checkItemOverlap(o,c,p))}}_requestAction(e,t){let n=t===u.x,r=null,o=0;for(;o<this._actions.length;o++){if(r=this._actions[o],e.element!==r.element){r=null;continue}if(n?r.requestX:r.requestY){this._cancelItemScroll(e.item,t);return}break}r||(r=this._actionPool.get()),r.element=e.element,r.addRequest(e),e.tick(this._tickDeltaTime),this._actions.push(r)}_updateActions(){let e=0;for(e=0;e<this.items.length;e++){let t=this.items[e],n=this._requests[u.x].get(t),r=this._requests[u.y].get(t);n&&this._requestAction(n,u.x),r&&this._requestAction(r,u.y)}for(e=0;e<this._actions.length;e++)this._actions[e].computeScrollValues()}_applyActions(){if(!this._actions.length)return;let e=0;for(e=0;e<this._actions.length;e++)this._actions[e].scroll(),this._actionPool.release(this._actions[e]);this._actions.length=0}addItem(e){if(this._isDestroyed||this._itemData.has(e))return;let{x:t,y:n}=e.position,r=new tt;r.positionX=t,r.positionY=n,r.directionX=E.none,r.directionY=E.none,r.overlapCheckRequestTime=this._tickTime,this._itemData.set(e,r),this.items.push(e),this._isTicking||this._startTicking()}removeItem(e){if(this._isDestroyed)return;let t=this.items.indexOf(e);t!==-1&&(this._requests[u.x].get(e)&&(this._cancelItemScroll(e,u.x),this._requests[u.x].delete(e)),this._requests[u.y].get(e)&&(this._cancelItemScroll(e,u.y),this._requests[u.y].delete(e)),this._itemData.delete(e),this.items.splice(t,1),this._isTicking&&!this.items.length&&this._stopTicking())}isDestroyed(){return this._isDestroyed}isItemScrollingX(e){return!!this._requests[u.x].get(e)?.isActive}isItemScrollingY(e){return!!this._requests[u.y].get(e)?.isActive}isItemScrolling(e){return this.isItemScrollingX(e)||this.isItemScrollingY(e)}updateSettings(e={}){let{overlapCheckInterval:t=this.settings.overlapCheckInterval}=e;this.settings.overlapCheckInterval=t}destroy(){this._isDestroyed||(this.items.forEach(e=>this.removeItem(e)),this._requestPool.destroy(),this._actionPool.destroy(),this._actions.length=0,this._isDestroyed=!0)}};var Me=new pe;var ot={x:0,y:0},he={width:0,height:0,x:0,y:0};function un(){return{targets:[],inertAreaSize:.2,speed:rt(),smoothStop:!1,getPosition:i=>{let{drag:e}=i,t=e?.items[0];if(t)return t.position;let n=e&&(e.moveEvent||e.startEvent);return ot.x=n?n.x:0,ot.y=n?n.y:0,ot},getClientRect:i=>{let{drag:e}=i,t=i.getClientRect();if(t)return t;let n=e&&(e.moveEvent||e.startEvent);return he.width=n?50:0,he.height=n?50:0,he.x=n?n.x-25:0,he.y=n?n.y-25:0,he},onStart:null,onStop:null}}var st=class{constructor(e,t){this._draggableAutoScroll=e,this._draggable=t,this._position={x:0,y:0},this._clientRect={width:0,height:0,x:0,y:0}}_getSettings(){return this._draggableAutoScroll.settings}get targets(){let{targets:e}=this._getSettings();return typeof e=="function"&&(e=e(this._draggable)),e}get position(){let e=this._position,{getPosition:t}=this._getSettings();return typeof t=="function"?Object.assign(e,t(this._draggable)):(e.x=0,e.y=0),e}get clientRect(){let e=this._clientRect,{getClientRect:t}=this._getSettings();return typeof t=="function"?Object.assign(e,t(this._draggable)):(e.width=0,e.height=0,e.x=0,e.y=0),e}get inertAreaSize(){return this._getSettings().inertAreaSize}get smoothStop(){return this._getSettings().smoothStop}get speed(){return this._getSettings().speed}get onStart(){return this._getSettings().onStart}get onStop(){return this._getSettings().onStop}},Ie=class{constructor(e,t={}){this.name="autoscroll",this.version="0.0.3",this.settings=this._parseSettings(t),this._autoScrollProxy=null,e.on(_.Start,()=>{this._autoScrollProxy||(this._autoScrollProxy=new st(this,e),Me.addItem(this._autoScrollProxy))}),e.on(_.End,()=>{this._autoScrollProxy&&(Me.removeItem(this._autoScrollProxy),this._autoScrollProxy=null)})}_parseSettings(e,t=un()){let{targets:n=t.targets,inertAreaSize:r=t.inertAreaSize,speed:o=t.speed,smoothStop:s=t.smoothStop,getPosition:a=t.getPosition,getClientRect:l=t.getClientRect,onStart:c=t.onStart,onStop:d=t.onStop}=e||{};return{targets:n,inertAreaSize:r,speed:o,smoothStop:s,getPosition:a,getClientRect:l,onStart:c,onStop:d}}updateSettings(e={}){this.settings=this._parseSettings(e,this.settings)}};function yn(i){return e=>{let t=new Ie(e,i),n=e;return n.plugins[t.name]=t,n}}var jt=require("eventti");var qt=require("eventti"),Q={Destroy:"destroy"},at=class{constructor(e,t={}){let{id:n=Symbol(),accept:r=()=>!0,data:o={}}=t;this.id=n,this.element=e,this.accept=r,this.data=o,this.isDestroyed=!1,this._clientRect={x:0,y:0,width:0,height:0},this._emitter=new qt.Emitter,this.updateClientRect()}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}getClientRect(){return this._clientRect}updateClientRect(e){let t=e||this.element.getBoundingClientRect(),{_clientRect:n}=this;n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height}destroy(){this.isDestroyed||(this.isDestroyed=!0,this._emitter.emit(Q.Destroy),this._emitter.off())}};var we=class{constructor(e){this._items=[],this._index=0,this._getItem=e}get(...e){return this._index>=this._items.length?this._items[this._index++]=this._getItem(void 0,...e):this._getItem(this._items[this._index++],...e)}resetPointer(){this._index=0}resetItems(e=0){let t=Math.max(0,Math.min(e,this._items.length));this._index=Math.min(this._index,t),this._items.length=t}};function ee(i,e={width:0,height:0,x:0,y:0}){return i&&(e.width=i.width,e.height=i.height,e.x=i.x,e.y=i.y),e}var _n=20,Sn=Symbol(),Re={checkCollision:(i,e,t)=>{let n=i.getClientRect(),r=e.getClientRect();if(!n)return null;let o=Ce(n,r,t.intersectionRect);if(o===null)return null;let s=ce(n,r,o);return s<=0?null:(t.droppableId=e.id,ee(r,t.droppableRect),ee(n,t.draggableRect),t.intersectionScore=s,t)},sortCollisions:(i,e)=>e.sort((t,n)=>{let r=n.intersectionScore-t.intersectionScore;return r!==0?r:t.droppableRect.width*t.droppableRect.height-n.droppableRect.width*n.droppableRect.height}),createCollisionData:()=>({droppableId:Sn,droppableRect:ee(),draggableRect:ee(),intersectionRect:ee(),intersectionScore:0})},me=class{constructor(e,{checkCollision:t=Re.checkCollision,createCollisionData:n=Re.createCollisionData,sortCollisions:r=Re.sortCollisions}={}){this._listenerId=Symbol(),this._dndContext=e,this._collisionDataPoolCache=[],this._collisionDataPoolMap=new Map,this.checkCollision=t,this.sortCollisions=r,this.createCollisionData=n}getCollisionDataPool(e){let t=this._collisionDataPoolMap.get(e);return t||(t=this._collisionDataPoolCache.pop()||new we(n=>n||this.createCollisionData()),this._collisionDataPoolMap.set(e,t)),t}removeCollisionDataPool(e){let t=this._collisionDataPoolMap.get(e);t&&(t.resetItems(_n),t.resetPointer(),this._collisionDataPoolCache.push(t),this._collisionDataPoolMap.delete(e))}detectCollisions(e,t,n){if(n.length=0,!t.size)return;let r=this.getCollisionDataPool(e),o=null,s=t.values();for(let a of s)o=o||r.get(),this.checkCollision(e,a,o)&&(n.push(o),o=null);n.length>1&&this.sortCollisions(e,n),r.resetPointer()}destroy(){this._collisionDataPoolMap.forEach(e=>{e.resetItems()})}};var Bt={capture:!0,passive:!0},v={Start:"start",Move:"move",Enter:"enter",Leave:"leave",Collide:"collide",End:"end",AddDraggables:"addDraggables",RemoveDraggables:"removeDraggables",AddDroppables:"addDroppables",RemoveDroppables:"removeDroppables",Destroy:"destroy"},lt=class{constructor(e={}){this._onScroll=()=>{this._drags.size!==0&&(y.once(f.read,()=>{this.updateDroppableClientRects()},this._listenerId),this.detectCollisions())};let{collisionDetector:t}=e;this.draggables=new Map,this.droppables=new Map,this.isDestroyed=!1,this._drags=new Map,this._listenerId=Symbol(),this._emitter=new jt.Emitter,this._onScroll=this._onScroll.bind(this),typeof t=="function"?this._collisionDetector=t(this):this._collisionDetector=new me(this,t)}get drags(){return this._drags}_isMatch(e,t){let n=typeof t.accept=="function"?t.accept(e):t.accept.includes(e.settings.group);if(n&&e.drag){let r=e.drag.items;for(let o=0;o<r.length;o++)if(r[o].element===t.element)return!1}return n}_getTargets(e){let t=this._drags.get(e);if(t?._targets)return t._targets;let n=new Map;for(let r of this.droppables.values())this._isMatch(e,r)&&n.set(r.id,r);return t&&(t._targets=n),n}_onDragPrepareStart(e){this.draggables.has(e.id)&&(this._drags.get(e)||(this._drags.set(e,{isEnded:!1,data:{},_targets:null,_cd:{phase:0,tickerId:Symbol(),targets:new Map,collisions:[],contacts:new Set,prevContacts:new Set,addedContacts:new Set,persistedContacts:new Set}}),this._drags.size===1&&this.updateDroppableClientRects(),this._computeCollisions(e),this._drags.size===1&&window.addEventListener("scroll",this._onScroll,Bt)))}_onDragStart(e){let t=this._drags.get(e);if(!(!t||t.isEnded)){if(this._emitter.listenerCount(v.Start)){let n=this._getTargets(e);this._emitter.emit(v.Start,{draggable:e,targets:n})}this._emitCollisions(e)}}_onDragPrepareMove(e){let t=this._drags.get(e);!t||t.isEnded||this._computeCollisions(e)}_onDragMove(e){let t=this._drags.get(e);if(!(!t||t.isEnded)){if(this._emitter.listenerCount(v.Move)){let n=this._getTargets(e);this._emitter.emit(v.Move,{draggable:e,targets:n})}this._emitCollisions(e)}}_onDragEnd(e){this._stopDrag(e)}_onDragCancel(e){this._stopDrag(e,!0)}_onDraggableDestroy(e){this.removeDraggables([e])}_stopDrag(e,t=!1){let n=this._drags.get(e);if(!n||n.isEnded)return!1;n.isEnded=!0;let r=n._cd.phase===3;r||(this._computeCollisions(e,!0),this._emitCollisions(e,!0));let{targets:o,collisions:s,contacts:a}=n._cd;return this._emitter.listenerCount(v.End)&&this._emitter.emit(v.End,{canceled:t,draggable:e,targets:o,collisions:s,contacts:a}),r?(window.queueMicrotask(()=>{this._finalizeStopDrag(e)}),!0):(this._finalizeStopDrag(e),!1)}_finalizeStopDrag(e){let t=this._drags.get(e);!t||!t.isEnded||(this._drags.delete(e),this._collisionDetector.removeCollisionDataPool(e),y.off(f.read,t._cd.tickerId),y.off(f.write,t._cd.tickerId),this._drags.size||(y.off(f.read,this._listenerId),window.removeEventListener("scroll",this._onScroll,Bt)))}_computeCollisions(e,t=!1){let n=this._drags.get(e);if(!n||!t&&n.isEnded)return;let r=n._cd;switch(r.phase){case 1:throw new Error("Collisions are being computed.");case 3:throw new Error("Collisions are being emitted.");default:break}r.phase=1,r.targets=this._getTargets(e),this._collisionDetector.detectCollisions(e,r.targets,r.collisions),r.phase=2}_emitCollisions(e,t=!1){let n=this._drags.get(e);if(!n||!t&&n.isEnded)return;let r=n._cd;switch(r.phase){case 1:throw new Error("Collisions are being computed.");case 3:throw new Error("Collisions are being emitted.");case 0:return;default:break}r.phase=3;let o=this._emitter,s=r.collisions,a=r.targets,l=r.addedContacts,c=r.persistedContacts,d=r.contacts,p=r.prevContacts;r.prevContacts=d,r.contacts=p;let g=d;l.clear(),c.clear(),p.clear();for(let m of s){let S=a.get(m.droppableId);S&&(p.add(S),d.has(S)?(c.add(S),d.delete(S)):l.add(S))}d.size&&o.listenerCount(v.Leave)&&o.emit(v.Leave,{draggable:e,targets:a,collisions:s,contacts:p,removedContacts:g}),l.size&&o.listenerCount(v.Enter)&&o.emit(v.Enter,{draggable:e,targets:a,collisions:s,contacts:p,addedContacts:l}),o.listenerCount(v.Collide)&&(p.size||g.size)&&o.emit(v.Collide,{draggable:e,targets:a,collisions:s,contacts:p,addedContacts:l,removedContacts:g,persistedContacts:c}),l.clear(),c.clear(),d.clear(),r.phase=0}on(e,t,n){return this._emitter.on(e,t,n)}off(e,t){this._emitter.off(e,t)}updateDroppableClientRects(){for(let e of this.droppables.values())e.updateClientRect()}clearTargets(e){if(e){let t=this._drags.get(e);t&&(t._targets=null)}else for(let t of this._drags.values())t._targets=null}detectCollisions(e){if(!this.isDestroyed)if(e){let t=this._drags.get(e);if(!t||t.isEnded)return;y.once(f.read,()=>this._computeCollisions(e),t._cd.tickerId),y.once(f.write,()=>this._emitCollisions(e),t._cd.tickerId)}else for(let[t,n]of this._drags)n.isEnded||(y.once(f.read,()=>this._computeCollisions(t),n._cd.tickerId),y.once(f.write,()=>this._emitCollisions(t),n._cd.tickerId))}addDraggables(e){if(this.isDestroyed)return;let t=new Set;for(let n of e)this.draggables.has(n.id)||(t.add(n),this.draggables.set(n.id,n),n.on(_.PrepareStart,()=>{this._onDragPrepareStart(n)},this._listenerId),n.on(_.Start,()=>{this._onDragStart(n)},this._listenerId),n.on(_.PrepareMove,()=>{this._onDragPrepareMove(n)},this._listenerId),n.on(_.Move,()=>{this._onDragMove(n)},this._listenerId),n.on(_.End,r=>{r?.type===h.End?this._onDragEnd(n):r?.type===h.Cancel&&this._onDragCancel(n)},this._listenerId),n.on(_.Destroy,()=>{this._onDraggableDestroy(n)},this._listenerId));if(t.size){this._emitter.listenerCount(v.AddDraggables)&&this._emitter.emit(v.AddDraggables,{draggables:t});for(let n of t)if(!this.isDestroyed&&n.drag&&!n.drag.isEnded){let r=n._startPhase;r>=2&&this._onDragPrepareStart(n),r>=4&&this._onDragStart(n)}}}removeDraggables(e){if(this.isDestroyed)return;let t=new Set;for(let n of e)this.draggables.has(n.id)&&(t.add(n),this.draggables.delete(n.id),n.off(_.PrepareStart,this._listenerId),n.off(_.Start,this._listenerId),n.off(_.PrepareMove,this._listenerId),n.off(_.Move,this._listenerId),n.off(_.End,this._listenerId),n.off(_.Destroy,this._listenerId));for(let n of t)this._stopDrag(n,!0);this._emitter.listenerCount(v.RemoveDraggables)&&this._emitter.emit(v.RemoveDraggables,{draggables:t})}addDroppables(e){if(this.isDestroyed)return;let t=new Set;for(let n of e)this.droppables.has(n.id)||(t.add(n),this.droppables.set(n.id,n),n.on(Q.Destroy,()=>{this.removeDroppables([n])},this._listenerId),this._drags.forEach(({_targets:r},o)=>{r&&this._isMatch(o,n)&&(r.set(n.id,n),this.detectCollisions(o))}));t.size&&this._emitter.listenerCount(v.AddDroppables)&&this._emitter.emit(v.AddDroppables,{droppables:t})}removeDroppables(e){if(this.isDestroyed)return;let t=new Set;for(let n of e)this.droppables.has(n.id)&&(this.droppables.delete(n.id),t.add(n),n.off(Q.Destroy,this._listenerId),this._drags.forEach(({_targets:r},o)=>{r&&r.has(n.id)&&(r.delete(n.id),this.detectCollisions(o))}));t.size&&this._emitter.listenerCount(v.RemoveDroppables)&&this._emitter.emit(v.RemoveDroppables,{droppables:t})}destroy(){if(this.isDestroyed)return;this.isDestroyed=!0,this.draggables.forEach(t=>{t.off(_.PrepareStart,this._listenerId),t.off(_.Start,this._listenerId),t.off(_.PrepareMove,this._listenerId),t.off(_.Move,this._listenerId),t.off(_.End,this._listenerId),t.off(_.Destroy,this._listenerId)}),this.droppables.forEach(t=>{t.off(Q.Destroy,this._listenerId)});let e=this._drags.keys();for(let t of e)this._stopDrag(t,!0);this._emitter.emit(v.Destroy),this._emitter.off(),this._collisionDetector.destroy(),this.draggables.clear(),this.droppables.clear()}};0&&(module.exports={AUTO_SCROLL_AXIS,AUTO_SCROLL_AXIS_DIRECTION,AUTO_SCROLL_DIRECTION,AutoScroll,BaseMotionSensor,BaseSensor,CollisionDetector,CollisionDetectorDefaultOptions,DndContext,DndContextEventType,Draggable,DraggableApplyPositionPhase,DraggableAutoScroll,DraggableDefaultSettings,DraggableEventType,DraggableModifierPhase,Droppable,DroppableEventType,KeyboardMotionSensor,KeyboardSensor,PointerSensor,Sensor,SensorEventType,autoScroll,autoScrollPlugin,autoScrollSmoothSpeed,createContainmentModifier,createSnapModifier,createTouchDelayPredicate,keyboardMotionSensorDefaults,keyboardSensorDefaults,setTicker,ticker,tickerPhases});
